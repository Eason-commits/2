(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/detailmap/index"],{"0923":function(t,n,e){"use strict";var i=e("e470"),o=e.n(i);o.a},"5a6e":function(t,n,e){},"5b9f":function(t,n,e){"use strict";e.r(n);var i=e("f927"),o=e("5d24");for(var a in o)["default"].indexOf(a)<0&&function(t){e.d(n,t,(function(){return o[t]}))}(a);e("862f"),e("0923");var s=e("f0c5"),r=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);n["default"]=r.exports},"5d24":function(t,n,e){"use strict";e.r(n);var i=e("e2fd"),o=e.n(i);for(var a in i)["default"].indexOf(a)<0&&function(t){e.d(n,t,(function(){return i[t]}))}(a);n["default"]=o.a},"862f":function(t,n,e){"use strict";var i=e("5a6e"),o=e.n(i);o.a},"9ef6":function(t,n,e){"use strict";(function(t,n){var i=e("4ea4");e("5340");i(e("66fd"));var o=i(e("5b9f"));t.__webpack_require_UNI_MP_PLUGIN__=e,n(o.default)}).call(this,e("bc2e")["default"],e("543d")["createPage"])},e2fd:function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=e("5951"),o=new i.AMapWX({key:getApp().globalData.GaoDeKey_amapkey}),a={components:{phoneinput:function(){e.e("components/phoneinput/indexn").then(function(){return resolve(e("160a"))}.bind(null,e)).catch(e.oe)}},computed:{i18n:function(){return getApp().globalData.$t("index")}},data:function(){return{showphoneCode:!1,AppdrapviewHeight:0,draptop:0,drapbottom:0,polyline:[],showorderview:!1,safeAreaBottom:0,top:20,minheight:60,StartY:0,StartX:0,windowHeight:0,drapHeight:0,markers:[],distance:0,scale:16,longitude:"",latitude:"",platform:"",position:{y:0},oid:0,info:null,mylocation:{latitude:0,longitude:0}}},onShow:function(){this.finishedThumb()},mounted:function(){},onLoad:function(n){this.oid=n.oid,this.mylocation=t.getStorageSync("mylocation"),this.latitude=this.mylocation.latitude,this.longitude=this.mylocation.longitude,console.log(this.latitude,this.longitude),this.safeAreaBottom=getApp().globalData.safeAreaBottom+66,this.top=getApp().globalData.top,this.minheight=40,this.windowHeight=getApp().globalData.windowHeight-getApp().globalData.top-44,this.drapHeight=this.safeAreaBottom+100,this.drapbottom=this.safeAreaBottom,this.draptop=this.top},onReady:function(){console.log("onReady"),this.getdata()},methods:{cancleinput:function(){this.showphoneCode=!1},relaxcancle:function(){this.showorderview=!1},relaxsure:function(){},RiderOrdersTrans:function(){var n=t.getStorageSync("userinfo"),e=this;6!=this.info.status&&(t.showLoading({title:"",mask:!1}),this.sendRequest("Rider.Orders.CheckTrans",{cityid:n.cityid}).then((function(t){1==parseInt(t.info[0].istip)?e.showorderview=!0:setTimeout((function(){e.qweqweqwewq()}),500)})))},qweqweqwewq:function(){},finishcode:function(n){t.showLoading({title:"",mask:!1});var e=this;this.sendRequest("Rider.Orders.Complete",{oid:this.info.id,code:n},!0).then((function(n){console.log(n),e.getdata(),setTimeout((function(){t.navigateBack({delta:1})}),1e3),e.showphoneCode=!1}))},serviceCompleted:function(){this.showphoneCode=!0},getdata:function(){var n=this;this.sendRequest("Rider.Orders.GetDetail",{oid:this.oid}).then((function(t){n.info=t.info[0],n.makeline()})).catch((function(n){t.showToast({title:n.msg,icon:"none"}),setTimeout((function(){t.navigateBack({delta:1})}),1e3)}))},StartService:function(){t.navigateTo({url:"../uploadphoto/index"})},finishedThumb:function(){var n=this;t.getStorage({key:"finishthumb",success:function(e){e.data.length>0&&(console.log("pppppppppppppppppppppppppp"),console.log(e),n.sendRequest("Rider.Orders.Start",{oid:n.info.id,thumbs:JSON.stringify(e.data)},!0).then((function(e){console.log(e),t.setStorage({key:"finishthumb",data:""}),n.getdata()})).catch((function(n){t.setStorage({key:"finishthumb",data:""})})))}})},connect:function(){var n=this.info.recip_phone;this.info.type<3&&3==this.info.status&&(n=this.info.pick_phone),console.log(this.info),t.makePhoneCall({phoneNumber:n,success:function(t){},fail:function(t){console.log("调用失败!",JSON.stringify(t))}})},previamge:function(n){t.previewImage({current:n,urls:this.info.thumbs})},makeline:function(){var n,e,i=this;console.log(i.info),3==i.info.status&&(1==i.info.type||2==i.info.type||3==i.info.type||6==i.info.type)?(n=i.info.f_lat,e=i.info.f_lng,3==i.info.type&&""==i.info.f_lng&&(n=i.info.t_lat,e=i.info.t_lng)):(n=i.info.t_lat,e=i.info.t_lng),i.markers=[{iconPath:"../../static/image/qidianicon.png",id:1,latitude:i.latitude,longitude:i.longitude,width:40,height:40,coordType:"wgs84"},{iconPath:"../../static/image/zhongdianicon.png",id:2,latitude:n,longitude:e,width:40,height:40,coordType:"wgs84"}],setTimeout((function(){o.getRidingRoute({origin:i.longitude+","+i.latitude,destination:e+","+n,success:function(t){console.log("路径规划完成"),console.log("距离："+t.paths[0].distance),i.scale=i.scalesize(t.paths[0].distance);var n=0;n=t.paths[0].distance>1e3?i.fomatFloat(t.paths[0].distance/1e3,1)+"km":t.paths[0].distance+"m",i.info.myDistance=n;var e=parseFloat(t.paths[0].distance)+parseFloat(i.info.extra.distance);e>1e3?e=i.fomatFloat(e/1e3,1)+"km":e+="m",i.info.allDistance=e,console.log("mydistance："+i.info.myDistance),console.log("allDistance："+i.info.allDistance);var o=[];if(t.paths&&t.paths[0]&&t.paths[0].rides)for(var a=t.paths[0].rides,s=0;s<a.length;s++)for(var r=a[s].polyline.split(";"),c=0;c<r.length;c++)o.push({longitude:parseFloat(r[c].split(",")[0]),latitude:parseFloat(r[c].split(",")[1])});i.polyline=[{points:o,color:"#FF5725",width:6}]},fail:function(n){t.hideLoading(),t.showModal({title:this.i18n.order.lujinguihuashibai,content:"",showCancel:!1,cancelText:"",confirmText:this.i18n.sure,success:function(t){},fail:function(){},complete:function(){}}),console.log(n)}})}),0)},qudaohang:function(t,n,e){this.openLocation("__UNI__7350749",t,n,e)},openLocation:function(n,e,i,o){var a=this.wgs84togcj02(e,i);e=a[0],i=a[1],console.log(a),t.openLocation({latitude:parseFloat(i),longitude:parseFloat(e),success:function(){console.log("success")},fail:function(t){console.log(t)}})},getEl:function(t){return"string"===typeof t||"number"===typeof t?t:WXEnvironment?t.ref:t instanceof HTMLElement?t:t.$el},fomatFloat:function(t,n){var e=Math.round(t*Math.pow(10,n))/Math.pow(10,n),i=e.toString(),o=i.indexOf(".");o<0&&(i+=".");for(var a=i.length-i.indexOf(".");a<=n;a++)i+="0";return i},scalesize:function(t){return t>=1e6?3:t>=5e5&&t<1e6?5:t>=2e5&&t<5e5?7:t>=1e5&&t<2e5||t>=5e4&&t<1e5?9:t>=2e4&&t<5e4?11:t>=1e4&&t<2e4?12:13},back:function(){t.navigateBack({delta:1})},touchStart:function(t){this.StartY=t.changedTouches[0].pageY,this.StartX=t.changedTouches[0].pageX},wgs84togcj02:function(t,n){var e=3.141592653589793,i=6378245,o=.006693421622965943,a=this.transformlat(t-105,n-35),s=this.transformlng(t-105,n-35),r=n/180*e,c=Math.sin(r);c=1-o*c*c;var l=Math.sqrt(c);a=180*a/(i*(1-o)/(c*l)*e),s=180*s/(i/l*Math.cos(r)*e);var u=n+a,d=t+s;return[d,u]},transformlat:function(t,n){var e=3.141592653589793,i=2*t-100+3*n+.2*n*n+.1*t*n+.2*Math.sqrt(Math.abs(t));return i+=2*(20*Math.sin(6*t*e)+20*Math.sin(2*t*e))/3,i+=2*(20*Math.sin(n*e)+40*Math.sin(n/3*e))/3,i+=2*(160*Math.sin(n/12*e)+320*Math.sin(n*e/30))/3,i},transformlng:function(t,n){var e=3.141592653589793,i=300+t+2*n+.1*t*t+.1*t*n+.1*Math.sqrt(Math.abs(t));return i+=2*(20*Math.sin(6*t*e)+20*Math.sin(2*t*e))/3,i+=2*(20*Math.sin(t*e)+40*Math.sin(t/3*e))/3,i+=2*(150*Math.sin(t/12*e)+300*Math.sin(t/30*e))/3,i},bindstart:function(n){var e=this,i=this.getEl(this.$refs.drapview);obj=Binding.bind({anchor:i,eventType:"pan",props:[{element:i,property:"transform.translateY",expression:"y+".concat(this.position.y)}]},(function(n){if("end"===n.state){if(!n.deltaY)return;e.position.y+=n.deltaY;var o=t.createSelectorQuery().in(e);o.select("#drapview").boundingClientRect((function(t){var n=0;e.position.y<0?t.bottom<e.windowHeight&&(n=-(e.position.y+t.height-e.windowHeight/3)):e.position.y>200&&(n=0-e.position.y);var o="easeInOutCubic(t,".concat(e.position.y,",").concat(n,",").concat(460,")");Binding.bind({eventType:"timing",exitExpression:"t>=".concat(460),props:[{element:i,property:"transform.translateY",expression:o}]},(function(t){"end"!==t.state&&"exit"!==t.state||(e.position.y+=n)}))})).exec()}}))},touchMove:function(t){var n=t.changedTouches[0].pageY-this.StartY,e=t.changedTouches[0].pageX-this.StartX;if(Math.abs(e)>Math.abs(n)&&e>0);else if(Math.abs(e)>Math.abs(n)&&e<0);else if(Math.abs(e)<Math.abs(n)&&n<0){if(this.drapHeight==this.windowHeight-this.top-40||this.drapHeight>this.windowHeight-this.top-40)return}else{if(!(Math.abs(e)<Math.abs(n)&&n>0))return;if(this.drapHeight==this.minheight||this.drapHeight<this.minheight)return void(this.drapHeight=this.minheight)}this.drapHeight=this.windowHeight-t.changedTouches[0].pageY},decypt:function(t){for(var n="",e="1ecxXyLRB.COdrAi:q09Z62ash-QGn8VFNIlb=fM/D74WjS_EUzYuw?HmTPvkJ3otK5gp&*",i=0;i<t.length;i++)for(var o=t[i],a=0;a<e.length;a++){var s=e[a];o==s&&(n+=0==a?e[e.length-1]:e[a-1])}return n},sendRequest:function(n,e,i){var o=new Promise((function(o,a){var s=t.getStorageSync("userinfo"),r={source:3};s&&(r.uid=s.id,r.token=s.token,r.cityid=s.cityid);var c=t.getStorageSync("system_info"),l=c.language?c.language:"th-TH";console.log(l);-1!=l.indexOf("zh")?r.lang="zh":r.lang="th";t.request({url:getApp().globalData.mainurl+n,data:Object.assign(r,e),success:function(n){setTimeout((function(){t.hideLoading()}),400),i&&t.showToast({title:n.data.data.msg,icon:"none"}),200==n.data.ret?0==n.data.data.code?o(n.data.data):a(n.data.data):t.showToast({title:n.data.msg,icon:"none"})},fail:function(n){console.log(n),t.hideLoading()}})}));return o}}};n.default=a}).call(this,e("543d")["default"])},e470:function(t,n,e){},f927:function(t,n,e){"use strict";e.d(n,"b",(function(){return i})),e.d(n,"c",(function(){return o})),e.d(n,"a",(function(){}));var i=function(){var t=this,n=t.$createElement,e=(t._self._c,t.info?t.__map(t.info.product,(function(n,e){var i=t.__get_orig(n),o=6==t.info.type?n.product_attr_id>0||n.more_product_attr&&n.more_product_attr.length>0:null,a=6==t.info.type?n.more_product_attr&&n.more_product_attr.length>0:null,s=6==t.info.type&&a?t.__map(n.more_product_attr,(function(e,i){var o=t.__get_orig(e),a=n.more_product_attr.length;return{$orig:o,g2:a}})):null;return{$orig:i,g0:o,g1:a,l0:s}})):null),i=t.info&&4==t.info.type?t.info.extra.length:null,o=t.info?t.info.thumbs.length:null,a=t.info?t.__map([t.i18n.order.xiadan,t.i18n.order.jiedan,t.i18n.order.qujian,t.i18n.order.songda],(function(n,e){var i=t.__get_orig(n),o=1!=t.info.type&&2!=t.info.type||2!=e?null:t.info.pick_time2.length,a=1!=t.info.type&&2!=t.info.type||3!=e?null:t.info.complete_time2.length;return{$orig:i,g5:o,g6:a}})):null,s=t.info?t.__map([t.i18n.order.xiadan,t.i18n.order.jiedan,t.i18n.yilou.paidan,t.i18n.order.songda],(function(n,e){var i=t.__get_orig(n),o=6==t.info.type&&2==e?t.info.pick_time2.length:null,a=6==t.info.type&&3==e?t.info.complete_time2.length:null;return{$orig:i,g7:o,g8:a}})):null,r=t.info?t.__map([t.i18n.order.xiadan,t.i18n.order.jiedan,t.i18n.order.buy,t.i18n.order.songda],(function(n,e){var i=t.__get_orig(n),o=3==t.info.type&&2==e?t.info.pick_time2.length:null,a=3==t.info.type&&3==e?t.info.complete_time2.length:null;return{$orig:i,g9:o,g10:a}})):null,c=t.info?t.__map([t.i18n.order.xiadan,t.i18n.order.jiedan,t.i18n.order.fuwu,t.i18n.order.songda],(function(n,e){var i=t.__get_orig(n),o=4!=t.info.type&&5!=t.info.type||2!=e?null:t.info.pick_time2.length,a=4!=t.info.type&&5!=t.info.type||3!=e?null:t.info.complete_time2.length;return{$orig:i,g11:o,g12:a}})):null;t.$mp.data=Object.assign({},{$root:{l1:e,g3:i,g4:o,l2:a,l3:s,l4:r,l5:c}})},o=[]}},[["9ef6","common/runtime","common/vendor"]]]);