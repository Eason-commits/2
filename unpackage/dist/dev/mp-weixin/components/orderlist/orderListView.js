(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/orderlist/orderListView"],{535:function(e,t,n){"use strict";n.r(t);var r=n(536),o=n(538);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(540);var a,s=n(25),c=Object(s["default"])(o["default"],r["render"],r["staticRenderFns"],!1,null,null,null,!1,r["components"],a);c.options.__file="components/orderlist/orderListView.vue",t["default"]=c.exports},536:function(e,t,n){"use strict";n.r(t);var r=n(537);n.d(t,"render",(function(){return r["render"]})),n.d(t,"staticRenderFns",(function(){return r["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return r["recyclableRender"]})),n.d(t,"components",(function(){return r["components"]}))},537:function(e,t,n){"use strict";var r;n.r(t),n.d(t,"render",(function(){return o})),n.d(t,"staticRenderFns",(function(){return a})),n.d(t,"recyclableRender",(function(){return i})),n.d(t,"components",(function(){return r}));var o=function(){var e=this,t=e.$createElement;e._self._c},i=!1,a=[];o._withStripped=!0},538:function(e,t,n){"use strict";n.r(t);var r=n(539),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t["default"]=o.a},539:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){Promise.all([n.e("common/vendor"),n.e("components/payview/payview")]).then(function(){return resolve(n(619))}.bind(null,n)).catch(n.oe)},o=function(){Promise.all([n.e("common/vendor"),n.e("components/addorder/order-tip")]).then(function(){return resolve(n(605))}.bind(null,n)).catch(n.oe)},i={components:{payView:r,tipMoneyV:o},computed:{i18n:function(){return this.$t("index")}},data:function(){return{windowHeight:0,listArray:[],page:1,refresherTriggered:0,price:0,showpay:0,selectedItem:{},showTip:0,addTipMoney:0,type:0,index:1}},props:{height:{type:[Number],default:0},typeString:{type:[Number,String],default:0},islogin:{type:[Number,Boolean],default:0}},created:function(){var e=this;e.windowHeight=getApp().globalData.windowHeight,e.islogin&&e.requestData()},methods:{call:function(t){e.makePhoneCall({phoneNumber:t})},chat:function(t){console.log(t);var n=t.users_im.user_id;e.navigateTo({url:"/pages/TUI-Chat/chat?conversationID=C2C".concat(n)})},cancelOrder:function(t){var n=this;e.showModal({title:"",content:n.i18n.postorder.cancelsuretip,success:function(e){e.confirm?n.cancelSure(t):e.cancel}})},cancelSure:function(t){console.log(t.id);var n={id:t.id},r=this;this.http.sendRequest("MerchantOrder.CancelOrder",n).then((function(t){0==t.code&&(r.requestData(),e.$emit("updateOrderCount"))}))},receiveOrder:function(t){var n={id:t.id},r=this;this.http.sendRequest("MerchantOrder.TakeOrders",n).then((function(t){0==t.code&&(r.reloadData(),e.$emit("updateOrderCount"))}))},refund:function(t){var n=this;e.showModal({title:"",content:n.i18n.postorder.refundsuretip,success:function(e){e.confirm?n.refundSure(t):e.cancel}})},refundSure:function(t){var n={id:t.id},r=this;this.http.sendRequest("MerchantOrder.RefundOrder",n).then((function(t){0==t.code&&(r.reloadData(),e.$emit("updateOrderCount"))}))},evaluate:function(e){},reloadData:function(){this.page=1,this.requestData()},cellItemClick:function(e,t){this.$emit("cellItemClick",e,t)},requestData:function(){var e=this;e.http.sendRequest("MerchantOrder.Index",{type:e.typeString,p:String(e.page)}).then((function(t){0==t.code&&(1==e.page?e.listArray=t.info[0]:e.listArray=e.listArray.concat(res.info[0]))}))},updateData:function(e){var t=this;t.page=1,t.http.sendRequest("MerchantOrder.Index",{type:String(e),p:String(t.page)}).then((function(e){0==e.code&&(1==t.page?t.listArray=e.info[0]:t.listArray=t.listArray.concat(res.info[0]))})),t.$forceUpdate()},scrolltolower:function(){console.log("滚动到底部");var e=this;e.page++,e.requestData()},refresherrefresh:function(){var e=this;e.page=1,e.refresherTriggered=!0,e.requestData(),console.log("自定义下拉刷新被触发"),setTimeout((function(){e.refresherTriggered=!1}),100)},closePayView:function(t){console.log(t);var n=this;if(n.showpay=0,0==t);else{var r="",o={orderid:n.selectedItem.id,openid:e.getStorageSync("openid"),payid:2==t.id?"3":t.id};console.log(n.addTipMoney),n.addTipMoney>0?(r="Orders.Fee",o.fee=n.addTipMoney):r="Orders.Repay",n.http.sendRequest(r,o).then((function(r){0==r.code&&(1==t.id?e.requestPayment({provider:"alipay",orderInfo:r.info[0].ali.orderinfo,success:function(t){e.showToast({title:"支付成功",duration:2e3}),console.log("success:"+JSON.stringify(t)),n.refresherrefresh()},fail:function(e){console.log("fail:"+JSON.stringify(e))}}):2==t.id?e.requestPayment({provider:"wxpay",timeStamp:r.info[0].small.timeStamp,nonceStr:r.info[0].small.nonceStr,package:r.info[0].small.package,signType:r.info[0].small.signType,paySign:r.info[0].small.sign,success:function(t){e.showToast({title:"支付成功",duration:2e3}),console.log(t),n.refresherrefresh()},fail:function(e){console.log(e)}}):(e.showToast({title:"支付成功",duration:2e3}),n.refresherrefresh()))}))}},dopayOrder:function(e){this.addTipMoney=0,console.log(2121211),this.selectedItem=e,this.showpay=1},doAgainOrder:function(t){e.switchTab({url:"../../pages/index/index"})},doJiaxiaofei:function(e){console.log(2121211),this.selectedItem=e,this.showTip=1},tipMoneyAdd:function(e){this.showTip=0,e>0&&(this.addTipMoney=e,this.showpay=1)}}};t.default=i}).call(this,n(1)["default"])},540:function(e,t,n){"use strict";n.r(t);var r=n(541),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t["default"]=o.a},541:function(e,t,n){}}]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/components/orderlist/orderListView.js.map
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/orderlist/orderListView-create-component',
    {
        'components/orderlist/orderListView-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('1')['createComponent'](__webpack_require__(535))
        })
    },
    [['components/orderlist/orderListView-create-component']]
]);
