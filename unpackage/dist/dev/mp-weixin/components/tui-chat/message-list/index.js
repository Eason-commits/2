(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/tui-chat/message-list/index"],{563:function(e,t,n){"use strict";n.r(t);var s=n(564),o=n(566);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(568);var a,r=n(25),c=Object(r["default"])(o["default"],s["render"],s["staticRenderFns"],!1,null,null,null,!1,s["components"],a);c.options.__file="components/tui-chat/message-list/index.vue",t["default"]=c.exports},564:function(e,t,n){"use strict";n.r(t);var s=n(565);n.d(t,"render",(function(){return s["render"]})),n.d(t,"staticRenderFns",(function(){return s["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return s["recyclableRender"]})),n.d(t,"components",(function(){return s["components"]}))},565:function(e,t,n){"use strict";var s;n.r(t),n.d(t,"render",(function(){return o})),n.d(t,"staticRenderFns",(function(){return a})),n.d(t,"recyclableRender",(function(){return i})),n.d(t,"components",(function(){return s}));var o=function(){var e=this,t=e.$createElement;e._self._c},i=!1,a=[];o._withStripped=!0},566:function(e,t,n){"use strict";n.r(t);var s=n(567),o=n.n(s);for(var i in s)"default"!==i&&function(e){n.d(t,e,(function(){return s[e]}))}(i);t["default"]=o.a},567:function(e,t,n){"use strict";(function(e){function s(e){return r(e)||a(e)||i(e)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"===typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function a(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function r(e){if(Array.isArray(e))return c(e)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=function(){Promise.all([n.e("common/vendor"),n.e("components/tui-chat/message-elements/text-message/index")]).then(function(){return resolve(n(676))}.bind(null,n)).catch(n.oe)},l=function(){Promise.all([n.e("common/vendor"),n.e("components/tui-chat/message-elements/image-message/index")]).then(function(){return resolve(n(685))}.bind(null,n)).catch(n.oe)},d=function(){n.e("components/tui-chat/message-elements/video-message/index").then(function(){return resolve(n(692))}.bind(null,n)).catch(n.oe)},f=function(){n.e("components/tui-chat/message-elements/audio-message/index").then(function(){return resolve(n(699))}.bind(null,n)).catch(n.oe)},m=function(){Promise.all([n.e("common/vendor"),n.e("components/tui-chat/message-elements/custom-message/index")]).then(function(){return resolve(n(706))}.bind(null,n)).catch(n.oe)},g=function(){Promise.all([n.e("common/vendor"),n.e("components/tui-chat/message-elements/tip-message/index")]).then(function(){return resolve(n(713))}.bind(null,n)).catch(n.oe)},h=function(){Promise.all([n.e("common/vendor"),n.e("components/tui-chat/message-elements/system-message/index")]).then(function(){return resolve(n(720))}.bind(null,n)).catch(n.oe)},v=function(){n.e("components/tui-chat/message-elements/face-message/index").then(function(){return resolve(n(727))}.bind(null,n)).catch(n.oe)},p=function(){n.e("components/tui-chat/message-elements/file-message/index").then(function(){return resolve(n(734))}.bind(null,n)).catch(n.oe)},I={computed:{i18n:function(){return this.$t("index")}},data:function(){return{avatar:"",userID:"",messageList:[],scrollView:"",scrollTop:0,triggered:!0,nextReqMessageID:"",isCompleted:!1}},components:{TUITextMessage:u,TUIImageMessage:l,TUIVideoMessage:d,TUIAudioMessage:f,TUICustomMessage:m,TUITipMessage:g,TUISystemMessage:h,TUIFaceMessage:v,TUIFileMessage:p},props:{conversation:{type:Object,default:function(){}}},watch:{conversation:{handler:function(e){var t=this;e.conversationID&&this.setData({conversation:e},(function(){t.getMessageList(e)}))},immediate:!0,deep:!0}},mounted:function(){var t=this;e.$TUIKit.getMyProfile().then((function(e){t.avatar=e.data.avatar,t.userID=e.data.userID})),e.$TUIKit.on(e.$TUIKitEvent.MESSAGE_RECEIVED,this.$onMessageReceived,this),e.$TUIKit.on(e.$TUIKitEvent.MESSAGE_READ_BY_PEER,this.$onMessageReadByPeer,this)},destroyed:function(){e.$TUIKit.off(e.$TUIKitEvent.MESSAGE_RECEIVED,this.$onMessageReceived)},methods:{refresh:function(){var e=this;this.isCompleted?this.setData({isCompleted:!0,triggered:!1}):(this.getMessageList(this.conversation),setTimeout((function(){e.setData({triggered:!1})}),2e3))},getMessageList:function(t){var n=this;this.isCompleted||e.$TUIKit.getMessageList({conversationID:t.conversationID,nextReqMessageID:this.nextReqMessageID,count:15}).then((function(e){var t=e.data.messageList;n.nextReqMessageID=e.data.nextReqMessageID,n.isCompleted=e.data.isCompleted,n.messageList=[].concat(s(t),s(n.messageList)),n.$handleMessageRender(n.messageList,t)}))},updateMessageList:function(e){this.messageList=[].concat(s(this.messageList),[e]),this.scrollToButtom()},$onMessageReadByPeer:function(){this.setData({messageList:this.messageList})},scrollToButtom:function(){var t=this,n=e.createSelectorQuery().in(this),s=n.select("#message-scroll");s.boundingClientRect((function(e){t.$nextTick((function(){t.scrollTop=e.height}))})).exec()},$onMessageReceived:function(e){var t=this,n=e,s=[];n.data.forEach((function(e){e.conversationID===t.conversation.conversationID&&s.push(Object.assign(e))})),this.messageList=this.messageList.concat(s),this.scrollToButtom()},$handleMessageRender:function(e){var t=this;e.length>0&&(this.setData({messageList:e},(function(){})),this.$nextTick((function(){t.scrollTop=9999})))},doFanyiItem:function(t){var n,s;console.log(t.payload.text),e.showLoading({title:" "});var o=e.getStorageSync("system_info"),i=o.language;-1!=i.indexOf("zh")?(n="th",s="zh-CN"):(n="zh-CN",s="th");var a=this;e.request({url:"https://translate.googleapis.com/translate_a/single?client=gtx&dt=t&sl="+n+"&tl="+s+"&q="+t.payload.text,success:function(n){e.hideLoading(),console.log(n.data[0][0][0]),t.fanyi=n.data[0][0][0],a.$forceUpdate()},fail:function(t){console.log(t),e.hideLoading()},complete:function(t){console.log(t.data[0][0]),e.hideLoading()}})}}};t.default=I}).call(this,n(1)["default"])},568:function(e,t,n){"use strict";n.r(t);var s=n(569),o=n.n(s);for(var i in s)"default"!==i&&function(e){n.d(t,e,(function(){return s[e]}))}(i);t["default"]=o.a},569:function(e,t,n){}}]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/components/tui-chat/message-list/index.js.map
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/tui-chat/message-list/index-create-component',
    {
        'components/tui-chat/message-list/index-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('1')['createComponent'](__webpack_require__(563))
        })
    },
    [['components/tui-chat/message-list/index-create-component']]
]);
