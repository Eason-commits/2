(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mine/mine"],{53:function(t,e,n){"use strict";(function(t){n(5),n(6);i(n(4));var e=i(n(54));function i(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=n,t(e.default)}).call(this,n(1)["createPage"])},54:function(t,e,n){"use strict";n.r(e);var i=n(55),o=n(57);for(var s in o)"default"!==s&&function(t){n.d(e,t,(function(){return o[t]}))}(s);n(59);var a,u=n(25),r=Object(u["default"])(o["default"],i["render"],i["staticRenderFns"],!1,null,null,null,!1,i["components"],a);r.options.__file="pages/mine/mine.vue",e["default"]=r.exports},55:function(t,e,n){"use strict";n.r(e);var i=n(56);n.d(e,"render",(function(){return i["render"]})),n.d(e,"staticRenderFns",(function(){return i["staticRenderFns"]})),n.d(e,"recyclableRender",(function(){return i["recyclableRender"]})),n.d(e,"components",(function(){return i["components"]}))},56:function(t,e,n){"use strict";var i;n.r(e),n.d(e,"render",(function(){return o})),n.d(e,"staticRenderFns",(function(){return a})),n.d(e,"recyclableRender",(function(){return s})),n.d(e,"components",(function(){return i}));var o=function(){var t=this,e=t.$createElement;t._self._c},s=!1,a=[];o._withStripped=!0},57:function(t,e,n){"use strict";n.r(e);var i=n(58),o=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e["default"]=o.a},58:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={computed:{i18n:function(){return this.$t("index")}},data:function(){return{userInfo:{},shopInfo:{},shopstatus:"",marginTopHeight:0,windowHeight:0,refresherTriggered:!1,islogin:!1,openVoice:!1,statusList:[],statusType:0,shopid:"",autoPrint:0,receive:0,thumb:"",phone:"",shopname:"",address:"",type_name:"",type_id:"",shopID:"",lng:"",lat:"",autoPrint_yilian:0}},onShareTimeline:function(t){},onShareAppMessage:function(t){},onShow:function(){var e=this,n=t.getStorageSync("userinfo");console.log(n),getApp().globalData.userinfo=n,this.thumb="../../static/mine/icon_avatar_placeholder.png",n.uid>0?(this.islogin=!0,this.shopID=n.store_id,setTimeout((function(){e.getData()}),10)):this.islogin=!1},onLoad:function(){var e=t.getSystemInfoSync();this.marginTopHeight=getApp().globalData.menuButtonHeight+getApp().globalData.statusBarHeight,this.topHeight=this.marginTopHeight+210,this.windowHeight=e.windowHeight,this.statusList=[this.i18n.mine.shopclose,this.i18n.mine.shopopen],this.shopstatus=this.statusList[0]},methods:{login:function(){t.navigateTo({url:"../login/login"})},changeShopStatus:function(){if(this.islogin){var e=this;t.showActionSheet({title:this.i18n.mine.changeshopstatus,itemList:e.statusList,success:function(t){console.log(t.tapIndex),e.shopstatus=e.statusList[t.tapIndex],e.statusType=t.tapIndex,e.updateStatus()},fail:function(){},complete:function(){}})}else this.login()},updateStatus:function(){var t=this,e={operating_state:this.statusType};this.http.sendRequest("Users.Update",e).then((function(e){0==e.code&&(t.shopstatus=t.statusList[t.statusType],t.statusType=this.statusType)}))},logout:function(){this.islogin=!1,t.clearStorageSync(),this.http.sendRequest("Users.LogOut",{}).then((function(t){}));var e=t.$TUIKit.logout();e.then((function(t){console.log(t.data),console.log("登出成功")})).catch((function(t){console.warn("logout error:",t)}))},gotoProfile:function(){if(this.islogin){var e=JSON.stringify(this.shopInfo);t.navigateTo({url:"../../package-mine/pages/editProfile/editProfile?info="+e})}else this.login()},gotoPrintset:function(){this.islogin?t.navigateTo({url:"../../package-mine/pages/print/cloundprint?type=1"}):this.login()},voiceSet:function(t){if(this.islogin){var e=this,n={tohes:String(t)};this.http.sendRequest("Users.Update",n).then((function(n){0==n.code&&(e.openVoice=0!=t,e.getData())}))}else this.login()},changeAutoReceive:function(){if(this.islogin){this.receive=!this.receive;var t="";t=this.receive?"1":"0";var e={automatic_order:t},n=this;this.http.sendRequest("Users.Update",e).then((function(t){0==t.code?n.getData():this.receive=!this.receive}))}else this.login()},changeYilianyunAutoPrint:function(){if(this.islogin){this.autoPrint_yilian=!this.autoPrint_yilian;var t="";t=this.autoPrint_yilian?"1":"0",console.log(t);var e={auto_print:t},n=this;this.http.sendRequest("Users.Update",e).then((function(t){0==t.code?n.getData():n.autoPrint_yilian=!this.autoPrint_yilian}))}else this.login()},changeAutoPrint:function(){if(this.islogin){this.autoPrint=!this.autoPrint;var t="";t=this.autoPrint?"1":"0",console.log(t);var e={sm_auto_print:t},n=this;this.http.sendRequest("Users.Update",e).then((function(t){0==t.code?n.getData():n.autoPrint=!this.autoPrint}))}else this.login()},gotolist:function(e){if(this.islogin){if(1==e){var n=getApp().globalData.weburl+"appapi/page/detail?id="+e;t.setStorage({key:"weburl",data:n,success:function(){t.navigateTo({url:"../webView/webView"})}})}if(2==e){n=getApp().globalData.weburl+"appapi/page/detail?id=4";t.setStorage({key:"weburl",data:n,success:function(){t.navigateTo({url:"../webView/webView"})}})}if(3==e){n=getApp().globalData.weburl+"appapi/page/detail?id=5";t.setStorage({key:"weburl",data:n,success:function(){t.navigateTo({url:"../webView/webView"})}})}}else this.login()},getData:function(){var e=this;e.http.sendRequest("Users.Home").then((function(n){console.log(n),700==n.code?(e.islogin=!1,t.setStorage({key:"shopinfo",data:"",success:function(){}}),t.setStorage({key:"userinfo",data:"",success:function(){}})):(e.islogin=!0,e.shopInfo=n.info[0],e.autoPrint=parseInt(n.info[0].sm_auto_print),e.autoPrint_yilian=parseInt(n.info[0].auto_print),e.receive=parseInt(n.info[0].automatic_order),1==n.info[0].operating_state?e.shopstatus=e.statusList[1]:e.shopstatus=e.statusList[0],e.openVoice=parseInt(n.info[0].tohes),e.shopname=n.info[0].name,e.address=n.info[0].address,e.type_name=n.info[0].type_name,e.type_id=n.info[0].type_id,e.phone=n.info[0].phone,e.thumb=n.info[0].thumb,e.lng=n.info[0].lng,e.lat=n.info[0].lat,t.setStorage({key:"shopinfo",data:e.shopInfo,success:function(){console.log("店铺信息存储成功")}}))}))}}};e.default=n}).call(this,n(1)["default"])},59:function(t,e,n){"use strict";n.r(e);var i=n(60),o=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e["default"]=o.a},60:function(t,e,n){}},[[53,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/mine/mine.js.map