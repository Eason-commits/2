(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["package-shopManager/pages/classifyManager/addClassify"],{335:function(t,e,i){"use strict";(function(t){i(5),i(6);n(i(4));var e=n(i(336));function n(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=i,t(e.default)}).call(this,i(1)["createPage"])},336:function(t,e,i){"use strict";i.r(e);var n=i(337),s=i(339);for(var a in s)"default"!==a&&function(t){i.d(e,t,(function(){return s[t]}))}(a);i(341);var h,r=i(25),u=Object(r["default"])(s["default"],n["render"],n["staticRenderFns"],!1,null,null,null,!1,n["components"],h);u.options.__file="package-shopManager/pages/classifyManager/addClassify.vue",e["default"]=u.exports},337:function(t,e,i){"use strict";i.r(e);var n=i(338);i.d(e,"render",(function(){return n["render"]})),i.d(e,"staticRenderFns",(function(){return n["staticRenderFns"]})),i.d(e,"recyclableRender",(function(){return n["recyclableRender"]})),i.d(e,"components",(function(){return n["components"]}))},338:function(t,e,i){"use strict";var n;i.r(e),i.d(e,"render",(function(){return s})),i.d(e,"staticRenderFns",(function(){return h})),i.d(e,"recyclableRender",(function(){return a})),i.d(e,"components",(function(){return n}));var s=function(){var t=this,e=t.$createElement;t._self._c},a=!1,h=[];s._withStripped=!0},339:function(t,e,i){"use strict";i.r(e);var n=i(340),s=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=s.a},340:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(){i.e("components/wybar/wyBar").then(function(){return resolve(i(542))}.bind(null,i)).catch(i.oe)},s={components:{wybar:n},computed:{i18n:function(){return this.$t("index")}},data:function(){return{title:"",currentID:"",subTitle:"",isAdd:!0,isChinese:!0,title_zh:"",title_th:"",parentID:0,classID:"",parentName:"",isShowList:!1,list:[],thumb:"",firstPlatformID:"",saveBtnClick:!1}},onLoad:function(e){var i=t.getStorageSync("shopinfo");if(this.firstPlatformID=i.top_type_id,e.param){var n=JSON.parse(e.param);this.title=n.use_name,this.parentID=n.pid,this.classID=n.id,console.log(n),this.parentID>0?(this.isAdd=!1,this.parentName=e.parentName,this.title=this.parentName,this.subTitle=n.use_name,this.title_th=n.th_name,this.title_zh=n.name):3==this.firstPlatformID?(this.title=this.i18n.shop.yiji,this.isAdd=!1,this.subTitle=n.use_name,this.title_th=n.th_name,this.title_zh=n.name):(this.parentID=n.id,this.isAdd=!0)}else this.title=this.i18n.shop.yiji,this.isAdd=!0,this.getData()},methods:{back:function(){t.navigateBack()},getData:function(){var t=this,e={level:"1",is_tree:"0",id:"0"};t.http.sendRequest("MerchantStoreType.Index",e).then((function(e){t.list=e.info[0];var i={id:"0",use_name:t.i18n.shop.yiji};t.list.unshift(i)}))},save:function(){if(!this.saveBtnClick){if(0==this.title_zh.length)return t.showLoading({title:this.i18n.shop.chinesetip}),void setTimeout((function(){t.hideLoading()}),1e3);if(0==this.title_th.length)return t.showLoading({title:this.i18n.shop.thtip}),void setTimeout((function(){t.hideLoading()}),1e3);this.saveBtnClick=!0,this.thumb.length>0?this.uploadImg():this.submit()}},uploadImg:function(){var e=this,i=t.getStorageSync("userinfo"),n={};i&&(n.uid=i.uid,n.token=i.token),console.log(e.thumb),t.uploadFile({url:getApp().globalData.weburl+"api/?s=Merchant.Upload.Upload",filePath:e.thumb,name:"file",formData:n,success:function(i){t.hideLoading();var n=JSON.parse(i.data),s=n.data.info[0].url_all;e.thumb=s,e.submit()},fail:function(i){t.hideLoading(),e.saveBtnClick=!1}})},submit:function(){var e=this.isAdd?"MerchantStoreType.Save":"MerchantStoreType.Update",i={};i=this.isAdd?{pid:this.parentID,name:this.title_zh,th_name:this.title_th,thumb:this.thumb}:{id:this.classID,name:this.title_zh,th_name:this.title_th,thumb:this.thumb};var n=this;this.http.sendRequest(e,i).then((function(e){0==e.code?t.navigateBack():n.saveBtnClick=!1}))},inputname:function(t){this.subTitle=t.detail.value,this.isChinese?this.title_zh=this.subTitle:this.title_th=this.subTitle},changeChinese:function(){this.isChinese=!0,this.title_zh.length>0?this.subTitle=this.title_zh:this.subTitle=""},changeTh:function(){this.isChinese=!1,this.title_th.length>0?this.subTitle=this.title_th:this.subTitle=""},showList:function(){this.isShowList=!0},clickFirstClass:function(t){this.title=t.use_name,this.parentID=t.id,this.isShowList=!1},deleteImage:function(t){this.thumb=""},doAddImage:function(){var e=this;t.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(t){var i=t.tempFilePaths;e.thumb=i[0]}})}}};e.default=s}).call(this,i(1)["default"])},341:function(t,e,i){"use strict";i.r(e);var n=i(342),s=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=s.a},342:function(t,e,i){}},[[335,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/package-shopManager/pages/classifyManager/addClassify.js.map