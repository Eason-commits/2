(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["package-shopManager/pages/goodsManager/addGoods"],{311:function(t,e,i){"use strict";(function(t){i(5),i(6);s(i(4));var e=s(i(312));function s(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=i,t(e.default)}).call(this,i(1)["createPage"])},312:function(t,e,i){"use strict";i.r(e);var s=i(313),n=i(315);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i(317);var r,a=i(25),c=Object(a["default"])(n["default"],s["render"],s["staticRenderFns"],!1,null,null,null,!1,s["components"],r);c.options.__file="package-shopManager/pages/goodsManager/addGoods.vue",e["default"]=c.exports},313:function(t,e,i){"use strict";i.r(e);var s=i(314);i.d(e,"render",(function(){return s["render"]})),i.d(e,"staticRenderFns",(function(){return s["staticRenderFns"]})),i.d(e,"recyclableRender",(function(){return s["recyclableRender"]})),i.d(e,"components",(function(){return s["components"]}))},314:function(t,e,i){"use strict";var s;i.r(e),i.d(e,"render",(function(){return n})),i.d(e,"staticRenderFns",(function(){return r})),i.d(e,"recyclableRender",(function(){return o})),i.d(e,"components",(function(){return s}));try{s={uniDataCheckbox:function(){return i.e("uni_modules/uni-data-checkbox/components/uni-data-checkbox/uni-data-checkbox").then(i.bind(null,635))}}}catch(a){if(-1===a.message.indexOf("Cannot find module")||-1===a.message.indexOf(".vue"))throw a;console.error(a.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var n=function(){var t=this,e=t.$createElement;t._self._c},o=!1,r=[];n._withStripped=!0},315:function(t,e,i){"use strict";i.r(e);var s=i(316),n=i.n(s);for(var o in s)"default"!==o&&function(t){i.d(e,t,(function(){return s[t]}))}(o);e["default"]=n.a},316:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=function(){i.e("components/wybar/wyBar").then(function(){return resolve(i(542))}.bind(null,i)).catch(i.oe)},n={components:{wybar:s},computed:{i18n:function(){return this.$t("index")}},onReady:function(){var e=t.getSystemInfoSync();this.navHeight=64+e.statusBarHeight,this.scrollHeight=e.windowHeight-this.navHeight},data:function(){return{scrollHeight:0,navHeight:0,picsArr:[],priceTxt:"",name_zh:"",name_th:"",goodsfenlei:"",guigeArr:[],isedit:!1,rightTitle:"",desc:"",isChinese:!0,isRecommend:!1,isUpdateKucun:!1,maxkucun:"",nowkucun:"",showPlatformFenlei:!1,showFenlei1:!1,showSecondFenlei:!1,firstClassArr:[],secondClassArr:[],firstPlatformClass:"",secondPlatformClass:"",firstPlatformID:"",shopfenlei:"",isShowShopFenlei:!1,isShowShopClass1:!1,isShowShopClass2:!1,shopclassArr1:[],shopclassArr2:[],shopclassTxt1:"",shopclassTxt2:"",shopTypeID:"",classScrollHeight:200,nowkucunSelectedIndex:-1,productID:0,newPicsArr:[],showKucun:!1,showSpec:!0,secondPlatformID:"",saveBtnClick:!1,youwuguige:[{text:"无规格",value:0},{text:"有规格",value:1}],guigeindex:0}},onShow:function(){var t=this,e={level:"1",is_tree:"0",id:"0"};t.http.sendRequest("MerchantStoreType.Index",e).then((function(e){t.shopclassArr1=e.info[0]}))},onLoad:function(e){var i=this,s=this,n=t.getStorageSync("shopAddress");if(console.log(n),n&&n.address){e.productID&&e.productID>0?(s.rightTitle=s.i18n.mine.save,s.productID=e.productID,s.getGoodsDetail()):s.rightTitle=s.i18n.shop.publish;var o=t.getStorageSync("shopinfo");this.firstPlatformID=o.top_type_id,this.secondPlatformID=o.type_id,this.goodsfenlei=o.type_name,5==this.firstPlatformID||6==this.firstPlatformID||7==this.firstPlatformID?(this.showKucun=!0,this.showSpec=!1):8==this.firstPlatformID?(this.showKucun=!1,this.showSpec=!1):(this.showKucun=!1,this.showSpec=!0);var r={level:"2",is_tree:"1",id:this.firstPlatformID};s.http.sendRequest("Users.GetMerchantTypeList",r).then((function(t){s.secondClassArr=t.info[0]})),t.$on("goodsPics",(function(t){i.dealwithPicsArr(t)}));s=this;t.$on("addSpecDone",(function(t){console.log(t),t.length>0&&(i.guigeArr=t,i.isedit=!0)}))}else{var s=this;t.showModal({title:"",content:s.i18n.postorder.noaddresstip,success:function(e){e.confirm?t.navigateTo({url:"../../mine/editProfile/editProfile"}):e.cancel&&t.navigateBack()}})}},onUnload:function(){t.$off("goodsPics"),t.$off("addSpecDone")},methods:{nothing:function(){},getGoodsDetail:function(){var t=this,e={id:t.productID};t.http.sendRequest("MerchantStoreProduct.Read",e).then((function(e){if(0==e.code){var i=e.info[0];console.log(i),t.dealwithPicsArr(i.image),t.name_zh=i.name,t.name_th=i.th_name,t.priceTxt=i.price,t.firstPlatformID=i.type_id,t.shopTypeID=i.store_type_id,t.isRecommend=1==i.recommend,t.nowkucun=i.repertory,t.maxkucun=i.max_repertory,t.isUpdateKucun=i.day_repertory,t.desc=i.des,t.guigeArr=i.attr,t.guigeArr.length>0&&1==t.firstPlatformID&&(t.guigeindex=1),t.goodsfenlei=i.top_type_name,t.shopfenlei=i.top_store_type_name}}))},dealwithPicsArr:function(t){this.picsArr=t,t.length>3?(this.newPicsArr=t.slice(0,3),console.log(this.newPicsArr)):this.newPicsArr=t},showShopClass1:function(){this.isShowShopClass1=!0,this.isShowShopClass2=!1},showShopClass2:function(){this.isShowShopClass2=!0,this.isShowShopClass1=!1},shopClassItemClick1:function(e){var i=this;if(this.isShowShopClass1=!1,this.shopclassTxt1=e.name,3==this.firstPlatformID)this.shopTypeID=e.id,this.isShowShopFenlei=!1,this.shopfenlei=this.shopclassTxt1;else{var s=this,n={level:"2",is_tree:"1",id:e.id};s.http.sendRequest("MerchantStoreType.Index",n).then((function(e){s.shopclassArr2=e.info[0],0==s.shopclassArr2.length&&t.showModal({title:"",content:i.i18n.shop.addshopclasstip,success:function(e){e.confirm?t.navigateTo({url:"../classifyManager/addClassify"}):e.cancel}})}))}},shopClassItemClick2:function(t){this.isShowShopClass2=!1,this.shopclassTxt2=t.use_name,this.isShowShopFenlei=!1,this.shopTypeID=t.id,this.shopfenlei=this.shopclassTxt2},dohidefenlei:function(){this.isShowShopFenlei=!1},firstClassItemClick:function(t){},secondClassItemClick:function(t){this.showSecondFenlei=!1,this.showPlatformFenlei=!1,this.secondPlatformClass=t.name,this.secondPlatformID=t.id,this.goodsfenlei=this.firstPlatformClass+"-"+this.secondPlatformClass},showFirstClass:function(){},showSecondClass:function(){this.showSecondFenlei=!0},inputNowkucun:function(t){this.nowkucun=t.detail.value},guqing:function(){this.nowkucun="0",this.nowkucunSelectedIndex=0},zhiman:function(){if(this.nowkucunSelectedIndex=1,!(this.maxkucun.length>0))return t.showLoading({title:this.i18n.shop.maxkucuntip}),void setTimeout((function(){t.hideLoading()}),2e3);this.nowkucun=this.maxkucun},maxKucun:function(t){this.maxkucun=t.detail.value},kucunupdate:function(){this.isUpdateKucun=!this.isUpdateKucun},tuijian:function(){this.isRecommend=!this.isRecommend},back:function(){t.navigateBack()},save:function(){if(!this.saveBtnClick){var e={};if(5==this.firstPlatformID||6==this.firstPlatformID||7==this.firstPlatformID){var i="0";if(this.isRecommend&&(i="1"),0==this.name_zh.length||0==this.name_th.length||0==this.priceTxt.length||0==this.nowkucun.length||0==this.maxkucun.length||0==this.picsArr.length)return t.showLoading({title:this.i18n.shop.addtip}),void setTimeout((function(){t.hideLoading()}),1e3);e={image:JSON.stringify(this.picsArr),name:this.name_zh,th_name:this.name_th,price:this.priceTxt,des:this.desc,type_id:this.firstPlatformID,store_type_id:this.shopTypeID,recommend:i,repertory:this.nowkucun,max_repertory:this.maxkucun,day_repertory:this.isUpdateKucun}}else{i="0";if(this.isRecommend&&(i="1"),!this.name_zh||!this.name_th)return t.showLoading({title:this.i18n.shop.nametip}),void setTimeout((function(){t.hideLoading()}),1e3);if(0==this.picsArr.length)return t.showLoading({title:this.i18n.shop.pictip}),void setTimeout((function(){t.hideLoading()}),1e3);if(8==this.firstPlatformID)e={image:JSON.stringify(this.picsArr),name:this.name_zh,th_name:this.name_th,price:this.priceTxt,des:this.desc,type_id:this.firstPlatformID,store_type_id:this.shopTypeID,recommend:i};else{if(0==this.guigeArr.length&&1==this.guigeindex)return t.showLoading({title:this.i18n.shop.guigetip}),void setTimeout((function(){t.hideLoading()}),1e3);e={image:JSON.stringify(this.picsArr),name:this.name_zh,th_name:this.name_th,price:this.priceTxt,des:this.desc,type_id:this.firstPlatformID,store_type_id:this.shopTypeID,recommend:i,attr:JSON.stringify(this.guigeArr)}}}var s="MerchantStoreProduct.Save";this.productID>0&&(e.id=this.productID,s="MerchantStoreProduct.Update"),this.saveBtnClick=!0,console.log(e,s),this.http.sendRequest(s,e).then((function(e){console.log(e),0==e.code?t.navigateBack():that.saveBtnClick=!1}))}},addPic:function(){t.navigateTo({url:"addGoodsPics?picArr="+JSON.stringify(this.picsArr)})},inputprice:function(t){this.priceTxt=t.detail.value},changeChinese:function(){this.isChinese=!0},changeTh:function(){this.isChinese=!1},inputgoodsName:function(t){this.isChinese?this.name_zh=t.detail.value:this.name_th=t.detail.value},inputgoodsDesc:function(t){this.desc=t.detail.value},addGoodsFenlei:function(){this.showPlatformFenlei=!0},addShopFenlei:function(){0==this.shopclassArr1.length?t.showModal({title:"",content:this.i18n.shop.addshopclasstip,success:function(e){e.confirm?t.navigateTo({url:"../classifyManager/addClassify"}):e.cancel}}):this.isShowShopFenlei=!0},guige:function(e){console.log(this.firstPlatformID),3==this.firstPlatformID?t.navigateTo({url:"../specManager/specServiceManager?productID="+this.productID+"&guige="+JSON.stringify(this.guigeArr)}):1==this.firstPlatformID?t.navigateTo({url:"../specManager/sepcMSManger?productID="+this.productID+"&guige="+JSON.stringify(this.guigeArr)}):t.navigateTo({url:"../specManager/specManager?productID="+this.productID+"&guige="+JSON.stringify(this.guigeArr)})},deleteGoods:function(){var e=this;t.showModal({title:"",content:e.i18n.shop.deletetip,success:function(t){t.confirm?e.delete():t.cancel}})},delete:function(){var t=this,e={is_del:"1",id:this.productID};this.http.sendRequest("MerchantStoreProduct.Status",e).then((function(e){0==e.code&&t.back()}))}}};e.default=n}).call(this,i(1)["default"])},317:function(t,e,i){"use strict";i.r(e);var s=i(318),n=i.n(s);for(var o in s)"default"!==o&&function(t){i.d(e,t,(function(){return s[t]}))}(o);e["default"]=n.a},318:function(t,e,i){}},[[311,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/package-shopManager/pages/goodsManager/addGoods.js.map