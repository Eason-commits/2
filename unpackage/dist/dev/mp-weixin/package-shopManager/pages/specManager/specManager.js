(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["package-shopManager/pages/specManager/specManager"],{343:function(t,e,n){"use strict";(function(t){n(5),n(6);a(n(4));var e=a(n(344));function a(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=n,t(e.default)}).call(this,n(1)["createPage"])},344:function(t,e,n){"use strict";n.r(e);var a=n(345),r=n(347);for(var i in r)"default"!==i&&function(t){n.d(e,t,(function(){return r[t]}))}(i);n(349);var c,o=n(25),d=Object(o["default"])(r["default"],a["render"],a["staticRenderFns"],!1,null,null,null,!1,a["components"],c);d.options.__file="package-shopManager/pages/specManager/specManager.vue",e["default"]=d.exports},345:function(t,e,n){"use strict";n.r(e);var a=n(346);n.d(e,"render",(function(){return a["render"]})),n.d(e,"staticRenderFns",(function(){return a["staticRenderFns"]})),n.d(e,"recyclableRender",(function(){return a["recyclableRender"]})),n.d(e,"components",(function(){return a["components"]}))},346:function(t,e,n){"use strict";var a;n.r(e),n.d(e,"render",(function(){return r})),n.d(e,"staticRenderFns",(function(){return c})),n.d(e,"recyclableRender",(function(){return i})),n.d(e,"components",(function(){return a}));var r=function(){var t=this,e=t.$createElement;t._self._c},i=!1,c=[];r._withStripped=!0},347:function(t,e,n){"use strict";n.r(e);var a=n(348),r=n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,(function(){return a[t]}))}(i);e["default"]=r.a},348:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=function(){n.e("components/wybar/wyBar").then(function(){return resolve(n(542))}.bind(null,n)).catch(n.oe)},r={components:{wybar:a},computed:{i18n:function(){return this.$t("index")}},data:function(){return{spec:"",price:"",scrollHeight:0,data:[],isChinese:!0,isAdd:!0,productID:"",newSpecArr:[]}},onLoad:function(e){var n=t.getSystemInfoSync();if(this.navHeight=64+n.statusBarHeight,this.scrollHeight=n.windowHeight-this.navHeight-44,e.productID>0)this.isAdd=!1,this.productID=e.productID,this.getSpecDetail();else{this.isAdd=!0;var a=JSON.parse(e.guige);console.log(this.guigeArr),a.length>0?this.data=a:this.data=[{price:"",th_attr_name:"",attr_name:"",children:[]}]}},methods:{back:function(){t.navigateBack()},getSpecDetail:function(){var t=this,e={product_id:t.productID};this.http.sendRequest("MerchantStoreProductAttr.Read",e).then((function(e){if(0==e.code){console.log(e.info[0]);var n=e.info[0];if(0==n.length)console.log(121),t.data=[{price:"",th_attr_name:"",attr_name:"",children:[]}];else{console.log(1222);for(var a=0;a<n.length;a++){var r=n[a],i={id:r.id,price:r.price,th_attr_name:r.th_attr_name,attr_name:r.attr_name,children:[]};t.data.push(i)}}console.log(t.data)}}))},save:function(){console.log(this.data);for(var e=this,n={},a=[],r=[],i=0;i<e.data.length;i++){var c=e.data[i];c.id>0?r.push(c):a.push(c)}e.productID>0?r.length>0?(n={product_id:this.productID,attr:JSON.stringify(r)},this.http.sendRequest("MerchantStoreProductAttr.Update",n).then((function(n){0==n.code&&(t.$emit("addSpecDone",e.data),console.log(222),e.uploadNewData(a))}))):e.uploadNewData(a):(t.$emit("addSpecDone",e.data),e.back())},uploadNewData:function(e){var n=this;if(e.length>0){var a={product_id:this.productID,attr:JSON.stringify(e)};this.http.sendRequest("MerchantStoreProductAttr.Save",a).then((function(e){0==e.code&&(t.$emit("addSpecDone",n.data),n.back())}))}else console.log(111),t.$emit("addSpecDone",n.data),this.back()},inputPrice:function(t){var e=this.data[t.target.id];t.detail.value.length>0?e.price=t.detail.value:e.price="0"},inputSpec:function(t){var e=this.data[t.target.id];this.isChinese?e.attr_name=t.detail.value:e.th_attr_name=t.detail.value},addSpec:function(){this.data.push({price:"",th_attr_name:"",attr_name:"",children:[]})},deleteSpec:function(e){var n=this;t.showModal({title:"",content:n.i18n.shop.deletetip,success:function(t){t.confirm?n.delete(e):t.cancel}})},delete:function(t){console.log(t,this.productID);var e=this;if(this.productID>0){var n=e.data[t];console.log(n);var a={product_attr_id:n.id};e=this;this.http.sendRequest("MerchantStoreProductAttr.Delete",a).then((function(n){0==n.code&&(e.data.splice(t,1),0==e.data.length&&(e.data=[{price:"",th_attr_name:"",attr_name:"",children:[]}]))}))}else this.data.splice(t,1),0==this.data.length&&(this.data=[{price:"",th_attr_name:"",attr_name:"",children:[]}])},changeChinese:function(){this.isChinese=!0},changeTh:function(){this.isChinese=!1}}};e.default=r}).call(this,n(1)["default"])},349:function(t,e,n){"use strict";n.r(e);var a=n(350),r=n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,(function(){return a[t]}))}(i);e["default"]=r.a},350:function(t,e,n){}},[[343,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/package-shopManager/pages/specManager/specManager.js.map