{"version":3,"sources":["uni-app:///main.js","webpack:///D:/wanyue/waimai-uni/wanyue-take-rider/pages/index/index.vue?007f","webpack:///D:/wanyue/waimai-uni/wanyue-take-rider/pages/index/index.vue?2996","webpack:///D:/wanyue/waimai-uni/wanyue-take-rider/pages/index/index.vue?663d","webpack:///D:/wanyue/waimai-uni/wanyue-take-rider/pages/index/index.vue?c82b","uni-app:///pages/index/index.vue","webpack:///D:/wanyue/waimai-uni/wanyue-take-rider/pages/index/index.vue?1cbd","webpack:///D:/wanyue/waimai-uni/wanyue-take-rider/pages/index/index.vue?9d75"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","key","components","cancleorder","cell","navbar","unidrawer","phoneset","Graborders","phoneinput","relaxview","relaxokview","computed","i18n","data","showcancleorder","p1","p2","p3","taskArray","pickupArray","completedArray","mobile","userInfo","showrelaxok","showrelax","showphoneCode","grab","showset","userlist","img","name","mymenu","drawtop","drawheight","list","scrollH","safeAreaBottom","selectedIndex","pagebars","selectedID","locationtimer","sckChatServer","onHide","console","onReady","onShow","onLoad","uni","that","success","methods","getclientID","uploadCid","uploadimprofile","ordercanclesure","fomatFloat","s","CalculateDistance","l","t","parseFloat","mydistance","allDistance","countDist","sg","sl","sf","c","w","r","d","h1","h2","getRidingRoute","myAmapFun","origin","destination","resolve","fail","getlocation","type","lng","lat","requestLocPermission","wyGaoDeModule","requestLocBackgroudPermission","startlocation","enableBackground","interval","stopLocation","GetConfig","reload","title","mask","OrdersGetList","i","p","GetBaseInfo","getUserLocation","connect","icon","tonum","phoneNumber","cancleinput","finishcode","oid","code","serviceCompleted","RefuseOrders","hidegrab","GrabOrder","setTimeout","StartService","url","finishedThumb","thumbs","gotomapdetail","gomymenus","gouser","ditu","relaxcancle","UpRest","isrest","rest","relaxsure","changestatus","colseset","set","showdriver","closeDrawer","changepageindex","change","animationfinish","login","socektMethod","socketTask","action","uid","token","onSendJoinSocket","onPlayAudio","audio"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACa;;;AAGjE;AACkN;AAClN,gBAAgB,0NAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AClCA;AAAA;AAAA;AAAA;AAAg0B,CAAgB,g1BAAG,EAAC,C;;;;;;;;;;;;;;;;;;;AC+Gp1B;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAKA;AACA;EACAC;AACA;AAAA,eACA;EACAC;IACAC;IAAA;IACAC;IAAA;IACAC;IAAA;IACAC;IAAA;IACAC;IAAA;IACAC;IAAA;IACAC;IAAA;IACAC;IAAA;IACAC;EACA;;EACAC;IACAC;MACA;IACA;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC,WACA;QACAC;QACAC;MACA;QACAD;QACAC;MACA;QACAD;QACAC;MACA;QACAD;QACAC;MACA;MAAA;MACAC;MAAA;MACAC;MACAC;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;EACA;EACAC;IACA;MACAf;MACAC;IACA;MACAD;MACAC;IACA;MACAD;MACAC;IACA;MACAD;MACAC;IACA;IACA;IACA;EACA;EACAe;IACA;IACA;IAEA;IAOA;IACA;EACA;EACAC;IACAH;IACAI;MACA;MACA;QACAC;QACAA;MACA;IACA;IACA;IAUA;IACA;IACA;IACA;IAEA;MACAD;QACA/C;QACAiD;UACAD;QACA;MACA;IACA;EASA;EACA;EACA;EACA;EACA;;EAGA;EACA;EACA;EACA;EACAE;IACAC,qCAEA;IACAC;;MAEA;MACA;MACA;MACA;IAAA,CACA;IACAC;MACA;IAEA;IACAC;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;QACAC;MACA;MACA;QACAA;MACA;MACA;IACA;IACAC;MACA;MACA;QACA;QACA;QACA;QACA;UACAC;UACAC;QACA;QACA;UACAD;UACAC;QACA;QAEA,mGACAC;;QAEA;QACA;QACA;UACAC;QACA;UACAA;QACA;QACAb;QACA;QACA;UACAc;UACA;YACAA;UACA;YACAA;UACA;QACA;QACAd;QACA;UACAA;QACA;QAEAD;UACA/C;UACAa;QACA;QACA;MACA;;MACA;QACA;QACA;QACA;QACA;UACA6C;UACAC;QACA;QACA;UACAD;UACAC;QACA;QACA,mGACAC;QACA;;QAEA;QACA;UACAC;QACA;UACAA;QACA;QACAb;QAEA;QAEA;UACAc;QACA;UACAA;QACA;QACAd;QACA;UACAA;QACA;QAEAD;UACA/C;UACAa;QACA;QACA;MACA;;MACA;QACA;QACA;QACA;QACA;UACA6C;UACAC;QACA;QACA;UACAD;UACAC;QACA;QACA,mGACAC;;QAEA;QACA;QACA;UACAC;QACA;UACAA;QACA;QACAb;QACA;QACA;UACAc;QACA;UACAA;QACA;QACAd;QACA;UACAA;QACA;QACAD;UACA/C;UACAa;QACA;QACA;MACA;IACA;IACAkD;MAAA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACAC;MACAC;MACAC;MACAV;MACAW;MACAC;MACAC;MACAC;MACAC;MACAC;MACA;MACA;IACA;IACAC;MACA;QACAC;UACAC;UACAC;UACA3B;YACA4B;UACA;UACAC;QACA;MACA;MACA;IACA;IACAC;MACApC;MACA;MACAI;QACAiC;QACA/B;UACAN;UACAK;UACAD;YACA/C;YACAa;UACA;UACAmC;UACAA;YACAiC;YACAC;UACA;UACAlC;QACA;QACA8B;UACAnC;UACAK;QACA;MACA;IACA;IACAmC;MACA;MACAC;QACA;MAAA,CAEA;IACA;IACAC;MACA;MACA;QACAD;UACA;QAAA,CACA;MACA;IACA;IACAE;MACA3C;MACA;MACAyC;QACAG;QACAC;MACA;QACA;QACA;UACAzC;YACA/C;YACAa;UACA;UACAmC;YACAiC;YACAC;UACA;QACA;MACA;IACA;IACAO;MACAL;IACA;IACAM;MACA/C;MACA;MACA;QACA;QACA;QACA;UACA;UACAK;UACAA;QACA;QACAD;UACA/C;UACAa;QACA;MACA;IACA;IACA8E;MACA5C;QACA6C;QACAC;MACA;MACA;IACA;IACAC;MAAA;MACA;MAAA,2BACAC;QACA;UACAf;UACAgB;QACA;UACA;UACA;YACAjD;cACA/C;cACAiD;gBACA;kBACA;oBACA;sBACApC;sBACAA;oBACA;kBACA;gBACA;gBACAmC;gBACA;kBACAA;gBACA;cACA;cACA8B;gBACA9B;gBACA;kBACAA;gBACA;cACA;YACA;UACA;YACAD;cACA/C;cACAiD;gBACA;kBACA;oBACA;sBACApC;sBACAA;oBACA;kBACA;gBACA;gBACAmC;gBACA;kBACAA;gBACA;cACA;cACA8B;gBACA9B;gBACA;kBACAA;gBACA;cACA;YACA;UACA;YACAD;cACA/C;cACAiD;gBACA;kBACA;oBACA;sBACApC;sBACAA;oBACA;kBACA;gBACA;gBACAmC;gBACA;kBACAA;gBACA;gBACAD;cACA;cACA+B;gBACA9B;gBACA;kBACAA;gBACA;gBACAD;cACA;YACA;YACAA;cACA/C;cACAiD;gBACAD;cACA;YACA;UACA;QACA;MAAA;MAvFA;QAAA;MAwFA;IACA;IACAiD;MACA;MACA;QACAjD;QACAA;QACAA;QACAA;QACAA;QACAA;QACAA;QACAA;QACAA;QACAA;QACAA;QACAA;QACA;QACAA;QACAD;UACA/C;UACAa;UACAoC;QACA;MACA;IACA;IACAiD;MACA;MACAnD;QACAiC;QACA/B;UACAD;UACAD;YACAiC;YACA/B;cACA;gBACAF;kBACA/C;kBACAa;gBACA;gBACAmC;kBACAiC;kBACAC;gBACA;cACA;cACAnC;YACA;UACA;QACA;QACA+B;UACA9B;UACAL;QACA;MACA;IACA;IACA;IACAwD;MAEA;QACApD;UACA6C;UACAQ;QACA;QACA;MACA;MACA;MAEA;QACAC;MACA;MACA;QACAA;MACA;MACA;MACAtD;QACAuD;QACArD,gCAEA;QACA;QACA6B;UACA;QAAA;MAEA;IAEA;IACAyB;MACA;IACA;IACAC;MAEAzD;QACA6C;QACAC;MACA;MACA;MACA;QACAY;QACAC;MACA;QAEA1D;QACAA;MACA;IACA;IACA;IACA2D;MACA;QACA5D;UACA6C;UACAQ;QACA;QACA;MACA;MACA;MACA;IACA;IACA;IACAQ;MACA;QACA7D;UACA6C;UACAQ;QACA;QACA;MACA;MACA;MACA;QACAK;MACA;QAEAzD;MACA;IACA;IACA6D;MACA;MACA;IACA;IACA;IACAC;MACA;QACA/D;UACA6C;UACAQ;QACA;QACA;MACA;MACA;MACA;MACAW;QACA/D;UACAyD;QACA;UACAzD;UACAD;YACA6C;YACAQ;UACA;UACApD;QACA;UACAA;QACA;MACA;IAEA;IACA;IACAgE;MACA;QACAjE;UACA6C;UACAQ;QACA;QACA;MACA;MACA;MACA;MACArD;QACAkE;MACA;IACA;IACAC;MACA;MACAnE;QACA/C;QACAiD;UACA;YACAD;cACAyD;cACAU;YACA;cACApE;gBACA/C;gBACAa;cACA;cACAmC;cACAA;YACA;cACAD;gBACA/C;gBACAa;cACA;YACA;UACA;QACA;MACA;IACA;IACA;IACAuG;MACA;QACArE;UACA6C;UACAQ;QACA;QACA;MACA;MACArD;QACAkE;MACA;IACA;IACAI;MACA;QACAtE;UACAkE;QACA;MACA;MACA;QACAlE;UACAkE;QACA;MACA;MACA;QACAlE;UACAkE;QACA;MACA;IACA;IACAK;MAEA;QACAvE;UACAkE;QACA;MACA;MACA;QACAlE;UACAkE;QACA;MACA;MACA;QACAlE;UACAkE;QACA;MACA;MACA;QACAlE;UACAkE;QACA;MACA;IAEA;IACAM;MACA;QACAxE;UACA6C;UACAQ;QACA;QACA;MACA;MACA;QACArD;UACA6C;UACAQ;QACA;QACA;MACA;MACA;MACArD;QACA/C;QACAa;QACAoC;UACAF;YACAkE;UACA;QACA;MACA;IACA;IACAO;MACA;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;QACAC;MACA;MACA3E;QACA6C;QACAC;MACA;MACA;QACA8B;MACA;QACA;QACA3E;QACAA;QACA;UACAA;QACA;QACAA;MACA;IACA;IACA4E;MACA;MACA;MACA;MACA;MACAjF;MACA;IACA;IACAkF;MACA;QACA;UAEA;UACA;QACA;QACA;MACA;QACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IAAA,CACA;IACAC;MACA;MACA;IACA;IACAC;MAAA;MACA;MACA;QACAtF;UACAkE;QACA;MACA;QACA;UACAjE;UACAA;UACA;QACA;UACAD;YACAkE;UACA;QACA;MACA;IACA;IACAqB;MACA3F;MAEA;MACA;QACA;MACA;MAEA;QACAsE;QACAhE;UACAN;QACA;MACA;MACA4F;QACA5F;QACA;QACAA;QACA;QACA;UACA6F;UACAC;UACAC;QACA;QACAH;UACA1H;UACAoC;YACAN;UACA;UACAmC;YACAnC;UACA;QACA;MACA;MACA4F;QACA5F;QACA;QACA;QACA;QACA;QACAI;QACAwF;QACAxB;UACA/D;QACA;MACA;MACAuF;QACA;QACA5F;QACA;QACA;QACA;QACA;QACA;QACA;UACAA;UACAK;QACA;QACA;QACA;UACAL;UACAK;QACA;QACA;QACA;UACAL;UACA;YACA;YACAK;UACA;YACA;YACAA;UACA;QACA;QACA;QACA;UACAL;UACAK;QACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACA2F;MACAhG;MACA;MACA;QACA6F;QACAC;QACAC;MACA;MACA3F;QACAlC;QACAoC;UACAN;QACA;QACAmC;UACAnC;QACA;MACA;IACA;IACAiG;MACA;MACA;MACA;MACAC;MACAA;MACAA;MACA;;MAeAA;MACAA;QACAA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC1qCA;AAAA;AAAA;AAAA;AAA4qC,CAAgB,+pCAAG,EAAC,C;;;;;;;;;;;ACAhsC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/index/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=57280228&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\app-windows\\\\HBuilderX.3.6.8.20221027-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/index/index.vue\"\nexport default component.exports","export * from \"-!E:\\\\app-windows\\\\HBuilderX.3.6.8.20221027-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\app-windows\\\\HBuilderX.3.6.8.20221027-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!E:\\\\app-windows\\\\HBuilderX.3.6.8.20221027-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\app-windows\\\\HBuilderX.3.6.8.20221027-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\app-windows\\\\HBuilderX.3.6.8.20221027-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\app-windows\\\\HBuilderX.3.6.8.20221027-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=template&id=57280228&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.pagebars, function (item, index) {\n    var $orig = _vm.__get_orig(item)\n    var g0 = index == 1 && _vm.pickupArray.length > 0\n    var g1 = g0 ? _vm.pickupArray.length : null\n    var g2 = index == 2 && _vm.completedArray.length > 0\n    var g3 = g2 ? _vm.completedArray.length : null\n    return {\n      $orig: $orig,\n      g0: g0,\n      g1: g1,\n      g2: g2,\n      g3: g3,\n    }\n  })\n  var g4 = _vm.showrelax == true ? _vm.completedArray.length : null\n  var g5 = _vm.showrelax == true ? _vm.pickupArray.length : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n        g4: g4,\n        g5: g5,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\app-windows\\\\HBuilderX.3.6.8.20221027-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\app-windows\\\\HBuilderX.3.6.8.20221027-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!E:\\\\app-windows\\\\HBuilderX.3.6.8.20221027-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\app-windows\\\\HBuilderX.3.6.8.20221027-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\app-windows\\\\HBuilderX.3.6.8.20221027-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\app-windows\\\\HBuilderX.3.6.8.20221027-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\app-windows\\\\HBuilderX.3.6.8.20221027-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!E:\\\\app-windows\\\\HBuilderX.3.6.8.20221027-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\app-windows\\\\HBuilderX.3.6.8.20221027-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\app-windows\\\\HBuilderX.3.6.8.20221027-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"page\">\r\n\t\t<!-- 导航栏 -->\r\n\t\t<navbar ref=\"navbar\" @showdriver=\"showdriver\" @ditu=\"ditu\" @changestatus=\"changestatus\"></navbar>\r\n\t\t<!-- 列表顶部分类 -->\r\n\t\t<view class=\"pagebar row\">\r\n\t\t\t<view @click=\"changepageindex(index)\" v-for=\"(item,index) in pagebars\" class=\"bar_item\">\r\n\t\t\t\t<view :class=\"selectedIndex == index?'Smain':'Snormal'\">\r\n\t\t\t\t\t{{item}}\r\n\t\t\t\t\t<view class=\"findishnums\" v-if=\"index == 1 && pickupArray.length > 0\">\r\n\t\t\t\t\t\t{{pickupArray.length}}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"findishnums\" v-if=\"index == 2 && completedArray.length > 0\">\r\n\t\t\t\t\t\t{{completedArray.length}}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 列表 -->\r\n\t\t<swiper :current=\"selectedIndex\" @change=\"change\" @animationfinish=\"animationfinish\" class=\"swiper\"\r\n\t\t\t:style=\"'height:' + scrollH + 'px;'\">\r\n\t\t\t<swiper-item>\r\n\t\t\t\t<scroll-view scroll-y class=\"scroll\" :style=\"'height:' + scrollH + 'px;'\" :show-scrollbar=\"false\">\r\n\t\t\t\t\t<cell ref=\"task\" @RefuseOrders=\"RefuseOrders\" @GrabOrder=\"GrabOrder\" :selectedIndex=\"selectedIndex\">\r\n\t\t\t\t\t</cell>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t</swiper-item>\r\n\t\t\t<swiper-item>\r\n\t\t\t\t<scroll-view scroll-y class=\"scroll\" :style=\"'height:' + scrollH + 'px;'\" :show-scrollbar=\"false\">\r\n\t\t\t\t\t<cell ref=\"pick\" @gotomapdetail=\"gotomapdetail\" @StartService=\"StartService\" @connect=\"connect\"\r\n\t\t\t\t\t\t:selectedIndex=\"selectedIndex\"></cell>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t</swiper-item>\r\n\t\t\t<swiper-item>\r\n\t\t\t\t<scroll-view scroll-y class=\"scroll\" :style=\"'height:' + scrollH + 'px;'\" :show-scrollbar=\"false\">\r\n\t\t\t\t\t<cell ref=\"completed\" @gotomapdetail=\"gotomapdetail\" @connect=\"connect\"\r\n\t\t\t\t\t\t@serviceCompleted=\"serviceCompleted\" :selectedIndex=\"selectedIndex\">\r\n\t\t\t\t\t</cell>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t</swiper-item>\r\n\t\t</swiper>\r\n\t\t<nothing v-if=\"selectedIndex == 0\" :list=\"taskArray\" :string=\"i18n.zanwuxinrenwu\"></nothing>\r\n\t\t<nothing v-if=\"selectedIndex == 1\" :list=\"pickupArray\" :string=\"i18n.zanwudaijiequ\"></nothing>\r\n\t\t<nothing v-if=\"selectedIndex == 2\" :list=\"completedArray\" :string=\"i18n.zanwudaiwancheng\"></nothing>\r\n\t\t<!-- 底部按钮 -->\r\n\t\t<view class=\"bottom\" :style=\"'height:' + safeAreaBottom + 'px;'\">\r\n\t\t\t<view style=\"width: 100%;height: 53px;align-items: center;\" class=\"row\">\r\n\t\t\t\t<view class=\"bottom_left column\" @click=\"set\">\r\n\t\t\t\t\t<image src=\"../../static/image/shehzi.png\"></image>\r\n\t\t\t\t\t<text>{{i18n.jiedanshezhi}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"bottom_right row\" @click=\"reload\">\r\n\t\t\t\t\t<image src=\"../../static/image/shuxin.png\"></image>\r\n\t\t\t\t\t<text>{{i18n.shuaxinliebiao}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 左滑我的页面 -->\r\n\t\t<unidrawer ref=\"showRight\" mode=\"left\" :mask-click=\"true\">\r\n\t\t\t<scroll-view class=\"drawscroll\" :style=\"'margin-top:' + drawtop + 'px;height:' + drawheight + 'px;'\"\r\n\t\t\t\tscroll-y=\"true\">\r\n\t\t\t\t<view class=\"drawscroll-header row\">\r\n\t\t\t\t\t<image mode=\"aspectFill\" src=\"../../static/image/touxiang.png\"></image>\r\n\t\t\t\t\t<view class=\"drawscroll-right column\">\r\n\t\t\t\t\t\t<view class=\"drawscroll-right-name oneline\">{{userInfo.user_nickname}}</view>\r\n\t\t\t\t\t\t<view class=\"drawscroll-right-mobile\">{{mobile}}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"drawscroll-menu row\">\r\n\t\t\t\t\t<view @click=\"gomymenus(index)\" v-for=\"(item,index) in mymenu\" class=\"drawscroll-menu-sub\">\r\n\t\t\t\t\t\t<view class=\"drawscroll-menu-sub-des\" v-if=\"index == 0\">{{userInfo.orders}}</view>\r\n\t\t\t\t\t\t<view class=\"drawscroll-menu-sub-des\" v-if=\"index == 1\">{{userInfo.income}}</view>\r\n\t\t\t\t\t\t<view class=\"drawscroll-menu-sub-des\" v-if=\"index == 2\">{{userInfo.mgood}}</view>\r\n\t\t\t\t\t\t<view class=\"drawscroll-menu-sub-title oneline\">{{item}}\r\n\t\t\t\t\t\t\t<image src=\"../../static/image/jinrujiantou.png\" mode=\"aspectFit\"></image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view v-for=\"(item,index) in userlist\" class=\"userlist\" @click=\"gouser(index)\">\r\n\t\t\t\t\t<view :style=\"index == 4?'margin-top: 30px;':''\" class=\"userlist_cell row\">\r\n\t\t\t\t\t\t<image class=\"userlist_cell_icon\" :src=\"item.img\"></image>\r\n\t\t\t\t\t\t<text>{{item.name}}</text>\r\n\t\t\t\t\t\t<image src=\"../../static/image/jinrujiantou.png\" class=\"jiantou\" mode=\"aspectFit\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t</unidrawer>\r\n\t\t<!-- 系统设置 -->\r\n\t\t<phoneset v-if=\"showset == true\" @colseset=\"colseset\"></phoneset>\r\n\t\t<!-- 抢单 -->\r\n\t\t<Graborders v-if=\"grab == true\" ref=\"Graborders\" @hidegrab=\"hidegrab\"></Graborders>\r\n\t\t<!-- 4位完成码 -->\r\n\t\t<phoneinput v-if=\"showphoneCode == true\" @finishcode=\"finishcode\" @cancleinput=\"cancleinput\"></phoneinput>\r\n\t\t<!-- 休息 -->\r\n\t\t<relaxview :nums=\"completedArray.length + pickupArray.length\" v-if=\"showrelax == true\"\r\n\t\t\t@relaxcancle=\"relaxcancle\" @relaxsure=\"relaxsure\"></relaxview>\r\n\t\t<relaxokview v-if=\"showrelaxok == true\" @relaxcancle=\"relaxcancle\"></relaxokview>\r\n\t\t<cancleorder v-if=\"showcancleorder\" @ordercanclesure=\"ordercanclesure\"></cancleorder>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport cell from '../../components/defaultcell/index.vue'\r\n\timport relaxokview from '../../components/relaxokview/index.vue'\r\n\timport relaxview from '../../components/relaxview/index.vue'\r\n\timport phoneinput from '../../components/phoneinput/index.vue'\r\n\timport cancleorder from '../../components/cancleorder/index.vue'\r\n\timport Graborders from '../../components/Graborders/index.vue'\r\n\timport phoneset from '../../components/phoneset/index.vue'\r\n\timport unidrawer from '../../uni_modules/uni-drawer/components/uni-drawer/uni-drawer.vue'\r\n\timport navbar from '../../components/navsearchbar/index.vue'\r\n\timport NP from 'number-precision'\r\n\t// #ifdef APP-PLUS\r\n\timport permision from \"@/js_sdk/wa-permission/permission.js\"\r\n\tconst wyGaoDeModule = uni.requireNativePlugin('WY-GaoDeModule')\r\n\t// #endif\r\n\tvar amapFile = require('../../js/amap-wx.130.js');\r\n\tvar myAmapFun = new amapFile.AMapWX({\r\n\t\tkey: getApp().globalData.GaoDeKey_amapkey\r\n\t});\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tcancleorder, //取消订单\r\n\t\t\tcell, //通用cell\r\n\t\t\tnavbar, //导航栏\r\n\t\t\tunidrawer, //个人中心抽屉\r\n\t\t\tphoneset, //设置电话\r\n\t\t\tGraborders, //抢单\r\n\t\t\tphoneinput, //电话输入\r\n\t\t\trelaxview, //休息\r\n\t\t\trelaxokview, //休息\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\ti18n() {\r\n\t\t\t\treturn this.$t('index')\r\n\t\t\t},\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tshowcancleorder: false,\r\n\t\t\t\tp1: 1,\r\n\t\t\t\tp2: 1,\r\n\t\t\t\tp3: 1,\r\n\t\t\t\ttaskArray: [],\r\n\t\t\t\tpickupArray: [],\r\n\t\t\t\tcompletedArray: [],\r\n\t\t\t\tmobile: '', //显示个人中心电话178****3333\r\n\t\t\t\tuserInfo: '', //个人信息\r\n\t\t\t\tshowrelaxok: false, //是否显示休息界面\r\n\t\t\t\tshowrelax: false, //是否显示休息界面\r\n\t\t\t\tshowphoneCode: false, //是否手机验证码view\r\n\t\t\t\tgrab: false, //抢单\r\n\t\t\t\tshowset: false, //显示底部接单设置\r\n\t\t\t\tuserlist: [\r\n\t\t\t\t\t {\r\n\t\t\t\t\timg: '../../static/personimage/pingjia.png',\r\n\t\t\t\t\tname: '我的评价'\r\n\t\t\t\t}, {\r\n\t\t\t\t\timg: '../../static/personimage/dingdan.png',\r\n\t\t\t\t\tname: '订单统计'\r\n\t\t\t\t}, {\r\n\t\t\t\t\timg: '../../static/personimage/qianbao.png',\r\n\t\t\t\t\tname: '我的钱包'\r\n\t\t\t\t}, {\r\n\t\t\t\t\timg: '../../static/personimage/shehhzi.png',\r\n\t\t\t\t\tname: '设置'\r\n\t\t\t\t}], //个人中心列表\r\n\t\t\t\tmymenu: ['今日完成单', '今日配送费', '本月好评'], //个人中心列表\r\n\t\t\t\tdrawtop: 0,\r\n\t\t\t\tdrawheight: 0,\r\n\t\t\t\tlist: [], //任务列表\r\n\t\t\t\tscrollH: 0,\r\n\t\t\t\tsafeAreaBottom: 0,\r\n\t\t\t\tselectedIndex: 0,\r\n\t\t\t\tpagebars: [\"新任务\", \"待取货\", \"待完成\"],\r\n\t\t\t\tselectedID: 0,\r\n\t\t\t\tlocationtimer: null,\r\n\t\t\t\tsckChatServer: ''\r\n\t\t\t}\r\n\t\t},\r\n\t\tonHide() {\r\n\t\t\tconsole.log('onHide ')\r\n\t\t},\r\n\t\tonReady() {\r\n\t\t\tthis.userlist = [{\r\n\t\t\t\timg: '../../static/personimage/pingjia.png',\r\n\t\t\t\tname: this.i18n.wodepingjia\r\n\t\t\t}, {\r\n\t\t\t\timg: '../../static/personimage/dingdan.png',\r\n\t\t\t\tname: this.i18n.dingdantongji\r\n\t\t\t}, {\r\n\t\t\t\timg: '../../static/personimage/qianbao.png',\r\n\t\t\t\tname: this.i18n.wodeqianbao\r\n\t\t\t}, {\r\n\t\t\t\timg: '../../static/personimage/shehhzi.png',\r\n\t\t\t\tname: this.i18n.shezhi\r\n\t\t\t}] //个人中心列表\r\n\t\t\tthis.mymenu = [this.i18n.jinriwanchengdan, this.i18n.jinripeisongfei, this.i18n.benyuehaoping] //个人中心列表\r\n\t\t\tthis.pagebars = [this.i18n.xinrenwu, this.i18n.daiquhuo, this.i18n.daiwancheng]\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\t// console.log(getApp().globalData.GaoDeKey_amapkey)\r\n\t\t\tvar that = this\r\n\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\tthis.getUserLocation()\r\n\t\t\t// #endif\r\n\t\t\t// #ifdef APP-PLUS\r\n\t\t\tif (this.NB.user()) {\r\n\t\t\t\tthis.getlocation()\r\n\t\t\t}\r\n\t\t\t// #endif\r\n\t\t\tthis.login()\r\n\t\t\tthis.finishedThumb()\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tconsole.log('onLoad')\r\n\t\t\tuni.onNetworkStatusChange(function(res) {\r\n\t\t\t\t// console.log(res)\r\n\t\t\t\tif (res.isConnected) {\r\n\t\t\t\t\tthat.login()\r\n\t\t\t\t\tthat.OrdersGetList()\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tvar that = this\r\n\t\t\t// #ifdef APP-PLUS\r\n\t\t\tplus.device.setWakelock(true);\r\n\t\t\tif (!wyGaoDeModule) {\r\n\t\t\t\twyGaoDeModule.initModule(getApp().globalData.GaoDeAppKey)\r\n\t\t\t}\r\n\t\t\tthis.requestLocPermission()\r\n\t\t\tthis.requestLocBackgroudPermission()\r\n\t\t\t// #endif\r\n\r\n\t\t\tthis.drawtop = getApp().globalData.top + 44 + 50\r\n\t\t\tthis.drawheight = getApp().globalData.windowHeight - this.drawtop\r\n\t\t\tthis.safeAreaBottom = getApp().globalData.safeAreaBottom + 53\r\n\t\t\tthis.scrollH = getApp().globalData.windowHeight - this.safeAreaBottom - getApp().globalData.top - 50 - 44\r\n\r\n\t\t\tthis.locationtimer = setInterval(function() {\r\n\t\t\t\tuni.getStorage({\r\n\t\t\t\t\tkey: 'mylocation',\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tthat.CalculateDistance(res.data.longitude, res.data.latitude)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}, 5000);\r\n\t\t\t// #ifdef APP-PLUS\r\n\t\t\tif (this.NB.user()) {\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tthat.uploadimprofile()\r\n\t\t\t\t}, 2000);\r\n\t\t\t\tthat.getclientID()\r\n\t\t\t}\r\n\t\t\t// #endif\r\n\t\t},\r\n\t\t// watch: {\r\n\t\t// \tshowset: {\r\n\t\t// \t\thandler(newName, oldName) {\r\n\t\t// \t\t\t// #ifdef APP-PLUS\r\n\t\t// \t\t\t// this.startlocation()\r\n\t\t// \t\t\t// #endif\r\n\t\t// \t\t},\r\n\t\t// \t\timmediate: true\r\n\t\t// \t}\r\n\t\t// },\r\n\t\tmethods: {\n\t\t\tgetclientID() {\n\t\t\t\t\n\t\t\t},\n\t\t\tuploadCid(cid){\n\t\t\t\t\n\t\t\t\t// that.NB.sendRequest('Rider.Location.Set', {\n\t\t\t\t// \tlng: res.longitude,\n\t\t\t\t// \tlat: res.latitude,\n\t\t\t\t// })\n\t\t\t},\r\n\t\t\tuploadimprofile() {\r\n\t\t\t\tconst info = this.NB.user()\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tordercanclesure() {\r\n\t\t\t\tthis.showcancleorder = false\r\n\t\t\t},\r\n\t\t\tfomatFloat(value, n) {\r\n\t\t\t\tvar f = Math.round(value * Math.pow(10, n)) / Math.pow(10, n);\r\n\t\t\t\tvar s = f.toString();\r\n\t\t\t\tvar rs = s.indexOf('.');\r\n\t\t\t\tif (rs < 0) {\r\n\t\t\t\t\ts += '.';\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i = s.length - s.indexOf('.'); i <= n; i++) {\r\n\t\t\t\t\ts += \"0\";\r\n\t\t\t\t}\r\n\t\t\t\treturn s;\r\n\t\t\t},\r\n\t\t\tCalculateDistance(longitude, latitude) {\r\n\t\t\t\tvar that = this\r\n\t\t\t\tfor (let i = 0; i < that.taskArray.length; i++) {\r\n\t\t\t\t\tvar dic = that.taskArray[i]\r\n\t\t\t\t\tvar l = dic.f_lng\r\n\t\t\t\t\tvar t = dic.f_lat\r\n\t\t\t\t\tif (dic.type == 3 && dic.f_lng.length == 0) {\r\n\t\t\t\t\t\tl = dic.t_lng\r\n\t\t\t\t\t\tt = dic.t_lat\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (dic.type == 4 || dic.type == 5) {\r\n\t\t\t\t\t\tl = dic.t_lng\r\n\t\t\t\t\t\tt = dic.t_lat\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar distance = parseInt(that.countDist(parseFloat(longitude), parseFloat(latitude), parseFloat(l),\r\n\t\t\t\t\t\tparseFloat(t)))\r\n\r\n\t\t\t\t\t// that.getRidingRoute(longitude, latitude, l, t).then(distance => {\r\n\t\t\t\t\tvar mydistance = distance\r\n\t\t\t\t\tif (distance > 1000) {\r\n\t\t\t\t\t\tmydistance = that.fomatFloat(distance / 1000, 1) + 'km'\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tmydistance = NP.strip(distance) + 'm'\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthat.taskArray[i].myDistance = mydistance\r\n\t\t\t\t\tlet allDistance = 0\r\n\t\t\t\t\tif (that.taskArray[i].extra.distance != '') {\r\n\t\t\t\t\t\tallDistance = parseFloat(distance) + parseFloat(that.taskArray[i].extra.distance)\r\n\t\t\t\t\t\tif (allDistance > 1000) {\r\n\t\t\t\t\t\t\tallDistance = that.fomatFloat(allDistance / 1000, 1) + 'km'\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tallDistance = NP.strip(allDistance) + 'm'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthat.taskArray[i].allDistance = allDistance\r\n\t\t\t\t\tif (that.$refs.task) {\r\n\t\t\t\t\t\tthat.$refs.task.reload(that.taskArray)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tuni.setStorage({\r\n\t\t\t\t\t\tkey: 'taskArray',\r\n\t\t\t\t\t\tdata: that.taskArray\r\n\t\t\t\t\t})\r\n\t\t\t\t\t// })\r\n\t\t\t\t}\r\n\t\t\t\tfor (let i = 0; i < that.pickupArray.length; i++) {\r\n\t\t\t\t\tvar dic = that.pickupArray[i]\r\n\t\t\t\t\tvar l = dic.f_lng\r\n\t\t\t\t\tvar t = dic.f_lat\r\n\t\t\t\t\tif (dic.type == 3 && dic.f_lng == '') {\r\n\t\t\t\t\t\tl = dic.t_lng\r\n\t\t\t\t\t\tt = dic.t_lat\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (dic.type == 4 || dic.type == 5) {\r\n\t\t\t\t\t\tl = dic.t_lng\r\n\t\t\t\t\t\tt = dic.t_lat\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar distance = parseInt(that.countDist(parseFloat(longitude), parseFloat(latitude), parseFloat(l),\r\n\t\t\t\t\t\tparseFloat(t)))\r\n\t\t\t\t\t// that.getRidingRoute(longitude, latitude, l, t).then(distance => {\r\n\r\n\t\t\t\t\tvar mydistance = distance\r\n\t\t\t\t\tif (distance > 1000) {\r\n\t\t\t\t\t\tmydistance = that.fomatFloat(distance / 1000, 1) + 'km'\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tmydistance = NP.strip(distance) + 'm'\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthat.pickupArray[i].myDistance = mydistance\r\n\r\n\t\t\t\t\tlet allDistance = parseFloat(distance) + parseFloat(that.pickupArray[i].extra.distance)\r\n\r\n\t\t\t\t\tif (allDistance > 1000) {\r\n\t\t\t\t\t\tallDistance = that.fomatFloat(allDistance / 1000, 1) + 'km'\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tallDistance = NP.strip(allDistance) + 'm'\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthat.pickupArray[i].allDistance = allDistance\r\n\t\t\t\t\tif (that.$refs.pick) {\r\n\t\t\t\t\t\tthat.$refs.pick.reload(that.pickupArray)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tuni.setStorage({\r\n\t\t\t\t\t\tkey: 'pickupArray',\r\n\t\t\t\t\t\tdata: that.pickupArray\r\n\t\t\t\t\t})\r\n\t\t\t\t\t// })\r\n\t\t\t\t}\r\n\t\t\t\tfor (let i = 0; i < that.completedArray.length; i++) {\r\n\t\t\t\t\tvar dic = that.completedArray[i]\r\n\t\t\t\t\tvar l = dic.f_lng\r\n\t\t\t\t\tvar t = dic.f_lat\r\n\t\t\t\t\tif (dic.type == 3 && dic.f_lng.length == 0) {\r\n\t\t\t\t\t\tl = dic.t_lng\r\n\t\t\t\t\t\tt = dic.t_lat\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (dic.type == 4 || dic.type == 5) {\r\n\t\t\t\t\t\tl = dic.t_lng\r\n\t\t\t\t\t\tt = dic.t_lat\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar distance = parseInt(that.countDist(parseFloat(longitude), parseFloat(latitude), parseFloat(l),\r\n\t\t\t\t\t\tparseFloat(t)))\r\n\r\n\t\t\t\t\t// that.getRidingRoute(longitude, latitude, l, t).then(distance => {\r\n\t\t\t\t\tvar mydistance = distance\r\n\t\t\t\t\tif (distance > 1000) {\r\n\t\t\t\t\t\tmydistance = that.fomatFloat(distance / 1000, 1) + 'km'\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tmydistance = NP.strip(distance) + 'm'\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthat.completedArray[i].myDistance = mydistance\r\n\t\t\t\t\tlet allDistance = parseFloat(distance) + parseFloat(that.completedArray[i].extra.distance)\r\n\t\t\t\t\tif (allDistance > 1000) {\r\n\t\t\t\t\t\tallDistance = that.fomatFloat(allDistance / 1000, 1) + 'km'\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tallDistance = NP.strip(allDistance) + 'm'\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthat.completedArray[i].allDistance = allDistance\r\n\t\t\t\t\tif (that.$refs.completed) {\r\n\t\t\t\t\t\tthat.$refs.completed.reload(that.completedArray)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tuni.setStorage({\r\n\t\t\t\t\t\tkey: 'completedArray',\r\n\t\t\t\t\t\tdata: that.completedArray\r\n\t\t\t\t\t})\r\n\t\t\t\t\t// })\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcountDist(lng1, lat1, lng2, lat2) { //纬度1,经度1,纬度2,经度2\r\n\t\t\t\tvar f = ((lat1 + lat2) / 2) * Math.PI / 180.0;\r\n\t\t\t\tvar g = ((lat1 - lat2) / 2) * Math.PI / 180.0;\r\n\t\t\t\tvar l = ((lng1 - lng2) / 2) * Math.PI / 180.0;\r\n\t\t\t\tvar sg = Math.sin(g);\r\n\t\t\t\tvar sl = Math.sin(l);\r\n\t\t\t\tvar sf = Math.sin(f);\r\n\t\t\t\tvar s, c, w, r, d, h1, h2;\r\n\t\t\t\tvar a = 6378137.0; //地球的直径\r\n\t\t\t\tvar fl = 1 / 298.257;\r\n\t\t\t\tsg = sg * sg;\r\n\t\t\t\tsl = sl * sl;\r\n\t\t\t\tsf = sf * sf;\r\n\t\t\t\ts = sg * (1 - sl) + (1 - sf) * sl;\r\n\t\t\t\tc = (1 - sg) * (1 - sl) + sf * sl;\r\n\t\t\t\tw = Math.atan(Math.sqrt(s / c));\r\n\t\t\t\tr = Math.sqrt(s * c) / w;\r\n\t\t\t\td = 2 * w * a;\r\n\t\t\t\th1 = (3 * r - 1) / 2 / c;\r\n\t\t\t\th2 = (3 * r + 1) / 2 / s;\r\n\t\t\t\tvar num = d * (1 + fl * (h1 * sf * (1 - sg) - h2 * (1 - sf) * sg))\r\n\t\t\t\treturn num; //返回单位:米\r\n\t\t\t},\r\n\t\t\tgetRidingRoute(longitude, latitude, endlongitude, endlatitude) {\r\n\t\t\t\tvar promise = new Promise(function(resolve, reject) {\r\n\t\t\t\t\tmyAmapFun.getRidingRoute({\r\n\t\t\t\t\t\torigin: longitude + ',' + latitude,\r\n\t\t\t\t\t\tdestination: endlongitude + ',' + endlatitude,\r\n\t\t\t\t\t\tsuccess: function(data) {\r\n\t\t\t\t\t\t\tresolve(data.paths[0].distance)\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: function(data) {}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\treturn promise;\r\n\t\t\t},\r\n\t\t\tgetlocation() {\r\n\t\t\t\tconsole.log('单次定位开始APPPlus')\r\n\t\t\t\tvar that = this\r\n\t\t\t\tuni.getLocation({\r\n\t\t\t\t\ttype: 'gcj02',\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tconsole.log('单次定位成功')\r\n\t\t\t\t\t\tthat.showset = false\r\n\t\t\t\t\t\tuni.setStorage({\r\n\t\t\t\t\t\t\tkey: 'mylocation',\r\n\t\t\t\t\t\t\tdata: res\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tthat.OrdersGetList()\r\n\t\t\t\t\t\tthat.NB.sendRequest('Rider.Location.Set', {\r\n\t\t\t\t\t\t\tlng: res.longitude,\r\n\t\t\t\t\t\t\tlat: res.latitude,\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tthat.startlocation()\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t\t\tthat.showset = true\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\trequestLocPermission() {\r\n\t\t\t\tvar that = this\r\n\t\t\t\twyGaoDeModule.requestLocPermission((res) => {\r\n\t\t\t\t\t// console.log(res)\r\n\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\trequestLocBackgroudPermission() {\r\n\t\t\t\tvar that = this\r\n\t\t\t\tif (plus.os.name == 'Android') {\r\n\t\t\t\t\twyGaoDeModule.requestLocBackgroudPermission((res) => {\r\n\t\t\t\t\t\t// console.log(res)\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tstartlocation() {\r\n\t\t\t\tconsole.log('开始定位')\r\n\t\t\t\tvar that = this\r\n\t\t\t\twyGaoDeModule.startLocation({\r\n\t\t\t\t\tenableBackground: 1,\r\n\t\t\t\t\tinterval: 5000\r\n\t\t\t\t}, (res) => {\r\n\t\t\t\t\t// console.log(res)\r\n\t\t\t\t\tif (res.longitude != 0) {\r\n\t\t\t\t\t\tuni.setStorage({\r\n\t\t\t\t\t\t\tkey: 'mylocation',\r\n\t\t\t\t\t\t\tdata: res\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tthat.NB.sendRequest('Rider.Location.Set', {\r\n\t\t\t\t\t\t\tlng: res.longitude,\r\n\t\t\t\t\t\t\tlat: res.latitude,\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tstopLocation() {\r\n\t\t\t\twyGaoDeModule.stopLocation()\r\n\t\t\t},\r\n\t\t\tGetConfig() {\r\n\t\t\t\tconsole.log(221312123312123312)\r\n\t\t\t\tvar that = this\r\n\t\t\t\tthis.NB.sendRequest('Home.GetConfig').then(data => {\r\n\t\t\t\t\t// console.log(data)\r\n\t\t\t\t\tconst value = uni.getStorageSync('userinfo');\r\n\t\t\t\t\tif (value && value.id > 0) {\r\n\t\t\t\t\t\tvar chatS = data.info[0].chatserver\r\n\t\t\t\t\t\tthat.sckChatServer = that.NB.decypt(chatS)\r\n\t\t\t\t\t\tthat.socektMethod(that.sckChatServer)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tuni.setStorage({\r\n\t\t\t\t\t\tkey: 'Config',\r\n\t\t\t\t\t\tdata: data.info[0]\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\treload() {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: this.i18n.shuaxinzhong,\r\n\t\t\t\t\tmask: false\r\n\t\t\t\t});\r\n\t\t\t\tthis.OrdersGetList()\r\n\t\t\t},\r\n\t\t\tOrdersGetList() {\r\n\t\t\t\tvar that = this\r\n\t\t\t\tfor (let i = 0; i < 3; i++) {\r\n\t\t\t\t\tthis.NB.sendRequest('Rider.Orders.GetList', {\r\n\t\t\t\t\t\ttype: i + 1,\r\n\t\t\t\t\t\tp: 1\r\n\t\t\t\t\t}).then(data => {\r\n\t\t\t\t\t\t// console.log(data)\r\n\t\t\t\t\t\tif (i == 0) {\r\n\t\t\t\t\t\t\tuni.getStorage({\r\n\t\t\t\t\t\t\t\tkey: 'taskArray',\r\n\t\t\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t\t\tfor (let i = 0; i < res.data.length; i++) {\r\n\t\t\t\t\t\t\t\t\t\tfor (let j = 0; j < data.info.length; j++) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (data.info[j].id == res.data[i].id) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tdata.info[j].myDistance = res.data[i].myDistance\r\n\t\t\t\t\t\t\t\t\t\t\t\tdata.info[j].allDistance = res.data[i].allDistance\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tthat.taskArray = data.info\r\n\t\t\t\t\t\t\t\t\tif (that.$refs.task) {\r\n\t\t\t\t\t\t\t\t\t\tthat.$refs.task.reload(that.taskArray)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfail() {\r\n\t\t\t\t\t\t\t\t\tthat.taskArray = data.info\r\n\t\t\t\t\t\t\t\t\tif (that.$refs.task) {\r\n\t\t\t\t\t\t\t\t\t\tthat.$refs.task.reload(that.taskArray)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t} else if (i == 1) {\r\n\t\t\t\t\t\t\tuni.getStorage({\r\n\t\t\t\t\t\t\t\tkey: 'pickupArray',\r\n\t\t\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t\t\tfor (let i = 0; i < res.data.length; i++) {\r\n\t\t\t\t\t\t\t\t\t\tfor (let j = 0; j < data.info.length; j++) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (data.info[j].id == res.data[i].id) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tdata.info[j].myDistance = res.data[i].myDistance\r\n\t\t\t\t\t\t\t\t\t\t\t\tdata.info[j].allDistance = res.data[i].allDistance\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tthat.pickupArray = data.info\r\n\t\t\t\t\t\t\t\t\tif (that.$refs.pick) {\r\n\t\t\t\t\t\t\t\t\t\tthat.$refs.pick.reload(that.pickupArray)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfail() {\r\n\t\t\t\t\t\t\t\t\tthat.pickupArray = data.info\r\n\t\t\t\t\t\t\t\t\tif (that.$refs.pick) {\r\n\t\t\t\t\t\t\t\t\t\tthat.$refs.pick.reload(that.pickupArray)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tuni.getStorage({\r\n\t\t\t\t\t\t\t\tkey: 'completedArray',\r\n\t\t\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t\t\tfor (let i = 0; i < res.data.length; i++) {\r\n\t\t\t\t\t\t\t\t\t\tfor (let j = 0; j < data.info.length; j++) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (data.info[j].id == res.data[i].id) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tdata.info[j].myDistance = res.data[i].myDistance\r\n\t\t\t\t\t\t\t\t\t\t\t\tdata.info[j].allDistance = res.data[i].allDistance\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tthat.completedArray = data.info\r\n\t\t\t\t\t\t\t\t\tif (that.$refs.completed) {\r\n\t\t\t\t\t\t\t\t\t\tthat.$refs.completed.reload(that.completedArray)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfail() {\r\n\t\t\t\t\t\t\t\t\tthat.completedArray = data.info\r\n\t\t\t\t\t\t\t\t\tif (that.$refs.completed) {\r\n\t\t\t\t\t\t\t\t\t\tthat.$refs.completed.reload(that.completedArray)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tuni.getStorage({\r\n\t\t\t\t\t\t\t\tkey: 'mylocation',\r\n\t\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\t\tthat.CalculateDistance(res.data.longitude, res.data.latitude)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tGetBaseInfo() {\r\n\t\t\t\tvar that = this\r\n\t\t\t\tthis.NB.sendRequest('Rider.User.GetBaseInfo').then(data => {\r\n\t\t\t\t\tthat.userInfo = that.NB.user()\r\n\t\t\t\t\tthat.userInfo.isrest = data.info[0].isrest\r\n\t\t\t\t\tthat.userInfo.balance = data.info[0].balance\r\n\t\t\t\t\tthat.userInfo.balancetotal = data.info[0].balancetotal\r\n\t\t\t\t\tthat.userInfo.income = data.info[0].income\r\n\t\t\t\t\tthat.userInfo.orders = data.info[0].orders\r\n\t\t\t\t\tthat.userInfo.star = data.info[0].star\r\n\t\t\t\t\tthat.userInfo.evaluates = data.info[0].evaluates\r\n\t\t\t\t\tthat.userInfo.average = data.info[0].average\r\n\t\t\t\t\tthat.userInfo.bad = data.info[0].bad\r\n\t\t\t\t\tthat.userInfo.mgood = data.info[0].mgood\r\n\t\t\t\t\tthat.userInfo.good = data.info[0].good\r\n\t\t\t\t\tvar reg = /^(\\d{3})\\d{4}(\\d{4})$/;\r\n\t\t\t\t\tthat.mobile = that.userInfo.mobile.replace(reg, \"$1****$2\");\r\n\t\t\t\t\tuni.setStorage({\r\n\t\t\t\t\t\tkey: 'userinfo',\r\n\t\t\t\t\t\tdata: that.userInfo,\r\n\t\t\t\t\t\tsuccess: function() {}\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetUserLocation() {\r\n\t\t\t\tvar that = this\r\n\t\t\t\tuni.startLocationUpdateBackground({\r\n\t\t\t\t\ttype: 'wgs84',\r\n\t\t\t\t\tsuccess: () => {\r\n\t\t\t\t\t\tthat.showset = false\r\n\t\t\t\t\t\tuni.startLocationUpdate({\r\n\t\t\t\t\t\t\ttype: 'wgs84',\r\n\t\t\t\t\t\t\tsuccess: () => {\r\n\t\t\t\t\t\t\t\tconst _locationChangeFn = function(res) {\r\n\t\t\t\t\t\t\t\t\tuni.setStorage({\r\n\t\t\t\t\t\t\t\t\t\tkey: 'mylocation',\r\n\t\t\t\t\t\t\t\t\t\tdata: res\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\tthat.NB.sendRequest('Rider.Location.Set', {\r\n\t\t\t\t\t\t\t\t\t\tlng: res.longitude,\r\n\t\t\t\t\t\t\t\t\t\tlat: res.latitude,\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tuni.onLocationChange(_locationChangeFn)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\tthat.showset = true\r\n\t\t\t\t\t\tconsole.log('startLocationUpdateBackground',JSON.stringify(err))\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//联系\r\n\t\t\tconnect(item) {\r\n\r\n\t\t\t\tif (this.userInfo.isrest == 1) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: this.i18n.xiuxizhong,\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tvar tonum = item.recip_phone;\r\n\r\n\t\t\t\tif (item.type < 3 && item.status == 3) {\r\n\t\t\t\t\ttonum = item.pick_phone\r\n\t\t\t\t}\r\n\t\t\t\tif (item.type == 6) {\r\n\t\t\t\t\ttonum = item.pick_phone\r\n\t\t\t\t}\r\n\t\t\t\t// console.log(item)\r\n\t\t\t\tuni.makePhoneCall({\r\n\t\t\t\t\tphoneNumber: tonum,\r\n\t\t\t\t\tsuccess: (res) => {\r\n\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// 失败回调\r\n\t\t\t\t\tfail: (res) => {\r\n\t\t\t\t\t\t// console.log('调用失败!', JSON.stringify(res))\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\t\t\t},\r\n\t\t\tcancleinput() {\r\n\t\t\t\tthis.showphoneCode = false\r\n\t\t\t},\r\n\t\t\tfinishcode(code) {\r\n\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '',\r\n\t\t\t\t\tmask: false\r\n\t\t\t\t});\r\n\t\t\t\tvar that = this\r\n\t\t\t\tthis.NB.sendRequest('Rider.Orders.Complete', {\r\n\t\t\t\t\toid: this.selectedID,\r\n\t\t\t\t\tcode: code\r\n\t\t\t\t}, true).then(function(data) {\r\n\r\n\t\t\t\t\tthat.OrdersGetList()\r\n\t\t\t\t\tthat.showphoneCode = false\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//服务完成\r\n\t\t\tserviceCompleted(item) {\r\n\t\t\t\tif (this.userInfo.isrest == 1) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: this.i18n.xiuxizhong,\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tthis.selectedID = item.id\r\n\t\t\t\tthis.showphoneCode = true\r\n\t\t\t},\r\n\t\t\t//拒绝接单\r\n\t\t\tRefuseOrders(item) {\r\n\t\t\t\tif (this.userInfo.isrest == 1) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: this.i18n.xiuxizhong,\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tvar that = this\r\n\t\t\t\tthis.NB.sendRequest('Rider.Orders.Refuse', {\r\n\t\t\t\t\toid: item.id\r\n\t\t\t\t}, true).then(function(data) {\r\n\r\n\t\t\t\t\tthat.OrdersGetList()\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\thidegrab() {\r\n\t\t\t\tthis.grab = false\r\n\t\t\t\tthis.OrdersGetList()\r\n\t\t\t},\r\n\t\t\t//抢单\r\n\t\t\tGrabOrder(item) {\r\n\t\t\t\tif (this.userInfo.isrest == 1) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: this.i18n.xiuxizhong,\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tvar that = this\r\n\t\t\t\tthis.grab = true\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthat.NB.sendRequest('Rider.Orders.Grap', {\r\n\t\t\t\t\t\toid: item.id\r\n\t\t\t\t\t}).then(function(data) {\r\n\t\t\t\t\t\tthat.$refs.Graborders.success()\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: data.msg,\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tthat.selectedIndex = 1\r\n\t\t\t\t\t}).catch(function(data) {\r\n\t\t\t\t\t\tthat.$refs.Graborders.getresult()\r\n\t\t\t\t\t})\r\n\t\t\t\t}, 3000)\r\n\r\n\t\t\t},\r\n\t\t\t//开始服务\r\n\t\t\tStartService(item) {\r\n\t\t\t\tif (this.userInfo.isrest == 1) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: this.i18n.xiuxizhong,\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tvar that = this\r\n\t\t\t\tthis.selectedID = item.id\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '../uploadphoto/index',\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tfinishedThumb() {\r\n\t\t\t\tvar that = this\r\n\t\t\t\tuni.getStorage({\r\n\t\t\t\t\tkey: 'finishthumb',\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tif (res.data.length > 0) {\r\n\t\t\t\t\t\t\tthat.NB.sendRequest('Rider.Orders.Start', {\r\n\t\t\t\t\t\t\t\toid: that.selectedID,\r\n\t\t\t\t\t\t\t\tthumbs: JSON.stringify(res.data),\r\n\t\t\t\t\t\t\t}, true).then(function(data) {\r\n\t\t\t\t\t\t\t\tuni.setStorage({\r\n\t\t\t\t\t\t\t\t\tkey: 'finishthumb',\r\n\t\t\t\t\t\t\t\t\tdata: ''\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tthat.OrdersGetList()\r\n\t\t\t\t\t\t\t\tthat.selectedIndex = 2\r\n\t\t\t\t\t\t\t}).catch(data => {\r\n\t\t\t\t\t\t\t\tuni.setStorage({\r\n\t\t\t\t\t\t\t\t\tkey: 'finishthumb',\r\n\t\t\t\t\t\t\t\t\tdata: ''\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//详情\r\n\t\t\tgotomapdetail(item) {\r\n\t\t\t\tif (this.userInfo.isrest == 1) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: this.i18n.xiuxizhong,\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '../detailmap/index?oid=' + item.id,\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tgomymenus(index) {\r\n\t\t\t\tif (index == 0) {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '../Orderstatistics/index?index=1',\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tif (index == 1) {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '../Mypurse/index',\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tif (index == 2) {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '../mycomment/index',\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgouser(index) {\r\n\t\t\t\t\r\n\t\t\t\tif (index == 0) {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '../mycomment/index',\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tif (index == 1) {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '../Orderstatistics/index',\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tif (index == 2) {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '../Mypurse/index',\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tif (index == 3) {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '../set/index',\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tditu() {\r\n\t\t\t\tif (this.userInfo.isrest == 1) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: this.i18n.xiuxizhong,\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (this.pickupArray.length == 0 && this.completedArray.length == 0) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: this.i18n.zanwurenwu,\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tvar array = this.completedArray.concat(this.pickupArray)\r\n\t\t\t\tuni.setStorage({\r\n\t\t\t\t\tkey: 'alltaskarray',\r\n\t\t\t\t\tdata: array,\r\n\t\t\t\t\tsuccess() {\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl: '../Missionmap/index',\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\trelaxcancle() {\r\n\t\t\t\tthis.$refs.navbar.getstatus()\r\n\t\t\t\tthis.showrelaxok = false\r\n\t\t\t\tthis.showrelax = false\r\n\t\t\t},\r\n\t\t\tUpRest() {\r\n\t\t\t\tvar that = this\r\n\t\t\t\tvar isrest = 0\r\n\t\t\t\tif (this.userInfo.isrest == 0) {\r\n\t\t\t\t\tisrest = 1\r\n\t\t\t\t}\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '',\r\n\t\t\t\t\tmask: false\r\n\t\t\t\t});\r\n\t\t\t\tthis.NB.sendRequest('Rider.User.UpRest', {\r\n\t\t\t\t\trest: isrest\r\n\t\t\t\t}).then(data => {\r\n\t\t\t\t\t// console.log(data)\r\n\t\t\t\t\tthat.showrelax = false\r\n\t\t\t\t\tthat.GetBaseInfo()\r\n\t\t\t\t\tif (isrest == 1) {\r\n\t\t\t\t\t\tthat.showrelaxok = true\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthat.$refs.navbar.changedata(isrest)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\trelaxsure() {\r\n\t\t\t\tthis.showrelax = false\r\n\t\t\t\tthis.$refs.navbar.getstatus()\r\n\t\t\t\tthis.showrelaxok = false\r\n\t\t\t\tthis.showrelax = false\r\n\t\t\t\tconsole.log('relaxsure')\r\n\t\t\t\t// this.UpRest()\r\n\t\t\t},\r\n\t\t\tchangestatus() {\r\n\t\t\t\tif (this.userInfo.isrest == 0) {\r\n\t\t\t\t\tif (this.completedArray.length > 0 || this.pickupArray.length > 0) {\r\n\r\n\t\t\t\t\t\tthis.showrelax = true\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.UpRest()\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.UpRest()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcolseset() {\r\n\t\t\t\tthis.showset = false\r\n\t\t\t},\r\n\t\t\tset() {\r\n\t\t\t\tthis.showset = true\r\n\t\t\t\t// this.onPlayAudio(1)\r\n\t\t\t},\r\n\t\t\tshowdriver() {\r\n\t\t\t\tthis.$refs.showRight.open();\r\n\t\t\t},\r\n\t\t\tcloseDrawer() {\r\n\t\t\t\tthis.$refs.showRight.close();\r\n\t\t\t},\r\n\t\t\tchangepageindex(index) {\r\n\t\t\t\tthis.selectedIndex = index\r\n\t\t\t},\r\n\t\t\tchange(e) {\r\n\t\t\t\t// this.selectedIndex = e.detail.current\r\n\t\t\t},\r\n\t\t\tanimationfinish(e) {\r\n\t\t\t\tthis.selectedIndex = e.detail.current\r\n\t\t\t\t// this.OrdersGetList()\r\n\t\t\t},\r\n\t\t\tlogin() {\r\n\t\t\t\tvar that = this\r\n\t\t\t\tif (!this.NB.user()) {\r\n\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\turl: '../login/login'\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.NB.checktoken().then(res => {\r\n\t\t\t\t\t\tthat.GetBaseInfo()\r\n\t\t\t\t\t\tthat.OrdersGetList()\r\n\t\t\t\t\t\tthis.GetConfig()\r\n\t\t\t\t\t}).catch(data => {\r\n\t\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\t\turl: '../login/login'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsocektMethod(chatServer) {\r\n\t\t\t\tconsole.log(chatServer)\r\n\r\n\t\t\t\tvar that = this\r\n\t\t\t\tif (!this.NB.user()) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar socketTask = uni.connectSocket({\r\n\t\t\t\t\turl: chatServer,\r\n\t\t\t\t\tsuccess: () => {\r\n\t\t\t\t\t\tconsole.log('socket链接成gong')\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tsocketTask.onOpen(function(res) {\r\n\t\t\t\t\tconsole.log('WebSocket连接已打开！', res);\r\n\t\t\t\t\t// that.onSendJoinSocket()\n\t\t\t\t\tconsole.log('faxiaoxile')\n\t\t\t\t\tvar value = uni.getStorageSync('userinfo');\n\t\t\t\t\tvar mmmm = {\n\t\t\t\t\t\taction: 'join',\n\t\t\t\t\t\tuid: value.id,\n\t\t\t\t\t\ttoken: value.token,\n\t\t\t\t\t};\n\t\t\t\t\tsocketTask.send({\n\t\t\t\t\t\tdata: JSON.stringify(mmmm),\n\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\tconsole.log('fasongchengggggg ')\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfail: (error) => {\n\t\t\t\t\t\t\tconsole.log(error)\n\t\t\t\t\t\t}\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t\tsocketTask.onError(function(res) {\r\n\t\t\t\t\tconsole.log('WebSocket连接打开失败，请检查！', res);\r\n\t\t\t\t\t// uni.showModal({\r\n\t\t\t\t\t// \tcontent: JSON.stringify(res),\r\n\t\t\t\t\t// \tshowCancel: false\r\n\t\t\t\t\t// });\r\n\t\t\t\t\tuni.closeSocket();\r\n\t\t\t\t\tsocketTask = null;\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthat.socektMethod(that.sckChatServer)\r\n\t\t\t\t\t}, 3000)\r\n\t\t\t\t});\r\n\t\t\t\tsocketTask.onMessage(function(res) {\r\n\t\t\t\t\tvar msg = JSON.parse(res.data)\r\n\t\t\t\t\tconsole.log('收到服务器内容：', msg);\r\n\t\t\t\t\t// uni.showModal({\r\n\t\t\t\t\t// \tcontent: msg.action,\r\n\t\t\t\t\t// \tshowCancel: false\r\n\t\t\t\t\t// });\r\n\t\t\t\t\t//新订单（待接单）\r\n\t\t\t\t\tif (msg.action == 'orders_new') {\r\n\t\t\t\t\t\tconsole.log('新订单（待接单）')\r\n\t\t\t\t\t\tthat.onPlayAudio(1)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//新指派订单（已接单）\r\n\t\t\t\t\tif (msg.action == 'orders_dispatch') {\r\n\t\t\t\t\t\tconsole.log('新指派订单（已接单）')\r\n\t\t\t\t\t\tthat.onPlayAudio(2)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//转单通知\r\n\t\t\t\t\tif (msg.action == 'orders_trans') {\r\n\t\t\t\t\t\tconsole.log('转单通知')\r\n\t\t\t\t\t\tif (msg.type == 1) {\r\n\t\t\t\t\t\t\t//1 转单申请成功 \r\n\t\t\t\t\t\t\tthat.onPlayAudio(3)\r\n\t\t\t\t\t\t} else if (msg.type == 3) {\r\n\t\t\t\t\t\t\t//3转单申请失败\r\n\t\t\t\t\t\t\tthat.onPlayAudio(4)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//订单申请退款，取消服务\r\n\t\t\t\t\tif (msg.action == 'orders_refund') {\r\n\t\t\t\t\t\tconsole.log('订单申请退款，取消服务')\r\n\t\t\t\t\t\tthat.onPlayAudio(5)\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t// uni.onSocketOpen(function(res) {\r\n\t\t\t\t// \tconsole.log('WebSocket连接已打开！', res);\r\n\t\t\t\t// \tthat.onSendJoinSocket()\r\n\t\t\t\t// });\r\n\t\t\t\t// uni.onSocketError(function(res) {\r\n\t\t\t\t// \tconsole.log('WebSocket连接打开失败，请检查！', res);\r\n\t\t\t\t// \t// uni.showModal({\r\n\t\t\t\t// \t// \tcontent: JSON.stringify(res),\r\n\t\t\t\t// \t// \tshowCancel: false\r\n\t\t\t\t// \t// });\r\n\t\t\t\t// \tuni.closeSocket();\r\n\t\t\t\t// \tsocketTask = null;\r\n\t\t\t\t// \tsetTimeout(() => {\r\n\t\t\t\t// \t\tthat.socektMethod(that.sckChatServer)\r\n\t\t\t\t// \t}, 3000)\r\n\t\t\t\t// });\r\n\t\t\t\t// uni.onSocketClose(function (res) {\r\n\t\t\t\t//     console.log('WebSocket 已关闭！');\r\n\t\t\t\t// \tsocketTask = null;\r\n\t\t\t\t// \tsetTimeout(() => {\r\n\t\t\t\t// \t\tthat.socektMethod(that.sckChatServer)\r\n\t\t\t\t// \t}, 3000)\r\n\t\t\t\t// });\r\n\t\t\t\t// uni.onSocketMessage(function(res) {\r\n\t\t\t\t// \tvar msg = JSON.parse(res.data)\r\n\t\t\t\t// \tconsole.log('收到服务器内容：', msg);\r\n\t\t\t\t// \t// uni.showModal({\r\n\t\t\t\t// \t// \tcontent: msg.action,\r\n\t\t\t\t// \t// \tshowCancel: false\r\n\t\t\t\t// \t// });\r\n\t\t\t\t// \t//新订单（待接单）\r\n\t\t\t\t// \tif (msg.action == 'orders_new') {\r\n\t\t\t\t// \t\tconsole.log('新订单（待接单）')\r\n\t\t\t\t// \t\tthat.onPlayAudio(1)\r\n\t\t\t\t// \t}\r\n\t\t\t\t// \t//新指派订单（已接单）\r\n\t\t\t\t// \tif (msg.action == 'orders_dispatch') {\r\n\t\t\t\t// \t\tconsole.log('新指派订单（已接单）')\r\n\t\t\t\t// \t\tthat.onPlayAudio(2)\r\n\t\t\t\t// \t}\r\n\t\t\t\t// \t//转单通知\r\n\t\t\t\t// \tif (msg.action == 'orders_trans') {\r\n\t\t\t\t// \t\tconsole.log('转单通知')\r\n\t\t\t\t// \t\tif (msg.type == 1) {\r\n\t\t\t\t// \t\t\t//1 转单申请成功 \r\n\t\t\t\t// \t\t\tthat.onPlayAudio(3)\r\n\t\t\t\t// \t\t} else if (msg.type == 3) {\r\n\t\t\t\t// \t\t\t//3转单申请失败\r\n\t\t\t\t// \t\t\tthat.onPlayAudio(4)\r\n\t\t\t\t// \t\t}\r\n\t\t\t\t// \t}\r\n\t\t\t\t// \t//订单申请退款，取消服务\r\n\t\t\t\t// \tif (msg.action == 'orders_refund') {\r\n\t\t\t\t// \t\tconsole.log('订单申请退款，取消服务')\r\n\t\t\t\t// \t\tthat.onPlayAudio(5)\r\n\t\t\t\t// \t}\r\n\t\t\t\t// });\r\n\t\t\t},\r\n\t\t\tonSendJoinSocket() {\r\n\t\t\t\tconsole.log('faxiaoxile')\r\n\t\t\t\tvar value = uni.getStorageSync('userinfo');\r\n\t\t\t\tvar mmmm = {\r\n\t\t\t\t\taction: 'join',\r\n\t\t\t\t\tuid: value.id,\r\n\t\t\t\t\ttoken: value.token,\r\n\t\t\t\t};\r\n\t\t\t\tuni.sendSocketMessage({\r\n\t\t\t\t\tdata: JSON.stringify(mmmm),\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tconsole.log('fasongchengggggg ')\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (error) => {\r\n\t\t\t\t\t\tconsole.log(error)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tonPlayAudio(type) {\r\n\t\t\t\tthis.OrdersGetList();\r\n\t\t\t\tvar audio = null;\r\n\t\t\t\t// audio = uni.createInnerAudioContext();\r\n\t\t\t\taudio = uni.getBackgroundAudioManager();\r\n\t\t\t\taudio.title = this.i18n.yuyinbobao;\r\n\t\t\t\taudio.singer = this.i18n.login.title;\r\n\t\t\t\t// audio.sessionCategory = 'playback'; \r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\tif (type == 1) {\r\n\t\t\t\t\taudio.src = '../../static/music/xindan-m.mp3';\r\n\t\t\t\t} else if (type == 2) {\r\n\t\t\t\t\taudio.src = '../../static/music/paidan-m.mp3';\r\n\t\t\t\t} else if (type == 3) {\r\n\t\t\t\t\taudio.src = '../../static/music/zhuandanSucs-m.mp3';\r\n\t\t\t\t} else if (type == 4) {\r\n\t\t\t\t\taudio.src = '../../static/music/zhuandanFail-m.mp3';\r\n\t\t\t\t} else if (type == 5) {\r\n\t\t\t\t\taudio.src = '../../static/music/tuikuanCacle-m.mp3';\r\n\t\t\t\t}\r\n\t\t\t\t// #endif\r\n\t\t\t\t\r\n\t\t\t\taudio.play();\r\n\t\t\t\taudio.onEnded(function(res) {\r\n\t\t\t\t\taudio = null;\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t@import url(\"./index.css\");\r\n</style>\n","import mod from \"-!E:\\\\app-windows\\\\HBuilderX.3.6.8.20221027-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\app-windows\\\\HBuilderX.3.6.8.20221027-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!E:\\\\app-windows\\\\HBuilderX.3.6.8.20221027-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\app-windows\\\\HBuilderX.3.6.8.20221027-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\app-windows\\\\HBuilderX.3.6.8.20221027-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\app-windows\\\\HBuilderX.3.6.8.20221027-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\app-windows\\\\HBuilderX.3.6.8.20221027-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!E:\\\\app-windows\\\\HBuilderX.3.6.8.20221027-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\app-windows\\\\HBuilderX.3.6.8.20221027-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!E:\\\\app-windows\\\\HBuilderX.3.6.8.20221027-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\app-windows\\\\HBuilderX.3.6.8.20221027-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\app-windows\\\\HBuilderX.3.6.8.20221027-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\app-windows\\\\HBuilderX.3.6.8.20221027-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\app-windows\\\\HBuilderX.3.6.8.20221027-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1677650177882\n      var cssReload = require(\"E:/app-windows/HBuilderX.3.6.8.20221027-alpha/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}