(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["package-shopManager/pages/specManager/specServiceManager"],{359:function(t,e,n){"use strict";(function(t){n(5),n(6);a(n(4));var e=a(n(360));function a(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=n,t(e.default)}).call(this,n(1)["createPage"])},360:function(t,e,n){"use strict";n.r(e);var a=n(361),i=n(363);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n(365);var o,c=n(25),d=Object(c["default"])(i["default"],a["render"],a["staticRenderFns"],!1,null,null,null,!1,a["components"],o);d.options.__file="package-shopManager/pages/specManager/specServiceManager.vue",e["default"]=d.exports},361:function(t,e,n){"use strict";n.r(e);var a=n(362);n.d(e,"render",(function(){return a["render"]})),n.d(e,"staticRenderFns",(function(){return a["staticRenderFns"]})),n.d(e,"recyclableRender",(function(){return a["recyclableRender"]})),n.d(e,"components",(function(){return a["components"]}))},362:function(t,e,n){"use strict";var a;n.r(e),n.d(e,"render",(function(){return i})),n.d(e,"staticRenderFns",(function(){return o})),n.d(e,"recyclableRender",(function(){return r})),n.d(e,"components",(function(){return a}));try{a={uniPopup:function(){return n.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(n.bind(null,642))},uniPopupDialog:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-popup/components/uni-popup-dialog/uni-popup-dialog")]).then(n.bind(null,649))}}}catch(c){if(-1===c.message.indexOf("Cannot find module")||-1===c.message.indexOf(".vue"))throw c;console.error(c.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var i=function(){var t=this,e=t.$createElement;t._self._c},r=!1,o=[];i._withStripped=!0},363:function(t,e,n){"use strict";n.r(e);var a=n(364),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},364:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=function(){n.e("components/wybar/wyBar").then(function(){return resolve(n(542))}.bind(null,n)).catch(n.oe)},i={components:{wybar:a},computed:{i18n:function(){return this.$t("index")}},data:function(){return{spec:"",price:"",scrollHeight:0,data:[],isChinese:!0,isAdd:!0,productID:"",newSpecArr:[],shuxing:"",curContent:"",changeIndex:0,changeChildrenIndex:0,popTitle:"",popPlaceHolder:""}},onLoad:function(e){var n=t.getSystemInfoSync();if(this.navHeight=64+n.statusBarHeight,this.scrollHeight=n.windowHeight-this.navHeight-44,e.productID>0)this.isAdd=!1,this.productID=e.productID,this.getSpecDetail(),console.log(111);else{this.isAdd=!0;var a=JSON.parse(e.guige);console.log(this.guigeArr),a.length>0?this.data=a:this.data=[{price:"",th_attr_name:"",attr_name:"",children:[{price:"",th_attr_name:"",attr_name:""}]}]}},methods:{inputDialogToggle:function(t,e,n){this.changeIndex=e,this.changeChildrenIndex=n,this.curContent=t,-1==this.changeChildrenIndex?(this.popTitle="输入规格参数",this.popPlaceHolder="请输入规格参数"):(this.popTitle="输入属性参数",this.popPlaceHolder="请输入属性参数"),console.log(this.changeIndex,this.changeChildrenIndex,t),this.$refs.inputDialog.open()},dialogInputConfirm:function(t){console.log(t),-1==this.changeChildrenIndex?this.isChinese?this.data[this.changeIndex].attr_name=t:this.data[this.changeIndex].th_attr_name=t:this.isChinese?this.data[this.changeIndex].children[this.changeChildrenIndex].attr_name=t:this.data[this.changeIndex].children[this.changeChildrenIndex].th_attr_name=t,console.log(this.data)},back:function(){t.navigateBack()},getSpecDetail:function(){var t=this,e={product_id:t.productID};this.http.sendRequest("MerchantStoreProductAttr.Read",e).then((function(e){if(0==e.code){console.log(e.info[0]);for(var n=e.info[0],a=0;a<n.length;a++){var i=n[a],r={id:i.id,price:i.price,th_attr_name:i.th_attr_name,attr_name:i.attr_name,children:i.children};t.data.push(r)}console.log(t.data)}}))},save:function(){console.log(this.productID),console.log(this.data);for(var e=this,n={},a=[],i=[],r=0;r<e.data.length;r++){var o=e.data[r];o.id>0?i.push(o):a.push(o)}e.productID>0?i.length>0?(n={product_id:this.productID,attr:JSON.stringify(i)},e.http.sendRequest("MerchantStoreProductAttr.Update",n).then((function(n){console.log(n),0==n.code&&(t.$emit("addSpecDone",e.data),console.log(222),e.uploadNewData(a))}))):e.uploadNewData(a):(t.$emit("addSpecDone",e.data),e.back())},uploadNewData:function(e){var n=this;if(e.length>0){var a={product_id:n.productID,attr:JSON.stringify(e)};n.http.sendRequest("MerchantStoreProductAttr.Save",a).then((function(e){0==e.code?(t.$emit("addSpecDone",n.data),n.back()):console.log(e)}))}else console.log(111),t.$emit("addSpecDone",n.data),this.back()},addShuxing:function(t){var e=this.data[t],n={price:"",th_attr_name:"",attr_name:""};e.children.push(n)},inputPrice:function(t){console.log(t.target.id,t.detail.value);var e=t.target.id[0],n=this.data[e],a=t.target.id[2],i=n.children[a];console.log(i),t.detail.value.length>0?i.price=t.detail.value:i.price="0",console.log(i)},inputSpec:function(t){var e=this.data[t.target.id];this.isChinese?e.attr_name=t.detail.value:e.th_attr_name=t.detail.value},inputSpecPrice:function(t){var e=this.data[t.target.id];t.detail.value.length>0?e.price=t.detail.value:e.price="0"},inputShuxing:function(t){console.log(t.target.id);var e=t.target.id[0],n=this.data[e],a=t.target.id[2],i=n.children[a];this.isChinese?i.attr_name=t.detail.value:i.th_attr_name=t.detail.value},addSpec:function(){this.data.push({price:"",th_attr_name:"",attr_name:"",children:[{price:"",th_attr_name:"",attr_name:""}]})},deleteSpec:function(e){var n=this;t.showModal({title:"",content:n.i18n.shop.deletetip,success:function(t){t.confirm?n.delete(e):t.cancel}})},delete:function(t){var e=this;if(this.productID>0){var n=e.data[t],a={product_attr_id:n.id};e=this;this.http.sendRequest("MerchantStoreProductAttr.Delete",a).then((function(n){0==n.code&&(e.data.splice(t,1),0==e.data.length&&(e.data=[{price:"",th_attr_name:"",attr_name:"",children:[{price:"",th_attr_name:"",attr_name:""}]}]))}))}else this.data.splice(t,1),0==this.data.length&&(this.data=[{price:"",th_attr_name:"",attr_name:"",children:[{price:"",th_attr_name:"",attr_name:""}]}])},changeChinese:function(){this.isChinese=!0},changeTh:function(){this.isChinese=!1}}};e.default=i}).call(this,n(1)["default"])},365:function(t,e,n){"use strict";n.r(e);var a=n(366),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},366:function(t,e,n){}},[[359,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/package-shopManager/pages/specManager/specServiceManager.js.map