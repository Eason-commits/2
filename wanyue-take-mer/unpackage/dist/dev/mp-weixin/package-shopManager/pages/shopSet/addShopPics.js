(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["package-shopManager/pages/shopSet/addShopPics"],{383:function(t,n,e){"use strict";(function(t){e(5),e(6);i(e(4));var n=i(e(384));function i(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=e,t(n.default)}).call(this,e(1)["createPage"])},384:function(t,n,e){"use strict";e.r(n);var i=e(385),r=e(387);for(var o in r)"default"!==o&&function(t){e.d(n,t,(function(){return r[t]}))}(o);e(389);var a,s=e(25),c=Object(s["default"])(r["default"],i["render"],i["staticRenderFns"],!1,null,null,null,!1,i["components"],a);c.options.__file="package-shopManager/pages/shopSet/addShopPics.vue",n["default"]=c.exports},385:function(t,n,e){"use strict";e.r(n);var i=e(386);e.d(n,"render",(function(){return i["render"]})),e.d(n,"staticRenderFns",(function(){return i["staticRenderFns"]})),e.d(n,"recyclableRender",(function(){return i["recyclableRender"]})),e.d(n,"components",(function(){return i["components"]}))},386:function(t,n,e){"use strict";var i;e.r(n),e.d(n,"render",(function(){return r})),e.d(n,"staticRenderFns",(function(){return a})),e.d(n,"recyclableRender",(function(){return o})),e.d(n,"components",(function(){return i}));var r=function(){var t=this,n=t.$createElement;t._self._c},o=!1,a=[];r._withStripped=!0},387:function(t,n,e){"use strict";e.r(n);var i=e(388),r=e.n(i);for(var o in i)"default"!==o&&function(t){e.d(n,t,(function(){return i[t]}))}(o);n["default"]=r.a},388:function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=function(){e.e("components/wybar/wyBar").then(function(){return resolve(e(542))}.bind(null,e)).catch(e.oe)},r={components:{wybar:i},computed:{i18n:function(){return this.$t("index")}},data:function(){return{imgList:[],imgUrls:[],maxCount:5}},onShow:function(){},onLoad:function(){this.getData()},methods:{getData:function(){var t=this;t.http.sendRequest("MerchantStore.Read").then((function(n){var e=n.info[0],i=e.environment;t.imgList=i;for(var r=0;r<i.length;r++)t.imgUrls.push(i[r])}))},back:function(){t.navigateBack()},save:function(){if(0==this.imgList.length)return t.showLoading({title:this.i18n.shop.pictip}),void setTimeout((function(){t.hideLoading()}),2e3);var n=this,e=t.getStorageSync("userinfo"),i={};e&&(i.uid=e.uid,i.token=e.token);var r=0;if(n.imgUrls.length>0&&(r=n.imgUrls.length),r>=n.imgList.length)t.navigateBack();else{t.showLoading({title:this.i18n.mine.shangchuanzhong,mask:!1});for(var o=r;o<n.imgList.length;o++)t.uploadFile({url:getApp().globalData.weburl+"api/?s=Merchant.Upload.Upload",filePath:n.imgList[o],name:"file",formData:i,success:function(e){t.hideLoading();var i=JSON.parse(e.data),r=i.data.info[0].url_all;n.imgUrls.push(r),n.imgUrls.length==n.imgList.length&&n.submit()},fail:function(n){t.hideLoading()}})}},submit:function(){var n=this,e={environment:JSON.stringify(n.imgUrls)};this.http.sendRequest("MerchantStore.Update",e).then((function(n){0==n.code&&t.navigateBack()}))},delateImage:function(n){var e=this;t.showModal({title:"",content:e.i18n.shop.deletetip,success:function(t){t.confirm?e.delete(n):t.cancel}})},delete:function(t){var n=this;if(n.imgUrls.length>t){n.imgUrls.splice(t,1),console.log(n.imgUrls);var e={environment:JSON.stringify(n.imgUrls)};this.http.sendRequest("MerchantStore.Update",e).then((function(e){0==e.code&&n.imgList.splice(t,1)}))}else n.imgList.splice(t,1)},showBigImg:function(n){var e=this;t.previewImage({urls:e.imgList,current:n})},doAddImage:function(){var n=this;t.chooseImage({count:n.maxCount-n.imgList.length,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(t){for(var e=t.tempFilePaths,i=0;i<e.length;i++){var r=e[i];n.imgList.length<5&&n.imgList.push(r)}}})}}};n.default=r}).call(this,e(1)["default"])},389:function(t,n,e){"use strict";e.r(n);var i=e(390),r=e.n(i);for(var o in i)"default"!==o&&function(t){e.d(n,t,(function(){return i[t]}))}(o);n["default"]=r.a},390:function(t,n,e){}},[[383,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/package-shopManager/pages/shopSet/addShopPics.js.map