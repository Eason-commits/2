(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["package-publishOrder/pages/postOrderDetail"],{253:function(e,n,t){"use strict";(function(e){t(5),t(6);o(t(4));var n=o(t(254));function o(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=t,e(n.default)}).call(this,t(1)["createPage"])},254:function(e,n,t){"use strict";t.r(n);var o=t(255),r=t(257);for(var i in r)"default"!==i&&function(e){t.d(n,e,(function(){return r[e]}))}(i);t(259);var a,s=t(25),c=Object(s["default"])(r["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],a);c.options.__file="package-publishOrder/pages/postOrderDetail.vue",n["default"]=c.exports},255:function(e,n,t){"use strict";t.r(n);var o=t(256);t.d(n,"render",(function(){return o["render"]})),t.d(n,"staticRenderFns",(function(){return o["staticRenderFns"]})),t.d(n,"recyclableRender",(function(){return o["recyclableRender"]})),t.d(n,"components",(function(){return o["components"]}))},256:function(e,n,t){"use strict";var o;t.r(n),t.d(n,"render",(function(){return r})),t.d(n,"staticRenderFns",(function(){return a})),t.d(n,"recyclableRender",(function(){return i})),t.d(n,"components",(function(){return o}));var r=function(){var e=this,n=e.$createElement;e._self._c},i=!1,a=[];r._withStripped=!0},257:function(e,n,t){"use strict";t.r(n);var o=t(258),r=t.n(o);for(var i in o)"default"!==i&&function(e){t.d(n,e,(function(){return o[e]}))}(i);n["default"]=r.a},258:function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(){Promise.all([t.e("common/vendor"),t.e("components/payview/payview")]).then(function(){return resolve(t(619))}.bind(null,t)).catch(t.oe)},r={components:{payView:o},data:function(){return{scrollHeight:0,bottomViewHeight:76,navHeight:0,showFeeDetail:!1,orderID:"",orderMsg:{},priceDic:{},cateName:"",desc:"",showpay:!1,windowHeight:0,topSpace:0,addTipMoney:0}},computed:{i18n:function(){return this.$t("index")}},onReady:function(){var n=e.getSystemInfoSync();console.log(n.safeArea.bottom),this.windowHeight=n.windowHeight,this.navHeight=64+n.statusBarHeight,this.scrollHeight=n.windowHeight},onLoad:function(e){this.orderID=e.ID},onShow:function(){this.requestData()},methods:{requestData:function(){var e=this;this.http.sendAppRequest("Orders.GetDetail",{orderid:e.orderID}).then((function(n){0==n.code&&(e.orderMsg=n.info[0],e.orderType=e.orderMsg.type,e.priceDic=e.orderMsg.extra.computed,e.priceDic.money_time=e.orderMsg.extra.timemoney,e.cateName=e.orderMsg.extra.catename,3==e.orderMsg.status||4==e.orderMsg.status?e.topSpace=0:e.topSpace=-60,console.log(e.orderMsg))}))},back:function(){e.navigateBack()},cancelOrder:function(){var n=this;e.showModal({title:"",content:n.i18n.postorder.cancelsuretip,success:function(e){e.confirm?n.cancelSure():e.cancel}})},cancelSure:function(){var n={orderid:this.orderMsg.id};console.log(n),this.http.sendAppRequest("Orders.Cancel",n).then((function(n){0==n.code&&e.navigateBack({})}))},deleteOrder:function(){var n=this;e.showModal({title:"",content:n.i18n.postorder.cancelsuretip,success:function(e){e.confirm?n.deleteSure():e.cancel}})},deleteSure:function(){var n={orderid:this.orderMsg.id};console.log(n),this.http.sendAppRequest("Orders.Del",n).then((function(n){0==n.code&&e.navigateBack({})}))},pay:function(){this.addTipMoney=0,console.log(2121211),this.showpay=!0},refundOrder:function(){e.navigateTo({url:"refundOrder/applyRefund?orderID="+this.orderMsg.id+"&orderno="+this.orderMsg.orderno+"&money="+this.orderMsg.money})},openPriceDetail:function(){this.showFeeDetail=!this.showFeeDetail},envalueOrder:function(){e.navigateTo({url:"orderEvaluate?orderID="+this.orderMsg.id})},buyAgain:function(){e.navigateTo({url:"newOrder"})},closePayView:function(n){console.log(n);var t=this;if(t.showpay=!1,0==n);else{var o="",r={is_mer:"1",orderid:t.orderID,openid:e.getStorageSync("openid"),payid:2==n.id?"3":n.id};console.log(t.addTipMoney),t.addTipMoney>0?(o="Orders.Fee",r.fee=t.addTipMoney):o="Orders.Repay",t.http.sendAppRequest(o,r).then((function(o){0==o.code&&(1==n.id?e.requestPayment({provider:"alipay",orderInfo:o.info[0].ali.orderinfo,success:function(n){e.showToast({title:"支付成功",duration:2e3}),console.log("success:"+JSON.stringify(n)),t.requestData()},fail:function(e){console.log("fail:"+JSON.stringify(e))}}):2==n.id?e.requestPayment({provider:"wxpay",timeStamp:o.info[0].small.timeStamp,nonceStr:o.info[0].small.nonceStr,package:o.info[0].small.package,signType:o.info[0].small.signType,paySign:o.info[0].small.sign,success:function(n){e.showToast({title:"支付成功",duration:2e3}),console.log(n),t.requestData()},fail:function(e){console.log(e)}}):(e.showToast({title:"支付成功",duration:2e3}),t.requestData()))}))}}}};n.default=r}).call(this,t(1)["default"])},259:function(e,n,t){"use strict";t.r(n);var o=t(260),r=t.n(o);for(var i in o)"default"!==i&&function(e){t.d(n,e,(function(){return o[e]}))}(i);n["default"]=r.a},260:function(e,n,t){}},[[253,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/package-publishOrder/pages/postOrderDetail.js.map