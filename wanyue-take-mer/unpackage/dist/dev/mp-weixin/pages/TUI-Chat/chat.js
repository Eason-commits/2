(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/TUI-Chat/chat"],{91:function(e,t,n){"use strict";(function(e){n(5),n(6);o(n(4));var t=o(n(92));function o(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=n,e(t.default)}).call(this,n(1)["createPage"])},92:function(e,t,n){"use strict";n.r(t);var o=n(93),r=n(95);for(var a in r)"default"!==a&&function(e){n.d(t,e,(function(){return r[e]}))}(a);n(97);var i,s=n(25),u=Object(s["default"])(r["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],i);u.options.__file="pages/TUI-Chat/chat.vue",t["default"]=u.exports},93:function(e,t,n){"use strict";n.r(t);var o=n(94);n.d(t,"render",(function(){return o["render"]})),n.d(t,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(t,"components",(function(){return o["components"]}))},94:function(e,t,n){"use strict";var o;n.r(t),n.d(t,"render",(function(){return r})),n.d(t,"staticRenderFns",(function(){return i})),n.d(t,"recyclableRender",(function(){return a})),n.d(t,"components",(function(){return o}));var r=function(){var e=this,t=e.$createElement;e._self._c},a=!1,i=[];r._withStripped=!0},95:function(e,t,n){"use strict";n.r(t);var o=n(96),r=n.n(o);for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);t["default"]=r.a},96:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(18));function r(e){return e&&e.__esModule?e:{default:e}}var a=function(){n.e("components/tui-chat/message-list/index").then(function(){return resolve(n(563))}.bind(null,n)).catch(n.oe)},i=function(){n.e("components/tui-chat/message-input/index").then(function(){return resolve(n(570))}.bind(null,n)).catch(n.oe)},s=(getApp(),{components:{TUIMessageList:a,TUIMessageInput:i},computed:{i18n:function(){return this.$t("index")}},props:{},data:function(){return{conversationName:"",conversation:{},messageList:[],isShow:!1,showChat:!0,conversationID:"",videoPlay:!1,videoMessage:{},config:{sdkAppID:"",userID:"",userSig:"",type:1,tim:null},orderID:"",orderNumber:""}},created:function(){var t=this;e.$on("videoPlayerHandler",(function(e){t.videoPlay=e.isPlay,t.videoMessage=e.message}))},onLoad:function(t){var n=this;o.default.log(" TUI-chat | onLoad | conversationID: ".concat(t.conversationID));var r=t.conversationID;this.setData({conversationID:r}),e.$TUIKit.setMessageRead({conversationID:r}).then((function(){o.default.log("TUI-chat | setMessageRead  | ok")})),e.$TUIKit.getConversationProfile(r).then((function(e){var t=e.data.conversation;n.conversation=t,n.setData({conversationName:n.getConversationName(t),isShow:"GROUP"===t.type})})),this.getOrderData()},mounted:function(){},onUnload:function(){},methods:{checkOrder:function(){console.log(11111),e.navigateTo({url:"../index/indexOrderDetail?id="+this.orderID+"&from=1"})},getOrderData:function(){var e=this.conversationID.substr(9,this.conversationID.length-9),t=this;this.http.sendRequest("MerchantOrder.GetUserOrder",{users_id:e}).then((function(e){if(console.log(e),0==e.code){var n=e.info[0];t.orderID=n.id,t.orderNumber=n.order_id}}))},stopVideoHander:function(){this.videoPlay=!1},getConversationName:function(e){return"@TIM#SYSTEM"===e.type?(this.setData({showChat:!1}),"系统通知"):"C2C"===e.type?e.remark||e.userProfile.nick||e.userProfile.userID:"GROUP"===e.type?e.groupProfile.name||e.groupProfile.groupID:void 0},sendMessage:function(e){this.$refs.messageList.updateMessageList(e.detail.message),this.sendnotifacation(e.detail.message.payload.text)},sendnotifacation:function(e){var t=this;t.http.sendRequest("Push.Send",{to:t.conversationID.replace("C2C",""),content:e}).then((function(e){}))},triggerClose:function(){this.showChat&&this.$refs.messageInput.handleClose()},goBack:function(){var t=getCurrentPages();"pages/TUI-Conversation/create-conversation/create"===t[t.length-2].route||"pages/TUI-Group/create-group/create"===t[t.length-2].route||"pages/TUI-Group/join-group/join"===t[t.length-2].route?e.navigateBack({delta:2}):e.navigateBack({delta:1}),e.$TUIKit.setMessageRead({conversationID:this.conversationID}).then((function(){}))}}});t.default=s}).call(this,n(1)["default"])},97:function(e,t,n){"use strict";n.r(t);var o=n(98),r=n.n(o);for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);t["default"]=r.a},98:function(e,t,n){}},[[91,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/TUI-Chat/chat.js.map