{"version":3,"sources":["uni-app:///main.js","webpack:////Users/wangminxin/Desktop/外卖/商家/wanyue-take-mer/pages/index/index.vue?81c5","webpack:////Users/wangminxin/Desktop/外卖/商家/wanyue-take-mer/pages/index/index.vue?0105","webpack:////Users/wangminxin/Desktop/外卖/商家/wanyue-take-mer/pages/index/index.vue?9d91","webpack:////Users/wangminxin/Desktop/外卖/商家/wanyue-take-mer/pages/index/index.vue?1398","uni-app:///pages/index/index.vue","webpack:////Users/wangminxin/Desktop/外卖/商家/wanyue-take-mer/pages/index/index.vue?3b28"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped"],"mappings":"8HAAA,KAE2D,KAC3D,YACA,W,mDAFAA,GAAGC,kCAAoCC,EAGvCC,EAAWC,a,+DCLX,sHACIC,EADJ,QASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,wBACZ,aAAAF,E,yCCvBf,sQ,gCCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,IAEjBC,GAAmB,EACnBC,EAAkB,GACtBR,EAAOS,eAAgB,G,gCCRvB,6GAAk2B,eAAG,G,6OC6Fr2B,QACA,gBACA,kC,EAEA,CACA,YACA,cAEA,KAJA,WAKA,OACA,WACA,eACA,UACA,WACA,kBACA,WACA,QACA,SAEA,iBACA,oBACA,oBACA,YACA,cACA,YACA,YACA,oBAGA,UACA,KADA,WAEA,0BAGA,QA9BA,WA+BA,4BACA,8FACA,0CACA,gDACA,kEACA,qEAEA,wBAEA,OAxCA,WAyCA,sBACA,mCACA,eACA,YACA,gBACA,oBACA,qBAEA,iBAIA,OArDA,WAqDA,WACA,+BAEA,YACA,qBACA,iBAKA,YACA,uBAKA,sBACA,cACA,oBAgBA,WACA,sCACA,oBAGA,iCACA,iBACA,iBACA,iBACA,iBACA,iBACA,qBAKA,SAvGA,WAwGA,4BAEA,SACA,YADA,WAEA,WACA,mBACA,oBACA,+BACA,oBAEA,KALA,SAKA,GACA,0BAEA,qBACA,4BAIA,UAhBA,SAgBA,GACA,WACA,kCACA,QACA,uBAGA,aAvBA,WAwBA,WACA,mEACA,cACA,aACA,gBAEA,kBACA,0BACA,0BACA,kBACA,yBACA,cACA,kBAMA,cA1CA,WA2CA,WACA,6DAEA,mCAEA,GADA,qBACA,YACA,2BACA,iCACA,gCAEA,cACA,aACA,qBAIA,aA3DA,SA2DA,GACA,eACA,WACA,iBAGA,uBACA,MACA,mBACA,gCAIA,sBACA,iCACA,mCACA,GACA,kBACA,UACA,eAEA,QACA,uBACA,oBACA,kCAEA,iBACA,qBAIA,uBACA,sCAKA,UACA,UAKA,uBACA,8BAEA,UAKA,yBACA,yBACA,0BACA,0BACA,iCAGA,yBACA,wBACA,iBACA,iBACA,kCACA,yCACA,sCASA,aApIA,SAoIA,GACA,WACA,yDACA,OACA,kBACA,cACA,gBACA,oCACA,eACA,gCAEA,mCAGA,0BAOA,YAzJA,SAyJA,GACA,mCACA,eAIA,WAEA,gCACA,mCACA,+BAGA,iEAYA,SACA,uBACA,YAGA,iBAvLA,WAwLA,0BACA,mCACA,GACA,kBACA,UACA,eAEA,qBACA,uBACA,oBACA,kCAEA,iBACA,mBAKA,cA1MA,WA2MA,iDACA,kBAEA,yDACA,kBAEA,wDACA,kBAEA,mDACA,mBAGA,cAxNA,WAyNA,UACA,0BAGA,KA7NA,aAkOA,gBAlOA,aA0OA,OA1OA,aAkPA,KAlPA,aA4PA,aA5PA,WA6PA,oEACA,cACA,gBACA,oBACA,kBACA,QACA,eAGA,qBACA,eAOA,cA9QA,SA8QA,KACA,eACA,cACA,6DAGA,OApRA,WAqRA,aACA,cACA,uCAGA,cACA,wBAKA,OAhSA,WAiSA,aAOA,cACA,uCAIA,cACA,wBAIA,MAlTA,WAmTA,cACA,wBAGA,eAvTA,WAyTA,8BACA,YACA,oBACA,gBAEA,iBACA,mBAIA,YAnUA,SAmUA,GACA,gBACA,KACA,qCACA,KACA,mCACA,KACA,kCACA,KACA,mCACA,MACA,sCAGA,gBAjVA,SAiVA,GACA,kC,0EC7hBA,6GAAqtC,eAAG,G","file":"pages/index/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;import '@dcloudio/vue-cli-plugin-uni/packages/uni-cloud/dist/index.js';\nimport Vue from 'vue'\nimport Page from './pages/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=57280228&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/index/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=57280228&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<view class=\"topImageView\" :style=\"'height:' + topHeight + 'px;'\">\r\n\t\t\t<view class=\"nav row\" :style=\"'margin-top:' + marginTopHeight + 'px;'\">\r\n\t\t\t\t<image class=\"nav_left\" @click=\"doScan()\" src=\"../../static/scan@2x.png\" mode=\"aspectFit\">\r\n\t\t\t\t</image>\r\n\t\t\t\t<text class=\"nav_title\">{{i18n.index.orderM}}</text>\r\n\t\t\t\t<view class=\"nav_right\" @click=\"doZiti()\">{{i18n.index.ziti}}</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"row\" style=\"width: 100%;height: 80px;\">\r\n\t\t\t\t<view class=\"tab_sel\" @click=\"tabbarClick(0)\">\r\n\t\t\t\t\t<view>{{waitNum}}</view>\r\n\t\t\t\t\t<view>{{i18n.index.waitreceive}}</view>\r\n\t\t\t\t\t<image v-show=\"tabIndex==0\" class=\"content_img\" src=\"../../static/homeuparrow@2x.png\"\r\n\t\t\t\t\t\tmode=\"aspectFit\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"tab_sel\" @click=\"tabbarClick(1)\">\r\n\t\t\t\t\t<view>{{nottransportNum}}</view>\r\n\t\t\t\t\t<view>{{i18n.index.waitsong}}</view>\r\n\t\t\t\t\t<image v-show=\"tabIndex==1\" class=\"content_img\" src=\"../../static/homeuparrow@2x.png\"\r\n\t\t\t\t\t\tmode=\"aspectFit\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"tab_sel\" @click=\"tabbarClick(2)\">\r\n\t\t\t\t\t<view>{{transportingNum}}</view>\r\n\t\t\t\t\t<view>{{i18n.index.songing}}</view>\r\n\t\t\t\t\t<image v-show=\"tabIndex==2\" class=\"content_img\" src=\"../../static/homeuparrow@2x.png\"\r\n\t\t\t\t\t\tmode=\"aspectFit\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"tab_sel\" @click=\"tabbarClick(3)\">\r\n\t\t\t\t\t<view>{{doneNum}}</view>\r\n\t\t\t\t\t<view>{{i18n.index.done}}</view>\r\n\t\t\t\t\t<image v-show=\"tabIndex==3\" class=\"content_img\" src=\"../../static/homeuparrow@2x.png\"\r\n\t\t\t\t\t\tmode=\"aspectFit\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"tab_sel\" @click=\"tabbarClick(4)\">\r\n\t\t\t\t\t<view>{{refundNum}}</view>\r\n\t\t\t\t\t<view>{{i18n.index.refund}}</view>\r\n\t\t\t\t\t<image v-show=\"tabIndex==4\" class=\"content_img\" src=\"../../static/homeuparrow@2x.png\"\r\n\t\t\t\t\t\tmode=\"aspectFit\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- 安卓手机for循环形式无法读取订单个数，所以注释掉 -->\r\n\t\t\t\t<!-- <view v-for=\"(item,index) in tabbar\" :key=\"index\" class=\"tab_sel\"\r\n\t\t\t\t\t\t@click=\"tabbarClick(index)\">\r\n\t\t\t\t\t\t\t<view>{{item.number}}</view>\r\n\t\t\t\t\t\t\t<view>{{item.name}}</view> \r\n\t\t\t\t\t\t\t<image v-show=\"index == tabIndex\" class=\"content_img\" src=\"../../static/home/homeuparrow@2x.png\" mode=\"aspectFit\"></image>\r\n\t\t\t\t\t</view> -->\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<block v-if=\"islogin\">\r\n\t\t\t<swiper style=\"width: 100%;background-color: #f5f6f7;\" :style=\"'height:' + scrollHeight + 'px;'\"\r\n\t\t\t\t@animationfinish=\"animationfinish\" :current=\"tabIndex\">\r\n\t\t\t\t<swiper-item>\r\n\t\t\t\t\t<orderListV ref=\"waitReceive\" :islogin=\"islogin\" :height=\"scrollHeight\" :typeString=\"1\"\r\n\t\t\t\t\t\t@cellItemClick=\"cellItemClick\">\r\n\t\t\t\t\t</orderListV>\r\n\t\t\t\t</swiper-item>\r\n\t\t\t\t<swiper-item>\r\n\t\t\t\t\t<orderListV ref=\"waitRider\" :islogin=\"islogin\" :height=\"scrollHeight\" :typeString=\"2\"\r\n\t\t\t\t\t\t@cellItemClick=\"cellItemClick\">\r\n\t\t\t\t\t</orderListV>\r\n\t\t\t\t</swiper-item>\r\n\t\t\t\t<swiper-item>\r\n\t\t\t\t\t<orderListV ref=\"ridering\" :islogin=\"islogin\" :height=\"scrollHeight\" :typeString=\"3\"\r\n\t\t\t\t\t\t@cellItemClick=\"cellItemClick\">\r\n\t\t\t\t\t</orderListV>\r\n\t\t\t\t</swiper-item>\r\n\t\t\t\t<swiper-item>\r\n\t\t\t\t\t<orderListV ref=\"orderDone\" :islogin=\"islogin\" :height=\"scrollHeight\" :typeString=\"4\"\r\n\t\t\t\t\t\t@cellItemClick=\"cellItemClick\">\r\n\t\t\t\t\t</orderListV>\r\n\t\t\t\t</swiper-item>\r\n\t\t\t\t<swiper-item>\r\n\t\t\t\t\t<orderListV ref=\"orderRefund\" :islogin=\"islogin\" :height=\"scrollHeight\" :typeString=\"5\"\r\n\t\t\t\t\t\t@cellItemClick=\"cellItemClick\">\r\n\t\t\t\t\t</orderListV>\r\n\t\t\t\t</swiper-item>\r\n\t\t\t</swiper>\r\n\t\t</block>\r\n\t\t<block v-else>\r\n\t\t\t<view class=\"logintip\" @click=\"login()\">{{i18n.mine.logintip}}</view>\r\n\t\t</block>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport orderListV from '@/components/orderlist/orderListView.vue'\r\n\t// #ifdef APP-PLUS\r\n\timport printer from \"@/common/util/printer.js\"\r\n\tlet printModule = uni.requireNativePlugin(\"PrintModule\")\r\n\tlet globalEvent = uni.requireNativePlugin('globalEvent');\r\n\tvar platform = uni.getSystemInfoSync().platform\r\n\t// #endif\r\n\tvar amapFile = require('../../libs/amap-wx.130.js'); //如：..­/..­/libs/amap-wx.js\r\n\tvar myAmapFun = new amapFile.AMapWX({\r\n\t\tkey: getApp().globalData.amapKey\r\n\t});\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\torderListV\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tislogin: false,\r\n\t\t\t\tscrollHeight: 0,\r\n\t\t\t\ttabbar: [],\r\n\t\t\t\ttabIndex: 0,\r\n\t\t\t\torderNumberDic: {},\r\n\t\t\t\tcurAdsMsg: {\r\n\t\t\t\t\tname: '',\r\n\t\t\t\t\tdesc: ''\r\n\t\t\t\t},\r\n\t\t\t\tsckChatServer: '',\r\n\t\t\t\tnottransportNum: '0',\r\n\t\t\t\ttransportingNum: '0',\r\n\t\t\t\tdoneNum: '0',\r\n\t\t\t\trefundNum: '0',\r\n\t\t\t\twaitNum: '0',\r\n\t\t\t\ttopHeight: 0,\r\n\t\t\t\tmarginTopHeight: 0,\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\ti18n() {\r\n\t\t\t\treturn this.$t('index')\r\n\t\t\t},\r\n\t\t},\r\n\t\tonReady() {\r\n\t\t\tvar res = uni.getSystemInfoSync()\r\n\t\t\tthis.marginTopHeight = getApp().globalData.menuButtonHeight + getApp().globalData.statusBarHeight\r\n\t\t\tthis.topHeight = this.marginTopHeight + 44 + 80\r\n\t\t\tthis.scrollHeight = res.windowHeight - this.topHeight\r\n\t\t\tthis.tabbar = [this.i18n.index.waitreceive, this.i18n.index.waitsong,\r\n\t\t\t\tthis.i18n.index.songing, this.i18n.index.done, this.i18n.index.refund\r\n\t\t\t]\n\t\t\tconsole.log('onready')\r\n\t\t},\r\n\t\tonShow() {\n\t\t\tconsole.log('onshow')\r\n\t\t\tvar value = uni.getStorageSync('userinfo')\r\n\t\t\tconsole.log(value)\r\n\t\t\tif (value && value.uid > 0) {\r\n\t\t\t\tthis.islogin = true\r\n\t\t\t\tthis.requestCount()\r\n\t\t\t\tthis.getUnreadMsg()\r\n\t\t\t} else {\r\n\t\t\t\tthis.islogin = false\r\n\t\t\t}\r\n\t\t\t// console.log(this.islogin)\r\n\t\t},\r\n\t\tonLoad() {\n\t\t\tvar value = uni.getStorageSync('userinfo')\n\t\t\t// console.log(value)\n\t\t\tif (value && value.uid > 0) {\n\t\t\t\tthis.getHomeConfig()\n\t\t\t\tthis.islogin = true\n\t\t\t\t// #ifdef APP-PLUS\n\t\t\t\tthis.getclientID()\n\t\t\t\t// #endif\n\t\t\t} else {\n\t\t\t\tuni.reLaunch({\n\t\t\t\t\turl: '../login/login'\n\t\t\t\t})\n\t\t\t\t// this.islogin = false\n\t\t\t}\r\n\t\t\t//获取定位许可\n\t\t\tthis.getLocationsss()\r\n\t\t\tif (this.islogin) {\r\n\t\t\t\tthis.requestCount()\n\t\t\t\t// #ifdef APP-PLUS\n\t\t\t\t this.getclientID()\n\t\t\t\tif(getApp().globalData.platform == 'android'){\n\t\t\t\t\tthis.initListeners()\n\t\t\t\t\tthis.init()\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// #endif\r\n\t\t\t}else{\n\t\t\t\t// #ifdef APP-PLUS\n\t\t\t\tif(getApp().globalData.platform == 'android'){\n\t\t\t\t\tthis.deInit()\n\t\t\t\t}\n\t\t\t\t// #endif\n\t\t\t}\r\n\t\t\tvar that = this\r\n\t\t\tuni.$on('updateOrderCount', (param) => {\r\n\t\t\t\tthat.requestCount()\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\tuni.$on('refreshList', (param) => {\r\n\t\t\t\tthis.tabbarClick(0)\r\n\t\t\t\tthis.tabbarClick(1)\r\n\t\t\t\tthis.tabbarClick(2)\r\n\t\t\t\tthis.tabbarClick(3)\r\n\t\t\t\tthis.tabbarClick(4)\r\n\t\t\t\tthat.requestCount()\r\n\t\t\t})\n\t\t\t\r\n\t\t\t\r\n\t\t},\r\n\t\tonUnload() {\r\n\t\t\tuni.$off('updateOrderCount')\r\n\t\t},\r\n\t\tmethods: {\n\t\t\tgetclientID() {\n\t\t\t\tvar that = this\n\t\t\t\tuni.getPushClientId({\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tconsole.log('111111111', res.cid);\n\t\t\t\t\t\tthat.uploadCid(res.cid)\n\t\t\t\t\t},\n\t\t\t\t\tfail(err) {\n\t\t\t\t\t\tconsole.log('2222222', err)\n\t\t\t\t\t},\n\t\t\t\t\tcomplete: (res) => {\n\t\t\t\t\t\tconsole.log('111111', res);\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t},\n\t\t\tuploadCid(cid){\n\t\t\t\tvar that = this\n\t\t\t\tthat.http.sendRequest('Push.Update', {\n\t\t\t\t\t'cid': cid\n\t\t\t\t}).then(function(res) {})\n\t\t\t},\n\t\t\t\r\n\t\t\trequestCount() {\r\n\t\t\t\tvar that = this\r\n\t\t\t\tthis.http.sendRequest('MerchantOrder.GetNumber').then(function(data) {\r\n\t\t\t\t\tif (data.code == 0) {\r\n\t\t\t\t\t\tthat.islogin = true\r\n\t\t\t\t\t\tvar dic = data.info[0]\r\n\t\t\t\t\t\t// console.log(dic)\r\n\t\t\t\t\t\tthat.waitNum = dic.type1\r\n\t\t\t\t\t\tthat.nottransportNum = dic.type2\r\n\t\t\t\t\t\tthat.transportingNum = dic.type3\r\n\t\t\t\t\t\tthat.doneNum = dic.type4\r\n\t\t\t\t\t\tthat.refundNum = dic.type5\r\n\t\t\t\t\t} else if (data.code == 700) {\r\n\t\t\t\t\t\tthat.islogin = false\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\t// socket\r\n\t\t\tgetHomeConfig() {\r\n\t\t\t\tvar that = this\r\n\t\t\t\tthis.http.sendAppRequest('Home.GetConfig').then(data => {\r\n\t\t\t\t\t// console.log(data)\r\n\t\t\t\t\tconst value = uni.getStorageSync('userinfo');\r\n\t\t\t\t\tconsole.log(value.token)\r\n\t\t\t\t\tif (value && value.uid > 0) {\r\n\t\t\t\t\t\tvar chatS = data.info[0].chatserver\r\n\t\t\t\t\t\tthat.sckChatServer = that.http.decypt(chatS)\r\n\t\t\t\t\t\tthat.socektMethod(that.sckChatServer)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tuni.setStorage({\r\n\t\t\t\t\t\tkey: 'Config',\r\n\t\t\t\t\t\tdata: data.info[0]\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tsocektMethod(chatServer) {\r\n\t\t\t\tconsole.log(chatServer)\r\n\t\t\t\tvar that = this\r\n\t\t\t\tif (!this.islogin) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tvar socketTask = uni.connectSocket({\r\n\t\t\t\t\turl: chatServer,\r\n\t\t\t\t\tsuccess: () => {\r\n\t\t\t\t\t\tconsole.log('socket链接成gong')\r\n\t\t\t\t\t\t// that.onSendJoinSocket()\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tsocketTask.onOpen(function(res) {\n\t\t\t\t\tconsole.log('WebSocket连接已打开！', res);\n\t\t\t\t\tvar value = uni.getStorageSync('userinfo');\n\t\t\t\t\tvar mmmm = {\n\t\t\t\t\t\taction: 'mer_join',\n\t\t\t\t\t\tuid: value.uid,\n\t\t\t\t\t\ttoken: value.token,\n\t\t\t\t\t};\n\t\t\t\t\tsocketTask.send({\n\t\t\t\t\t\tdata: JSON.stringify(mmmm),\n\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\tconsole.log('fasongchengggggg ')\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfail: (error) => {\n\t\t\t\t\t\t\tconsole.log(error)\n\t\t\t\t\t\t}\n\t\t\t\t\t })\n\t\t\t\t});\r\n\t\t\t\tsocketTask.onError(function(res) {\r\n\t\t\t\t\tconsole.log('WebSocket连接打开失败，请检查！', res);\r\n\t\t\t\t\t// uni.showModal({\r\n\t\t\t\t\t// \tcontent: JSON.stringify(res),\r\n\t\t\t\t\t// \tshowCancel: false\r\n\t\t\t\t\t// });\r\n\t\t\t\t\tsocketTask.close();\r\n\t\t\t\t\tsocketTask = null;\r\n\t\t\t\t\t// setTimeout(() => {\r\n\t\t\t\t\t// \tthat.socektMethod(that.sckChatServer)\r\n\t\t\t\t\t// }, 3000)\r\n\t\t\t\t});\r\n\t\t\t\tsocketTask.onClose(function(res) {\r\n\t\t\t\t\tconsole.log('WebSocket 已关闭！');\n\t\t\t\t\t\r\n\t\t\t\t\tsocketTask = null;\r\n\t\t\t\t\t// setTimeout(() => {\r\n\t\t\t\t\t// \tthat.socektMethod(that.sckChatServer)\r\n\t\t\t\t\t// }, 3000)\r\n\t\t\t\t});\r\n\t\t\t\tsocketTask.onMessage(function(res) {\r\n\t\t\t\t\tvar msg = JSON.parse(res.data)\r\n\t\t\t\t\tconsole.log('收到服务器内容：', msg);\r\n\t\t\t\t\tif (msg.action == 'joinRoomBack') {\r\n\t\t\t\t\t\t console.log('加入房间状态:'+msg.success)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//新订单（待接单）\r\n\t\t\t\t\tif (msg.action == 'orders_new') {\r\n\t\t\t\t\t\tconsole.log('新订单（待接单）')\n\t\t\t\t\t\tthat.onPlayAudio(1)\r\n\t\t\t\t\t\tthat.requestCount()\r\n\t\t\t\t\t\tthat.$refs.waitReceive.updateData(1)\n\t\t\t\t\t\tif(getApp().globalData.platform == 'android'){\n\t\t\t\t\t\t\tthat.getOrderData(msg.data.order_id)\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//获取小票打印数据\r\n\t\t\tgetOrderData(orderid) {\r\n\t\t\t\tlet self = this\r\n\t\t\t\tthis.http.sendRequest('MerchantOrder.GetOrderPrintData', {\r\n\t\t\t\t\t'id': orderid\r\n\t\t\t\t}).then(function(data) {\r\n\t\t\t\t\tif (data.code == 0) {\r\n\t\t\t\t\t\tvar order = data.info[0]\r\n\t\t\t\t\t\tif (parseInt(order.store.auto_print) == 1) {\r\n\t\t\t\t\t\t\tconsole.log(order)\r\n\t\t\t\t\t\t\torder.app_name = self.i18n.index.appname\r\n\t\t\t\t\t\t\t// console.error('==========')\r\n\t\t\t\t\t\t\tlet printHexString = printer.getPrintHexString(order)\r\n\t\t\t\t\t\t\t// console.error('---------')\r\n\t\t\t\t\t\t\t// console.log(printHexString)\r\n\t\t\t\t\t\t\tprintModule.send(printHexString)\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//新订单声音\r\n\t\t\tonPlayAudio(type) {\r\n\t\t\t\tvar shopinfo = uni.getStorageSync('shopinfo')\r\n\t\t\t\tif (shopinfo.tohes == 0) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar audio = null;\r\n\t\t\t\t// audio = uni.createInnerAudioContext();\r\n\t\t\t\taudio = uni.getBackgroundAudioManager();\r\n\t\t\t\taudio.title = this.i18n.index.yuyinbobao;\r\n\t\t\t\taudio.singer = this.i18n.index.title;\r\n\t\t\t\t// https://testrun.sdwanyue.com/uniapp/music/paidan-m.mp3\r\n\t\t\t\t// audio.sessionCategory = 'playback'; \r\n\t\t\t\taudio.src = getApp().globalData.weburl + 'uniapp/music/mer-neworder.mp3';\r\n\t\t\t\t// // #ifdef APP-PLUS\r\n\t\t\t\t// if (type == 1) {\r\n\t\t\t\t// \taudio.src = '../../static/music/mer-neworder.mp3';\r\n\t\t\t\t// } \r\n\t\t\t\t// // #endif\r\n\t\t\t\t// // #ifdef MP-WEIXIN\r\n\t\t\t\t// if (type == 1) {\r\n\t\t\t\t// \taudio.src = getApp().globalData.weburl + 'uniapp/music/mer-neworder.mp3';\r\n\t\t\t\t// }\r\n\t\t\t\t// // #endif\r\n\r\n\t\t\t\taudio.play();\r\n\t\t\t\taudio.onEnded(function(res) {\r\n\t\t\t\t\taudio = null;\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tonSendJoinSocket() {\r\n\t\t\t\tconsole.log('faxiaoxile')\r\n\t\t\t\tvar value = uni.getStorageSync('userinfo');\r\n\t\t\t\tvar mmmm = {\r\n\t\t\t\t\taction: 'mer_join',\r\n\t\t\t\t\tuid: value.uid,\r\n\t\t\t\t\ttoken: value.token,\r\n\t\t\t\t};\r\n\t\t\t\tuni.sendSocketMessage({\r\n\t\t\t\t\tdata: JSON.stringify(mmmm),\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tconsole.log('fasongchengggggg ')\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (error) => {\r\n\t\t\t\t\t\tconsole.log(error)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 小票打印机相关\r\n\t\t\tinitListeners() {\r\n\t\t\t\tglobalEvent.addEventListener('Init', (ret) => {\r\n\t\t\t\t\tconsole.log(ret)\r\n\t\t\t\t})\r\n\t\t\t\tglobalEvent.addEventListener('PrinterState', (ret) => {\r\n\t\t\t\t\tconsole.log(ret)\r\n\t\t\t\t})\r\n\t\t\t\tglobalEvent.addEventListener('SendRawData', (ret) => {\r\n\t\t\t\t\tconsole.log(ret)\r\n\t\t\t\t})\r\n\t\t\t\tglobalEvent.addEventListener('DeInit', (ret) => {\r\n\t\t\t\t\tconsole.log(ret)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\twidthOfString() {\r\n\t\t\t\tlet str = \" \"\r\n\t\t\t\tlet width = printer.widthOfString(str)\r\n\t\t\t\t// console.log(\"width:\" + width)\r\n\t\t\t},\r\n\t\t\tinit() {\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\tprintModule.init()\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\tgetPrinterState() {\r\n\t\t\t\t// #ifdef APP-PLUS\n\t\t\t\tprintModule.getPrinterState()\r\n\t\t\t\t// if (getApp().platform == 'android') {\r\n\t\t\t\t// \t\r\n\t\t\t\t// }\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\tdeInit() {\r\n\t\t\t\t// #ifdef APP-PLUS\n\t\t\t\tprintModule.deInit()\r\n\t\t\t\t// if (getApp().platform == 'android') {\r\n\t\t\t\t\t\r\n\t\t\t\t// }\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\tsend() {\r\n\t\t\t\t// #ifdef APP-PLUS\n\t\t\t\tlet printHexString = printer.getPrintHexString(\"\")\n\t\t\t\tprintModule.send(printHexString)\r\n\t\t\t\t// if (getApp().platform == 'android') {\r\n\t\t\t\t\t\r\n\t\t\t\t// }\r\n\t\t\t\t// #endif\r\n\r\n\t\t\t},\r\n\t\t\tgetUnreadMsg() {\r\n\t\t\t\tthis.http.sendRequest('Message.GetUnreadMessage').then(function(data) {\r\n\t\t\t\t\tif (data.code == 0) {\r\n\t\t\t\t\t\tvar dic = data.info[0]\r\n\t\t\t\t\t\tif (parseInt(dic.count) > 0) {\r\n\t\t\t\t\t\t\tuni.setTabBarBadge({\r\n\t\t\t\t\t\t\t\tindex: 2,\r\n\t\t\t\t\t\t\t\ttext: dic.count\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tuni.removeTabBarBadge({\r\n\t\t\t\t\t\t\t\tindex: 2\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tcellItemClick(item, index) {\r\n\t\t\t\tconsole.log(index)\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '../../package-index/pages/indexOrderDetail?id=' + item.id\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tdoZiti() {\r\n\t\t\t\tif (this.islogin) {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '../../package-index/pages/ziti'\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '../login/login'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tdoScan() {\r\n\t\t\t\tif (this.islogin) {\r\n\t\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '../../package-index/pages/scanQRCode'\r\n\t\t\t\t\t})\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '../../package-index/pages/scan'\r\n\t\t\t\t\t})\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '../login/login'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tlogin() {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '../login/login'\r\n\t\t\t\t})\r\n\t\t\t},\n\t\t\tgetLocationsss() {\n\t\t\t\tvar that = this\n\t\t\t\tconsole.log('getLocationsss')\n\t\t\t\tmyAmapFun.getRegeo({\n\t\t\t\t\tsuccess: function(data) {\n\t\t\t\t\t\tconsole.log(data)\n\t\t\t\t\t},\n\t\t\t\t\tfail: function(info) {\n\t\t\t\t\t\t\tconsole.log(info)\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t},\r\n\t\t\ttabbarClick(index) {\r\n\t\t\t\tthis.tabIndex = index\r\n\t\t\t\tif (index == 0) {\r\n\t\t\t\t\tthis.$refs.waitReceive.updateData(1)\r\n\t\t\t\t} else if (index == 1) {\r\n\t\t\t\t\tthis.$refs.waitRider.updateData(2)\r\n\t\t\t\t} else if (index == 2) {\r\n\t\t\t\t\tthis.$refs.ridering.updateData(3)\r\n\t\t\t\t} else if (index == 3) {\r\n\t\t\t\t\tthis.$refs.orderDone.updateData(4)\r\n\t\t\t\t} else if (index == 4) {\r\n\t\t\t\t\tthis.$refs.orderRefund.updateData(5)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tanimationfinish(e) {\r\n\t\t\t\tthis.tabIndex = e.detail.current\r\n\t\t\t},\r\n\t\t\t// gotoCell(item) {\r\n\t\t\t// \tuni.navigateTo({\r\n\t\t\t// \t\turl: '/package-meishi/pages/store/store?id=' + item.id\r\n\t\t\t// \t})\r\n\t\t\t// },\r\n\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\tpage {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tbackground-color: #fcfcfc;\r\n\t}\r\n\r\n\t.logintip {\r\n\t\twidth: 120px;\r\n\t\theight: 40px;\r\n\t\tborder-radius: 20px;\r\n\t\tbackground-color: #00C1DE;\r\n\t\tcolor: white;\r\n\t\tfont-size: 16px;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tmargin-top: calc(50% - 40px);\r\n\t\tmargin-left: calc(50% - 60px);\r\n\t}\r\n\r\n\t.topImageView {\r\n\t\twidth: 100%;\r\n\t\toverflow: hidden;\r\n\t\tbackground-color: #303F50;\r\n\t\t/* position: relative; */\r\n\t\tbackground-size: 100% auto;\r\n\t}\r\n\r\n\t.nav {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\theight: 44px;\r\n\t\tborder-bottom: 1px solid #383838;\r\n\t}\r\n\r\n\t.nav_left {\r\n\t\tmargin-left: 15px;\r\n\t\twidth: 32px;\r\n\t\theight: 32px;\r\n\t}\r\n\r\n\t.nav_title {\r\n\t\twidth: 40%;\r\n\t\tmargin-left: 17%;\r\n\t\theight: 20px;\r\n\t\tline-height: 20px;\r\n\t\tcolor: white;\r\n\t\tfont-size: 16px;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.nav_right {\r\n\t\tposition: absolute;\r\n\t\tright: 15px;\r\n\t\theight: 20px;\r\n\t\tline-height: 20px;\r\n\t\tcolor: white;\r\n\t\tfont-size: 14px;\r\n\t}\r\n\r\n\t.nav_right_mp {\r\n\t\tposition: absolute;\r\n\t\tright: 40px;\r\n\t\theight: 20px;\r\n\t\tline-height: 20px;\r\n\t\tcolor: white;\r\n\t\tfont-size: 14px;\r\n\t}\r\n\r\n\t.content_img {\r\n\t\tposition: absolute;\r\n\t\tleft: calc(50% - 6.5px);\r\n\t\tbottom: 0;\r\n\t\twidth: 13px;\r\n\t\theight: 8px;\r\n\t}\r\n\r\n\t.tab_sel {\r\n\t\tfont-size: 16px;\r\n\t\tfont-weight: bold;\r\n\t\tcolor: white;\r\n\t\twidth: 20%;\r\n\t\theight: 100%;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\t/* margin-left: 15px;\r\n\t\tmargin-right: 4px; */\r\n\t\tposition: relative;\r\n\t\t/* height: 30px; */\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\r\n\t}\r\n\r\n\t/* .tab_sel::after {\r\n\t\tcontent: \"\";\r\n\t\tposition: absolute;\r\n\t\tbottom: 0;\r\n\t\tleft: 25%;\r\n\t\theight: 2px;\r\n\t\tborder-radius: 1px;\r\n\t\twidth: 50%;\r\n\t\tbackground: url('@/static/home-down-z.png'); \r\n\t} */\r\n\r\n\t.tab_nor {\r\n\t\tfont-size: 14px;\r\n\t\t/* font-weight: bold; */\r\n\t\tcolor: #383838;\r\n\t\tmargin-left: 15px;\r\n\t\tmargin-right: 4px;\r\n\t\tposition: relative;\r\n\t\theight: 30px;\r\n\t}\r\n</style>\n","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}