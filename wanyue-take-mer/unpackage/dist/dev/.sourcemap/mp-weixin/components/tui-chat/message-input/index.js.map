{"version":3,"sources":["webpack:////Users/wangminxin/Desktop/外卖/商家/wanyue-take-mer/components/tui-chat/message-input/index.vue?1e09","webpack:////Users/wangminxin/Desktop/外卖/商家/wanyue-take-mer/components/tui-chat/message-input/index.vue?6cf0","webpack:////Users/wangminxin/Desktop/外卖/商家/wanyue-take-mer/components/tui-chat/message-input/index.vue?ca03","webpack:////Users/wangminxin/Desktop/外卖/商家/wanyue-take-mer/components/tui-chat/message-input/index.vue?c027","uni-app:///components/tui-chat/message-input/index.vue","webpack:////Users/wangminxin/Desktop/外卖/商家/wanyue-take-mer/components/tui-chat/message-input/index.vue?7da8"],"names":["renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped"],"mappings":"wIAAA,yHACIA,EADJ,QASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,8CACZ,aAAAF,E,0CCvBf,uQ,iCCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,IAEjBC,GAAmB,EACnBC,EAAkB,GACtBR,EAAOS,eAAgB,G,iCCRvB,8GAAi3B,eAAG,G,gtBCqGp3B,CACA,KADA,WAEA,OAGA,oBACA,aACA,iBACA,kBACA,eACA,WACA,YACA,aACA,eACA,eACA,WACA,YACA,UACA,WACA,UACA,aACA,iBACA,gBACA,CACA,WACA,SAEA,CACA,YACA,SAEA,CACA,YACA,UAGA,4BACA,sBACA,sBAGA,UACA,KADA,WAEA,0BAGA,YACA,WACA,iBACA,eACA,wBAEA,OACA,cACA,YACA,uBAGA,OACA,cACA,sBAMA,aACA,UAIA,YAvEA,WAuEA,WAEA,4CACA,yCACA,6BAGA,OACA,gDACA,4BACA,uDAIA,GAFA,gBAEA,UACA,kBACA,aACA,eACA,kBAEA,CAEA,oCACA,oBACA,qCACA,SACA,UAGA,qBAIA,WACA,aACA,eACA,eACA,WACA,UACA,kBAKA,SACA,YADA,WAEA,cACA,sBACA,eAIA,gBARA,SAQA,cACA,4BACA,aAEA,iBAEA,mBAEA,oBAEA,eAEA,cACA,wBACA,aAGA,WACA,UACA,eACA,eACA,eAEA,yCACA,iBACA,MAIA,gBArCA,SAqCA,GACA,mBACA,kEACA,cACA,YACA,kBACA,aAEA,iEACA,cACA,YACA,cACA,aAGA,cACA,YACA,aACA,eAOA,eA9DA,WA+DA,cACA,eACA,iBAEA,gBACA,6BAEA,YAtEA,WAuEA,cAEA,6BACA,MAGA,cACA,iBAIA,iBAlFA,WAmFA,kBAEA,iCACA,MAGA,cACA,iBAIA,MA9FA,SA8FA,GACA,uBAGA,kBAlGA,WAmGA,iCAGA,gBAtGA,WAuGA,gCAGA,iBA1GA,SA0GA,cACA,eACA,eACA,QACA,oBACA,MACA,oCACA,oBACA,qCACA,SACA,QAEA,uBACA,eAGA,0BAMA,iBAhIA,WAiIA,iCAGA,gBApIA,WAqIA,gCAGA,iBAxIA,SAwIA,cACA,eACA,eAEA,eAEA,cAEA,oBACA,MACA,oCACA,oBACA,qCACA,SACA,QAEA,uBACA,eAGA,0BAMA,sBAlKA,SAkKA,GACA,sCACA,QACA,cACA,wBAEA,MAEA,QACA,cACA,sBAEA,MAEA,QACA,cACA,8BAEA,MAEA,QACA,QAIA,gBA3LA,WA4LA,cACA,uBAIA,cAjMA,SAiMA,GACA,cACA,0CACA,qBAIA,aAxMA,WAyMA,yDACA,SAGA,+BACA,UACA,0DAEA,YACA,4DAEA,QACA,0CAGA,cAxNA,SAwNA,GAEA,qCAOA,qCAuBA,aACA,kBACA,mBA/BA,aACA,eACA,eAkCA,gBA/PA,SA+PA,KACA,0BACA,qBACA,+BACA,KACA,wCACA,SACA,UAGA,cACA,aACA,oBAEA,yBAGA,mBAhRA,SAgRA,GACA,eACA,cACA,oBAGA,cACA,qBAKA,uBA5RA,SA4RA,GACA,0CACA,cACA,yBAIA,yBAnSA,SAmSA,GACA,qCACA,uBACA,wCACA,2BAEA,wBACA,cACA,uBAIA,kBA/SA,SA+SA,GACA,qBACA,QACA,cACA,wBAEA,MAEA,QACA,cACA,sBAEA,MAEA,QACA,cACA,8BAEA,MAEA,QACA,QAIA,gBAxUA,SAwUA,cACA,+BACA,0BACA,QACA,aAGA,2CACA,oBACA,sBACA,mBACA,2BACA,yBACA,oBAGA,yBACA,mBACA,sBACA,mBACA,4CACA,yBACA,uBAGA,cACA,kBAIA,YAtWA,WAuWA,cACA,kBAIA,wBA5WA,WA6WA,cACA,+BAIA,eAlXA,WAmXA,yCAGA,cAtXA,WAuXA,0C,2EC/kBA,8GAA0uC,eAAG,G","file":"components/tui-chat/message-input/index.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=1da00aa0&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/tui-chat/message-input/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=1da00aa0&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\n\t<view>\n\t\t<view class=\"TUI-message-input-container\">\n\t\t\t<view class=\"TUI-commom-function\">\n\t\t\t\t<view v-for=\"(item, index) in 0\" :key=\"index\" class=\"TUI-commom-function-item\" :data-function=\"item\" @tap=\"handleCommonFunctions\">\n\t\t\t\t\t{{ item.name }}\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<view class=\"TUI-message-input\">\n\t\t\t\t<!-- <image class=\"TUI-icon\" @tap=\"switchAudio\" :src=\"isAudio ? '/static/static/assets/keyboard.svg' : '/static/static/assets/audio.svg'\"></image> -->\n\t\t\t\t<view v-if=\"!isAudio\" class=\"TUI-message-input-main\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tclass=\"TUI-message-input-area\"\n\t\t\t\t\t\t:adjust-position=\"true\"\n\t\t\t\t\t\tcursor-spacing=\"20\"\n\t\t\t\t\t\tv-model=\"inputText\"\n\t\t\t\t\t\t@input=\"onInputValueChange\"\n\t\t\t\t\t\tmaxlength=\"140\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tplaceholder-class=\"input-placeholder\"\n\t\t\t\t\t\t:placeholder=\"i18n.message.tip\"\n\t\t\t\t\t\t@focus=\"inputBindFocus\"\n\t\t\t\t\t\t@blur=\"inputBindBlur\"\n\t\t\t\t\t/>\n\t\t\t\t</view>\n\t\t\t\t<view\n\t\t\t\t\tv-else\n\t\t\t\t\tclass=\"TUI-message-input-main\"\n\t\t\t\t\t@longpress=\"handleLongPress\"\n\t\t\t\t\t@touchmove=\"handleTouchMove\"\n\t\t\t\t\t@touchend=\"handleTouchEnd\"\n\t\t\t\t\tstyle=\"display: flex; justify-content: center; font-size: 32rpx; font-family: PingFangSC-Regular;\"\n\t\t\t\t>\n\t\t\t\t\t<text>{{ text }}</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"TUI-message-input-functions\" hover-class=\"none\">\n\t\t\t\t\t<!-- <image class=\"TUI-icon\" @tap=\"handleEmoji\" src=\"/static/static/assets/face-emoji.svg\"></image> -->\n\t\t\t\t\t<!-- <view v-if=\"!sendMessageBtn\" @tap=\"handleExtensions\"><image class=\"TUI-icon\" src=\"/static/static/assets/more.svg\"></image></view> -->\n\t\t\t\t\t<!-- <view v-else class=\"TUI-sendMessage-btn\" @tap=\"sendTextMessage\">发送</view> -->\n\t\t\t\t\t<image class=\"TUI-icon\" @tap=\"sendTextMessage\" src=\"../../../static/message/send.png\"></image>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<view v-if=\"displayFlag === 'emoji'\" class=\"TUI-Emoji-area\"><TUI-Emoji @enterEmoji=\"appendMessage\"></TUI-Emoji></view>\n\t\t\t<view v-if=\"displayFlag === 'extension'\" class=\"TUI-Extensions\">\n\t\t\t\t<!-- TODO: 这里功能还没实现 -->\n\t\t\t\t<!--        <camera device-position=\"back\" flash=\"off\" binderror=\"error\" style=\"width: 100%; height: 300px;\"></camera>-->\n\t\t\t\t<view class=\"TUI-Extension-slot\" @tap=\"handleSendPicture\">\n<!-- \t\t\t\t\t<image class=\"TUI-Extension-icon\" src=\"/static/static/assets/take-photo.svg\"></image>\n -->\t\t\t\t\t<view class=\"TUI-Extension-slot-name\">拍摄照片</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"TUI-Extension-slot\" @tap=\"handleSendImage\">\n<!-- \t\t\t\t\t<image class=\"TUI-Extension-icon\" src=\"/static/static/assets/send-img.svg\"></image>\n -->\t\t\t\t\t<view class=\"TUI-Extension-slot-name\">发送图片</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"TUI-Extension-slot\" @tap=\"handleShootVideo\">\n<!-- \t\t\t\t\t<image class=\"TUI-Extension-icon\" src=\"/static/static/assets/take-video.svg\"></image>\n -->\t\t\t\t\t<view class=\"TUI-Extension-slot-name\">拍摄视频</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"TUI-Extension-slot\" @tap=\"handleSendVideo\">\n<!-- \t\t\t\t\t<image class=\"TUI-Extension-icon\" src=\"/static/static/assets/send-video.svg\"></image>\n -->\t\t\t\t\t<view class=\"TUI-Extension-slot-name\">发送视频</view>\n\t\t\t\t</view>\n\t\t\t\t<!-- <view class=\"TUI-Extension-slot\" @tap=\"handleCalling(1)\">\n\t\t\t\t\t<image class=\"TUI-Extension-icon\" src=\"/static/static/assets/audio-calling.svg\"></image>\n\t\t\t\t\t<view class=\"TUI-Extension-slot-name\">语音通话</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"TUI-Extension-slot\" @tap=\"handleCalling(2)\">\n\t\t\t\t\t<image class=\"TUI-Extension-icon\" src=\"/static/static/assets/video-calling.svg\"></image>\n\t\t\t\t\t<view class=\"TUI-Extension-slot-name\">视频通话</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"TUI-Extension-slot\" @tap=\"handleServiceEvaluation\">\n\t\t\t\t\t<image class=\"TUI-Extension-icon\" src=\"/static/static/assets/service-assess.svg\"></image>\n\t\t\t\t\t<view class=\"TUI-Extension-slot-name\">服务评价</view>\n\t\t\t\t</view> -->\n\t\t\t\t<view class=\"TUI-Extension-slot\" @tap=\"handleSendOrder\">\n<!-- \t\t\t\t\t<image class=\"TUI-Extension-icon\" src=\"/static/static/assets/send-order.svg\"></image>\n -->\t\t\t\t\t<view class=\"TUI-Extension-slot-name\">发送订单</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<TUI-Common-Words class=\"tui-cards\" :display=\"displayCommonWords\" @sendMessage=\"$handleSendTextMessage\" @close=\"$handleCloseCards\"></TUI-Common-Words>\n\t\t\t<TUI-Order-List class=\"tui-cards\" :display=\"displayOrderList\" @sendCustomMessage=\"$handleSendCustomMessage\" @close=\"$handleCloseCards\"></TUI-Order-List>\n\t\t\t<TUI-Service-Evaluation\n\t\t\t\tclass=\"tui-cards\"\n\t\t\t\t:display=\"displayServiceEvaluation\"\n\t\t\t\t@sendCustomMessage=\"$handleSendCustomMessage\"\n\t\t\t\t@close=\"$handleCloseCards\"\n\t\t\t></TUI-Service-Evaluation>\n\t\t</view>\n\t\t<view class=\"record-modal\" v-if=\"popupToggle\" @longpress=\"handleLongPress\" @touchmove=\"handleTouchMove\" @touchend=\"handleTouchEnd\">\n\t\t\t<view class=\"wrapper\"><view class=\"modal-loading\"></view></view>\n\t\t\t<view class=\"modal-title\">{{ title }}</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\nimport TUIEmoji from '../message-elements/emoji/index';\nimport TUICommonWords from '../message-private/common-words/index';\nimport TUIOrderList from '../message-private/order-list/index';\nimport TUIServiceEvaluation from '../message-private/service-evaluation/index';\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\t// todo  conversation\n\t\t\t// conversation: {},\n\t\t\tfirstSendMessage: true,\n\t\t\tinputText: '',\n\t\t\textensionArea: false,\n\t\t\tsendMessageBtn: false,\n\t\t\tdisplayFlag: '',\n\t\t\tisAudio: false,\n\t\t\tbottomVal: 0,\n\t\t\tstartPoint: 0,\n\t\t\tpopupToggle: false,\n\t\t\tisRecording: false,\n\t\t\tcanSend: true,\n\t\t\ttext: '按住说话',\n\t\t\ttitle: ' ',\n\t\t\tnotShow: false,\n\t\t\tisShow: true,\n\t\t\trecordTime: 0,\n\t\t\trecordTimer: null,\n\t\t\tcommonFunction: [\n\t\t\t\t{\n\t\t\t\t\tname: '常用语',\n\t\t\t\t\tkey: '0'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: '发送订单',\n\t\t\t\t\tkey: '1'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: '服务评价',\n\t\t\t\t\tkey: '2'\n\t\t\t\t}\n\t\t\t],\n\t\t\tdisplayServiceEvaluation: false,\n\t\t\tdisplayCommonWords: false,\n\t\t\tdisplayOrderList: false\n\t\t};\n\t},\n\tcomputed: {\n\t\ti18n() {\n\t\t\treturn this.$t('index')\n\t\t},\n\t},\n\tcomponents: {\n\t\tTUIEmoji,\n\t\tTUICommonWords,\n\t\tTUIOrderList,\n\t\tTUIServiceEvaluation\n\t},\n\tprops: {\n\t\tconversation: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => {}\n\t\t}\n\t},\n\twatch: {\n\t\tconversation: {\n\t\t\thandler: function(newVal) {\n\t\t\t\t// todo 值会被改变\n\t\t\t\t// this.setData({\n\t\t\t\t//   conversation: newVal\n\t\t\t\t// });\n\t\t\t},\n\t\t\timmediate: true,\n\t\t\tdeep: true\n\t\t}\n\t},\n\n\tbeforeMount() {\n\t\t// 加载声音录制管理器\n\t\tthis.recorderManager = uni.getRecorderManager();\n\t\tthis.recorderManager.onStop(res => {\n\t\t\tclearInterval(this.recordTimer);\n\t\t\t// 兼容 uniapp 打包app，duration 和 fileSize 需要用户自己补充\n\t\t\t// 文件大小 ＝ (音频码率) x 时间长度(单位:秒) / 8\n\t\t\tlet msg = {\n\t\t\t\tduration: res.duration ? res.duration : this.recordTime * 1000,\n\t\t\t\ttempFilePath: res.tempFilePath,\n\t\t\t\tfileSize: res.fileSize ? res.fileSize : ((48 * this.recordTime) / 8) * 1024\n\t\t\t};\n\t\t\tuni.hideLoading();\n\t\t\t// 兼容 uniapp 语音消息没有duration\n\t\t\tif (this.canSend) {\n\t\t\t\tif (msg.duration < 1000) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '录音时间太短',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t// res.tempFilePath 存储录音文件的临时路径\n\t\t\t\t\tconst message = uni.$TUIKit.createAudioMessage({\n\t\t\t\t\t\tto: this.getToAccount(),\n\t\t\t\t\t\tconversationType: this.conversation.type,\n\t\t\t\t\t\tpayload: {\n\t\t\t\t\t\t\tfile: msg\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tthis.$sendTIMMessage(message);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.setData({\n\t\t\t\tstartPoint: 0,\n\t\t\t\tpopupToggle: false,\n\t\t\t\tisRecording: false,\n\t\t\t\tcanSend: true,\n\t\t\t\ttitle: ' ',\n\t\t\t\ttext: '按住说话'\n\t\t\t});\n\t\t});\n\t},\n\n\tmethods: {\n\t\tswitchAudio() {\n\t\t\tthis.setData({\n\t\t\t\tisAudio: !this.isAudio,\n\t\t\t\ttext: '按住说话'\n\t\t\t});\n\t\t},\n\n\t\thandleLongPress(e) {\n\t\t\tthis.recorderManager.start({\n\t\t\t\tduration: 60000,\n\t\t\t\t// 录音的时长，单位 ms，最大值 600000（10 分钟）\n\t\t\t\tsampleRate: 44100,\n\t\t\t\t// 采样率\n\t\t\t\tnumberOfChannels: 1,\n\t\t\t\t// 录音通道数\n\t\t\t\tencodeBitRate: 192000,\n\t\t\t\t// 编码码率\n\t\t\t\tformat: 'aac' // 音频格式，选择此格式创建的音频消息，可以在即时通信 IM 全平台（Android、iOS、微信小程序和Web）互通\n\t\t\t});\n\t\t\tthis.setData({\n\t\t\t\tstartPoint: e.touches[0],\n\t\t\t\ttitle: '正在录音',\n\t\t\t\t// isRecording : true,\n\t\t\t\t// canSend: true,\n\t\t\t\tnotShow: true,\n\t\t\t\tisShow: false,\n\t\t\t\tisRecording: true,\n\t\t\t\tpopupToggle: true,\n\t\t\t\trecordTime: 0\n\t\t\t});\n\t\t\tthis.recordTimer = setInterval(() => {\n\t\t\t\tthis.recordTime++;\n\t\t\t}, 1000);\n\t\t},\n\n\t\t// 录音时的手势上划移动距离对应文案变化\n\t\thandleTouchMove(e) {\n\t\t\tif (this.isRecording) {\n\t\t\t\tif (this.startPoint.clientY - e.touches[e.touches.length - 1].clientY > 100) {\n\t\t\t\t\tthis.setData({\n\t\t\t\t\t\ttext: '抬起停止',\n\t\t\t\t\t\ttitle: '松开手指，取消发送',\n\t\t\t\t\t\tcanSend: false\n\t\t\t\t\t});\n\t\t\t\t} else if (this.startPoint.clientY - e.touches[e.touches.length - 1].clientY > 20) {\n\t\t\t\t\tthis.setData({\n\t\t\t\t\t\ttext: '抬起停止',\n\t\t\t\t\t\ttitle: '上划可取消',\n\t\t\t\t\t\tcanSend: true\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthis.setData({\n\t\t\t\t\t\ttext: '抬起停止',\n\t\t\t\t\t\ttitle: '正在录音',\n\t\t\t\t\t\tcanSend: true\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t// 手指离开页面滑动\n\t\thandleTouchEnd() {\n\t\t\tthis.setData({\n\t\t\t\tisRecording: false,\n\t\t\t\tpopupToggle: false\n\t\t\t});\n\t\t\tuni.hideLoading();\n\t\t\tthis.recorderManager.stop();\n\t\t},\n\t\thandleEmoji() {\n\t\t\tlet targetFlag = 'emoji';\n\n\t\t\tif (this.displayFlag === 'emoji') {\n\t\t\t\ttargetFlag = '';\n\t\t\t}\n\n\t\t\tthis.setData({\n\t\t\t\tdisplayFlag: targetFlag\n\t\t\t});\n\t\t},\n\n\t\thandleExtensions() {\n\t\t\tlet targetFlag = 'extension';\n\n\t\t\tif (this.displayFlag === 'extension') {\n\t\t\t\ttargetFlag = '';\n\t\t\t}\n\n\t\t\tthis.setData({\n\t\t\t\tdisplayFlag: targetFlag\n\t\t\t});\n\t\t},\n\n\t\terror(e) {\n\t\t\tconsole.log(e.detail);\n\t\t},\n\n\t\thandleSendPicture() {\n\t\t\tthis.sendImageMessage('camera');\n\t\t},\n\n\t\thandleSendImage() {\n\t\t\tthis.sendImageMessage('album');\n\t\t},\n\n\t\tsendImageMessage(type) {\n\t\t\tuni.chooseImage({\n\t\t\t\tsourceType: [type],\n\t\t\t\tcount: 1,\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tif (res) {\n\t\t\t\t\t\tconst message = uni.$TUIKit.createImageMessage({\n\t\t\t\t\t\t\tto: this.getToAccount(),\n\t\t\t\t\t\t\tconversationType: this.conversation.type,\n\t\t\t\t\t\t\tpayload: {\n\t\t\t\t\t\t\t\tfile: res\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tonProgress: percent => {\n\t\t\t\t\t\t\t\tmessage.percent = percent;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.$sendTIMMessage(message);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\thandleShootVideo() {\n\t\t\tthis.sendVideoMessage('camera');\n\t\t},\n\n\t\thandleSendVideo() {\n\t\t\tthis.sendVideoMessage('album');\n\t\t},\n\n\t\tsendVideoMessage(type) {\n\t\t\tuni.chooseVideo({\n\t\t\t\tsourceType: [type],\n\t\t\t\t// 来源相册或者拍摄\n\t\t\t\tmaxDuration: 60,\n\t\t\t\t// 设置最长时间60s\n\t\t\t\tcamera: 'back',\n\t\t\t\t// 后置摄像头\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tif (res) {\n\t\t\t\t\t\tconst message = uni.$TUIKit.createVideoMessage({\n\t\t\t\t\t\t\tto: this.getToAccount(),\n\t\t\t\t\t\t\tconversationType: this.conversation.type,\n\t\t\t\t\t\t\tpayload: {\n\t\t\t\t\t\t\t\tfile: res\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tonProgress: percent => {\n\t\t\t\t\t\t\t\tmessage.percent = percent;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.$sendTIMMessage(message);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\thandleCommonFunctions(e) {\n\t\t\tswitch (e.target.dataset.function.key) {\n\t\t\t\tcase '0':\n\t\t\t\t\tthis.setData({\n\t\t\t\t\t\tdisplayCommonWords: true\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase '1':\n\t\t\t\t\tthis.setData({\n\t\t\t\t\t\tdisplayOrderList: true\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase '2':\n\t\t\t\t\tthis.setData({\n\t\t\t\t\t\tdisplayServiceEvaluation: true\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\n\t\thandleSendOrder() {\n\t\t\tthis.setData({\n\t\t\t\tdisplayOrderList: true\n\t\t\t});\n\t\t},\n\n\t\tappendMessage(e) {\n\t\t\tthis.setData({\n\t\t\t\tinputText: this.inputText + e.detail.message,\n\t\t\t\tsendMessageBtn: true\n\t\t\t});\n\t\t},\n\n\t\tgetToAccount() {\n\t\t\tif (!this.conversation || !this.conversation.conversationID) {\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\tswitch (this.conversation.type) {\n\t\t\t\tcase 'C2C':\n\t\t\t\t\treturn this.conversation.conversationID.replace('C2C', '');\n\n\t\t\t\tcase 'GROUP':\n\t\t\t\t\treturn this.conversation.conversationID.replace('GROUP', '');\n\n\t\t\t\tdefault:\n\t\t\t\t\treturn this.conversation.conversationID;\n\t\t\t}\n\t\t},\n\t\thandleCalling(value) {\n\t\t\t// todo 目前支持单聊\n\t\t\tif (this.conversation.type === 'GROUP') {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '群聊暂不支持',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst { userID } = this.conversation.userProfile;\n\n\t\t\t// #ifdef APP-PLUS\n\t\t\tif(typeof(uni.$TUICalling) === 'undefined') {\n\t\t\t\t\tlogger.error('请使用真机运行并且自定义基座调试，可能影响音视频功能～ 插件地址：https://ext.dcloud.net.cn/plugin?id=7097 , 调试地址：https://nativesupport.dcloud.net.cn/NativePlugin/use/use');\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '请使用真机运行并且自定义基座调试，可能影响音视频功能～ ',\n\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\tduration: 3000\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tuni.$TUICalling.call(\n\t\t\t\t\t{\n\t\t\t\t\t\tuserID: userID,\n\t\t\t\t\t\ttype: value\n\t\t\t\t\t},\n\t\t\t\t\tres => {\n\t\t\t\t\t\tconsole.log(JSON.stringify(res));\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t\t// #endif\n\t\t\t// #ifdef MP-WEIXIN\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '微信小程序暂不支持',\n\t\t\t\ticon: 'none'\n\t\t\t});\n\t\t\t// uni.$wxTUICalling.call({userID, type: value})\n\t\t\t// #endif\n\t\t},\n\t\tsendTextMessage(msg, flag) {\n\t\t\tconst to = this.getToAccount();\n\t\t\tconst text = flag ? msg : this.inputText;\n\t\t\tconst message = uni.$TUIKit.createTextMessage({\n\t\t\t\tto,\n\t\t\t\tconversationType: this.conversation.type,\n\t\t\t\tpayload: {\n\t\t\t\t\ttext\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.setData({\n\t\t\t\tinputText: '',\n\t\t\t\tsendMessageBtn: false\n\t\t\t});\n\t\t\tthis.$sendTIMMessage(message);\n\t\t},\n\n\t\tonInputValueChange(event) {\n\t\t\tif (event.detail.value) {\n\t\t\t\tthis.setData({\n\t\t\t\t\tsendMessageBtn: true\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.setData({\n\t\t\t\t\tsendMessageBtn: false\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\t$handleSendTextMessage(event) {\n\t\t\tthis.sendTextMessage(event.detail.message, true);\n\t\t\tthis.setData({\n\t\t\t\tdisplayCommonWords: false\n\t\t\t});\n\t\t},\n\n\t\t$handleSendCustomMessage(e) {\n\t\t\tconst message = uni.$TUIKit.createCustomMessage({\n\t\t\t\tto: this.getToAccount(),\n\t\t\t\tconversationType: this.conversation.type,\n\t\t\t\tpayload: e.detail.payload\n\t\t\t});\n\t\t\tthis.$sendTIMMessage(message);\n\t\t\tthis.setData({\n\t\t\t\tdisplayOrderList: false\n\t\t\t});\n\t\t},\n\n\t\t$handleCloseCards(e) {\n\t\t\tswitch (e.detail.key) {\n\t\t\t\tcase '0':\n\t\t\t\t\tthis.setData({\n\t\t\t\t\t\tdisplayCommonWords: false\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase '1':\n\t\t\t\t\tthis.setData({\n\t\t\t\t\t\tdisplayOrderList: false\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase '2':\n\t\t\t\t\tthis.setData({\n\t\t\t\t\t\tdisplayServiceEvaluation: false\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\n\t\t$sendTIMMessage(message) {\n\t\t\tconst SDKAppID = getApp().globalData.SDKAppID;\n\t\t\tthis.$emit('sendMessage', {\n\t\t\t\tdetail: {\n\t\t\t\t\tmessage\n\t\t\t\t}\n\t\t\t});\n\t\t\tuni.$TUIKit.sendMessage(message).then((res) => {\n\t\t\t\tif(this.firstSendMessage) {\n\t\t\t\t\tuni.$aegis.reportEvent({\n\t\t\t\t\t    name: 'sendMessage',\n\t\t\t\t\t    ext1: 'sendMessage-success',\n\t\t\t\t\t    ext2: 'uniTuikitExternal',\n\t\t\t\t\t    ext3: `${SDKAppID}`,\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tthis.firstSendMessage = false\n\t\t\t}).catch((error) => {\n\t\t\t\tuni.$aegis.reportEvent({\n\t\t\t\t\t\tname: 'sendMessage',\n\t\t\t\t\t\text1: `sendMessage-failed#error: ${error}`,\n\t\t\t\t\t\text2: 'uniTuikitExternal',\n\t\t\t\t\t\text3: `${SDKAppID}`,\n\t\t\t  })\n\t\t\t})\n\t\t\tthis.setData({\n\t\t\t\tdisplayFlag: ''\n\t\t\t});\n\t\t},\n\n\t\thandleClose() {\n\t\t\tthis.setData({\n\t\t\t\tdisplayFlag: ''\n\t\t\t});\n\t\t},\n\n\t\thandleServiceEvaluation() {\n\t\t\tthis.setData({\n\t\t\t\tdisplayServiceEvaluation: true\n\t\t\t});\n\t\t},\n\n\t\tinputBindFocus() {\n\t\t\tconsole.log('占位：函数 inputBindFocus 未声明');\n\t\t},\n\n\t\tinputBindBlur() {\n\t\t\tconsole.log('占位：函数 inputBindBlur 未声明');\n\t\t}\n\t}\n};\n</script>\n<style>\n@import './index.css';\n</style>\n","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}